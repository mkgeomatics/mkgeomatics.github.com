<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[mattmakesmaps]]></title>
  <link href="http://mkgeomatics.github.io/atom.xml" rel="self"/>
  <link href="http://mkgeomatics.github.io/"/>
  <updated>2013-10-15T21:32:57-07:00</updated>
  <id>http://mkgeomatics.github.io/</id>
  <author>
    <name><![CDATA[Matthew Kenny]]></name>
    <email><![CDATA[matthewkenny AT gmail DOT com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[TileStache-Links-Roundup]]></title>
    <link href="http://mkgeomatics.github.io/blog/2013/10/15/tilestache-links-roundup/"/>
    <updated>2013-10-15T20:51:00-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2013/10/15/tilestache-links-roundup</id>
    <content type="html"><![CDATA[<p>I&rsquo;m giving a presentation at this year&rsquo;s <a href="http://cugos.org/events/2013/10/16/fall-fling/">CUGOS Fall Fling Bling</a>, on <a href="http://tilestache.org">TileStache</a>. The list below are a series of interesting links I&rsquo;ve found regarding TileStache, or Vector Tiles in general.</p>

<h2>Mind of Migurski</h2>

<ul>
<li><a href="http://mike.teczno.com/notes/vector-tile-rendering-numbers.html">Tiled Vector Update, with Math</a></li>
<li><a href="http://mike.teczno.com/notes/postgreslessness-mapnik-vectiles.html">the libery of postgreslessness: tiled vectors in mapnik</a></li>
<li><a href="http://mike.teczno.com/notes/tilestache.html">Presenting TileStache</a></li>
</ul>


<h2>Nelson Minar Vector Tiles Notes</h2>

<ul>
<li><a href="https://github.com/NelsonMinar/vector-river-map">Map of American Rivers</a>: <strong>NOTE:</strong> This is a fantastic tutorial.</li>
<li><a href="http://bl.ocks.org/NelsonMinar/5851197">TopoJSON Vector Maps from OSM</a></li>
<li><a href="http://vimeopro.com/openstreetmapus/state-of-the-map-us-2013/video/68099164">TopoJSON: A Smaller GeoJSON with Some Neat Tricks</a></li>
</ul>


<h2>Data</h2>

<ul>
<li><a href="http://openstreetmap.us/~migurski/vector-datasource/">OSM US Vector Tiles</a></li>
</ul>


<p>My own slides from the Fall Fling can be found <a href="https://speakerdeck.com/mattmakesmaps/tilestache-more-then-youre-granddads-tilecache-server">here</a>. An introductory blog post on rendering TopoJSON with TileStache can be found, <a href="http://mattmakesmaps.com/blog/2013/10/09/tilestache-rendering-topojson/">here</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[TileStache: Generate [Topo|Geo]JSON Vector Tiles]]></title>
    <link href="http://mkgeomatics.github.io/blog/2013/10/09/tilestache-rendering-topojson/"/>
    <updated>2013-10-09T19:25:00-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2013/10/09/tilestache-rendering-topojson</id>
    <content type="html"><![CDATA[<p>Vector tiles are simply tiled representations of geographic data, much like raster tiles
used to power typical web maps such as OpenStreetMap. They differ from traditional
raster tiles however in that instead being an image, they actually contain the
geographic coordinates and attributes of the features that exist within their bounding boxes.
Vector tiles can be used for a variety of different rendered outputs within a modern web-mapping
application. One examples can include serving as an intermediate step in the processing of
raster tiles. This approach is adopted by Mapbox, who have defined their own
<a href="https://www.mapbox.com/blog/vector-tiles/">mapnik-vector-tile</a> spec. This allows for amazing
styling possibilities, allowing raster tiles to be generated with different styles quickly and
efficiently based on the same dataset. Another approach relies on transmitting vector data directly
to the client, where client-side libs render data as SVGs directly in the browser. <a href="http://d3js.org">D3.js</a>
is a JavaScript library that can do this just this, as illustrated by <a href="http://bl.ocks.org/svmatthews/6081504">Sam Matthews</a>. Now that we know what they&rsquo;re good for, how can we take our own local geographic data, and render our own?</p>

<!-- more -->


<p><a href="http://tilestache.org">TileStache</a> is a Tiled Mapping Server written in Python. The core committer on the project
is <a href="http://mike.teczno.com">Michael Migurski</a>, formerly of <a href="http://stamen.com">Stamen Design</a> and now CTO of
<a href="http://www.codeforamerica.org">Code for America</a>. He&rsquo;s blogged extensively about his development of
the TileStache project to incorporate both use-cases illustrated above
(<a href="http://mike.teczno.com/notes/postgreslessness-mapnik-vectiles.html">pipeline to raster tiles via mapnik</a>,
<a href="http://mike.teczno.com/notes/vector-tile-rendering-numbers.html">client-side rendering</a>)</p>

<p>I&rsquo;ve been reviewing the source code for this project for the past few weeks and have been impressed at the accessibility
of the code to a novice Python developer such as myself. In any event, I&rsquo;d like to use this post to drop some
quick notes on how to get things up and running.</p>

<h2>Prerequisites</h2>

<ul>
<li>TileStache Installed With Dependencies</li>
<li>PostGIS Installed</li>
</ul>


<h2>Data</h2>

<p>The dataset I imported for rendering is known as &lsquo;processed_p&rsquo;, which can be downloaded <a href="http://openstreetmapdata.com/data/land-polygons">here</a>. This is the land dataset used in the OpenStreetMap basemap. I picked this dataset because it is highly detailed, large (365 MB), and projected in spherical mercator. This is a perfect example of a dataset in which you would really want to have a server spraying out just those specific slices of data (tiles) a user has requested, from the larger whole.</p>

<h2>Process</h2>

<ol>
<li>Create a PostGIS Database, &lsquo;ts_data&rsquo;</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>created ts_data
</span><span class='line'><span class="nv">$ </span>psql -d ts_data
</span><span class='line'>ts_data# CREATE EXTENSION postgis;
</span><span class='line'>CREATE EXTENSION
</span><span class='line'><span class="nv">ts_data</span><span class="o">=</span><span class="c"># CREATE SCHEMA osm;</span>
</span><span class='line'>CREATE SCHEMA
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Load processed_p Shapefile into PostGIS</li>
</ol>


<p>NOTE: See the excellent shp2pgsql/pgsql2shp cheat sheet by <a href="http://www.bostongis.com/pgsql2shp_shp2pgsql_quickguide_20.bqg">BostonGIS</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># NOTE YMMV, MAY NEED TO ADD ADDITIONAL PSQL CONNECTION PARAMS. SEE &#39;$psql --help&#39;</span>
</span><span class='line'><span class="nv">$ </span>shp2pgsql -I -s 900913 land_polygons.shp osm.land_polygons_split | psql -d ts_data
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Create a TileStache Config</li>
</ol>


<p>TileStache relies on a user-defined configuration file to define a layer, accessible by a client.
In this context, a layer is essentially a combination of a backing dataset (e.g. shapefile, MBTiles,
PostGIS database, etc.) and instructions on how those data should be rendered (e.g. Vector Tiles, UTF-GRID, Mapnik, etc.)</p>

<p>An example configuration file can be found <a href="https://github.com/mattmakesmaps/TileStache-Experiment/blob/master/config_files/topojson.cfg#L84-L99">here</a>. I&rsquo;ve highlighted the relevant block, which is excerpted
below. This example uses the VecTiles provider (<a href="http://tilestache.org/doc/TileStache.Goodies.VecTiles.html">docs</a>),
which requires a PostGIS backing store, and produces tiles in geojson, topojson, or Mapnik Vector Tile (MVT) format.
Comments have been added below for clarity.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s2">&quot;osm-processed_p1&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// Layer Name</span>
</span><span class='line'>    <span class="c1">// Sets ACCESS-CONTROL-ALLOW-ORIGIN header to &quot;*&quot;</span>
</span><span class='line'>    <span class="s2">&quot;allowed origin&quot;</span><span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;provider&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;TileStache.Goodies.VecTiles:Provider&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="c1">// PostGIS Connection Info</span>
</span><span class='line'>        <span class="s2">&quot;kwargs&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;dbinfo&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="s2">&quot;host&quot;</span><span class="o">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s2">&quot;user&quot;</span><span class="o">:</span> <span class="s2">&quot;matt&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s2">&quot;database&quot;</span><span class="o">:</span> <span class="s2">&quot;ts_data&quot;</span>
</span><span class='line'>            <span class="p">},</span>
</span><span class='line'>            <span class="c1">// An array of queries for each zoom level.</span>
</span><span class='line'>            <span class="c1">// One query == Used for All Zooms</span>
</span><span class='line'>            <span class="s2">&quot;queries&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>                <span class="s2">&quot;SELECT gid, geom AS __geometry__ FROM osm.land_polygons_split&quot;</span>
</span><span class='line'>            <span class="p">]</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Start the Server.</li>
</ol>


<p>TileStache comes pre-canned with it&rsquo;s own simple development server. If installing TileStache from a python package
manager, It can be accessed from the command line via <code>$ tilestache-server.py</code>.</p>

<p>The server should now be accessible via <a href="http://127.0.0.1:8080/">http://127.0.0.1:8080/</a>. &ldquo;TileStache bellows hello.&rdquo;</p>

<ol>
<li>Request a Tile.</li>
</ol>


<p>From the <a href="http://tilestache.org/doc/">API docs</a>: &ldquo;TileStache URLs are based on a Google Maps-like scheme&rdquo;:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="sr">/{layer name}/</span><span class="p">{</span><span class="nx">zoom</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="nx">column</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="nx">row</span><span class="p">}.{</span><span class="nx">extension</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Utilizing the layer name referenced in the configuration example above, &ldquo;osm-processed_p1&rdquo;, a tile request would look like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">http</span><span class="o">:</span><span class="c1">//127.0.0.1:8080/osm-processed_p1/9/147/196.topojson #TopoJSON</span>
</span><span class='line'><span class="nx">http</span><span class="o">:</span><span class="c1">//127.0.0.1:8080/osm-processed_p1/9/147/196.json #GeoJSON</span>
</span><span class='line'><span class="nx">http</span><span class="o">:</span><span class="c1">//127.0.0.1:8080/osm-processed_p1/9/147/196.mvt # Mapnik Vector Tile</span>
</span></code></pre></td></tr></table></div></figure>


<p>Looking at the HTTP requests above, we can see that we&rsquo;re calling on the same layer, e.g. the same backing datastore,
but rendering those same data into three different output formats. Pretty neat.</p>

<h2>Wrapping Up</h2>

<p>TileStache vector tiles can be rendered in any number of client side JS libraries that support GeoJSON or TopoJSON.
Pushing the above requested TopoJSON tile to github, we can view the rendered geometries with their attributes.</p>

<div><script src='https://gist.github.com/6896905.js?file=s00_9_147_196.topojson'></script>
<noscript><pre><code>{&quot;objects&quot;:{&quot;vectile&quot;:{&quot;type&quot;:&quot;GeometryCollection&quot;,&quot;geometries&quot;:[{&quot;arcs&quot;:[[0]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132148},&quot;clipped&quot;:true,&quot;id&quot;:&quot;cdf2dad9bf&quot;},{&quot;arcs&quot;:[[1]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132149},&quot;clipped&quot;:true,&quot;id&quot;:&quot;f577c6c476&quot;},{&quot;arcs&quot;:[[2]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132150},&quot;clipped&quot;:true,&quot;id&quot;:&quot;cf61e69ac4&quot;},{&quot;arcs&quot;:[[3]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132151},&quot;clipped&quot;:true,&quot;id&quot;:&quot;06d7bcebe6&quot;},{&quot;arcs&quot;:[[4]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132152},&quot;clipped&quot;:true,&quot;id&quot;:&quot;483a9f3660&quot;},{&quot;arcs&quot;:[[5]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132153},&quot;clipped&quot;:true,&quot;id&quot;:&quot;a2e1817cf1&quot;},{&quot;arcs&quot;:[[6]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132154},&quot;clipped&quot;:true,&quot;id&quot;:&quot;8409c14d0c&quot;},{&quot;arcs&quot;:[[7]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132155},&quot;clipped&quot;:true,&quot;id&quot;:&quot;79b65c00b9&quot;},{&quot;arcs&quot;:[[8]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132156},&quot;clipped&quot;:true,&quot;id&quot;:&quot;78cfaffb9f&quot;},{&quot;arcs&quot;:[[9]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132157},&quot;clipped&quot;:true,&quot;id&quot;:&quot;d25f37345c&quot;},{&quot;arcs&quot;:[[10]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132161},&quot;clipped&quot;:true,&quot;id&quot;:&quot;87fffd3593&quot;},{&quot;arcs&quot;:[[11]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132164},&quot;clipped&quot;:true,&quot;id&quot;:&quot;d5849a188f&quot;},{&quot;arcs&quot;:[[12]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132165},&quot;clipped&quot;:true,&quot;id&quot;:&quot;c6fba86600&quot;},{&quot;arcs&quot;:[[13]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132158},&quot;clipped&quot;:true,&quot;id&quot;:&quot;3d02b9d4e0&quot;},{&quot;arcs&quot;:[[14]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132159},&quot;clipped&quot;:true,&quot;id&quot;:&quot;faa5aaf0f9&quot;},{&quot;arcs&quot;:[[15]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132160},&quot;clipped&quot;:true,&quot;id&quot;:&quot;a1110bf5f6&quot;},{&quot;arcs&quot;:[[16]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132173},&quot;clipped&quot;:true,&quot;id&quot;:&quot;bd57c19e69&quot;},{&quot;arcs&quot;:[[17]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132147},&quot;clipped&quot;:true,&quot;id&quot;:&quot;c111dae186&quot;},{&quot;arcs&quot;:[[18]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142087},&quot;clipped&quot;:true,&quot;id&quot;:&quot;8ec73f36e2&quot;},{&quot;arcs&quot;:[[19]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142089},&quot;clipped&quot;:true,&quot;id&quot;:&quot;91e2ed0b62&quot;},{&quot;arcs&quot;:[[20]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142095},&quot;clipped&quot;:true,&quot;id&quot;:&quot;046ba261e3&quot;},{&quot;arcs&quot;:[[21]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142096},&quot;clipped&quot;:true,&quot;id&quot;:&quot;7d1a520c06&quot;},{&quot;arcs&quot;:[[22]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142164},&quot;clipped&quot;:true,&quot;id&quot;:&quot;9f2c36f4b5&quot;},{&quot;arcs&quot;:[[23]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142206},&quot;clipped&quot;:true,&quot;id&quot;:&quot;06b3677f73&quot;},{&quot;arcs&quot;:[[24]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147120},&quot;clipped&quot;:true,&quot;id&quot;:&quot;852e00341e&quot;},{&quot;arcs&quot;:[[25]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147144},&quot;clipped&quot;:true,&quot;id&quot;:&quot;c37dbde232&quot;},{&quot;arcs&quot;:[[26]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147165},&quot;clipped&quot;:true,&quot;id&quot;:&quot;2ff15ba3c0&quot;},{&quot;arcs&quot;:[[27]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147179},&quot;clipped&quot;:true,&quot;id&quot;:&quot;bb393ac749&quot;},{&quot;arcs&quot;:[[28]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147180},&quot;clipped&quot;:true,&quot;id&quot;:&quot;67d0a0cb16&quot;},{&quot;arcs&quot;:[[29]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147207},&quot;clipped&quot;:true,&quot;id&quot;:&quot;f47f7e2abc&quot;},{&quot;arcs&quot;:[[30]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147212},&quot;clipped&quot;:true,&quot;id&quot;:&quot;0e4f775bff&quot;},{&quot;arcs&quot;:[[31]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147213},&quot;clipped&quot;:true,&quot;id&quot;:&quot;93b83b749d&quot;},{&quot;arcs&quot;:[[32]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:484986},&quot;clipped&quot;:true,&quot;id&quot;:&quot;0c0caa5c3e&quot;},{&quot;arcs&quot;:[[33]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:530124},&quot;clipped&quot;:true,&quot;id&quot;:&quot;fa0ed3240f&quot;},{&quot;arcs&quot;:[[34]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132167},&quot;clipped&quot;:true,&quot;id&quot;:&quot;d6786bba96&quot;},{&quot;arcs&quot;:[[[35]],[[36]],[[37]]],&quot;type&quot;:&quot;MultiPolygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132171},&quot;clipped&quot;:true,&quot;id&quot;:&quot;44a5b0ca3b&quot;},{&quot;arcs&quot;:[[38]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131965},&quot;clipped&quot;:true,&quot;id&quot;:&quot;3193bdcf00&quot;},{&quot;arcs&quot;:[[39]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131966},&quot;clipped&quot;:true,&quot;id&quot;:&quot;dafa4d9024&quot;},{&quot;arcs&quot;:[[40]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131970},&quot;clipped&quot;:true,&quot;id&quot;:&quot;cbbe95e42a&quot;},{&quot;arcs&quot;:[[41]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131972},&quot;clipped&quot;:true,&quot;id&quot;:&quot;266d59eaa0&quot;},{&quot;arcs&quot;:[[42]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132162},&quot;clipped&quot;:true,&quot;id&quot;:&quot;53bcc1e76f&quot;},{&quot;arcs&quot;:[[43]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132163},&quot;clipped&quot;:true,&quot;id&quot;:&quot;d381516991&quot;},{&quot;arcs&quot;:[[44]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132166},&quot;clipped&quot;:true,&quot;id&quot;:&quot;2de33e12d8&quot;},{&quot;arcs&quot;:[[45]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147052},&quot;clipped&quot;:true,&quot;id&quot;:&quot;a04b477784&quot;},{&quot;arcs&quot;:[[46]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147112},&quot;clipped&quot;:true,&quot;id&quot;:&quot;0d229ab600&quot;},{&quot;arcs&quot;:[[47]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:147211},&quot;clipped&quot;:true,&quot;id&quot;:&quot;8a3669476b&quot;},{&quot;arcs&quot;:[[48]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132130},&quot;clipped&quot;:true,&quot;id&quot;:&quot;74d672d6aa&quot;},{&quot;arcs&quot;:[[49]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132142},&quot;clipped&quot;:true,&quot;id&quot;:&quot;da8805a166&quot;},{&quot;arcs&quot;:[[50]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132143},&quot;clipped&quot;:true,&quot;id&quot;:&quot;5361637907&quot;},{&quot;arcs&quot;:[[51]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132131},&quot;clipped&quot;:true,&quot;id&quot;:&quot;2d81d3f641&quot;},{&quot;arcs&quot;:[[52]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132132},&quot;clipped&quot;:true,&quot;id&quot;:&quot;27ca007c7b&quot;},{&quot;arcs&quot;:[[53]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132133},&quot;clipped&quot;:true,&quot;id&quot;:&quot;ae82fa887e&quot;},{&quot;arcs&quot;:[[54]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132141},&quot;clipped&quot;:true,&quot;id&quot;:&quot;7a90a7a355&quot;},{&quot;arcs&quot;:[[55]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132144},&quot;clipped&quot;:true,&quot;id&quot;:&quot;01fab69460&quot;},{&quot;arcs&quot;:[[56]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132145},&quot;clipped&quot;:true,&quot;id&quot;:&quot;f13eacb14f&quot;},{&quot;arcs&quot;:[[57]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132146},&quot;clipped&quot;:true,&quot;id&quot;:&quot;ab6911a580&quot;},{&quot;arcs&quot;:[[58]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132465},&quot;clipped&quot;:true,&quot;id&quot;:&quot;b4c49dbed3&quot;},{&quot;arcs&quot;:[[59]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132467},&quot;clipped&quot;:true,&quot;id&quot;:&quot;4208012975&quot;},{&quot;arcs&quot;:[[60]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142097},&quot;clipped&quot;:true,&quot;id&quot;:&quot;9422c27108&quot;},{&quot;arcs&quot;:[[61]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:141312},&quot;clipped&quot;:true,&quot;id&quot;:&quot;0a0fde9af5&quot;},{&quot;arcs&quot;:[[62]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:141318},&quot;clipped&quot;:true,&quot;id&quot;:&quot;97fa6d8771&quot;},{&quot;arcs&quot;:[[63]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:141385},&quot;clipped&quot;:true,&quot;id&quot;:&quot;ac81484d20&quot;},{&quot;arcs&quot;:[[64]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:141406},&quot;clipped&quot;:true,&quot;id&quot;:&quot;3c14ba68ee&quot;},{&quot;arcs&quot;:[[65]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142085},&quot;clipped&quot;:true,&quot;id&quot;:&quot;fc46708fa7&quot;},{&quot;arcs&quot;:[[66]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142086},&quot;clipped&quot;:true,&quot;id&quot;:&quot;df106e903a&quot;},{&quot;arcs&quot;:[[67]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142088},&quot;clipped&quot;:true,&quot;id&quot;:&quot;40b7c55cb0&quot;},{&quot;arcs&quot;:[[68]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142090},&quot;clipped&quot;:true,&quot;id&quot;:&quot;6abb18b6f9&quot;},{&quot;arcs&quot;:[[69]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142091},&quot;clipped&quot;:true,&quot;id&quot;:&quot;13d5442d0d&quot;},{&quot;arcs&quot;:[[70]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142092},&quot;clipped&quot;:true,&quot;id&quot;:&quot;2c3f08cb3a&quot;},{&quot;arcs&quot;:[[71]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142093},&quot;clipped&quot;:true,&quot;id&quot;:&quot;7718545d88&quot;},{&quot;arcs&quot;:[[72]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142094},&quot;clipped&quot;:true,&quot;id&quot;:&quot;257e6bc2b4&quot;},{&quot;arcs&quot;:[[73]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142134},&quot;clipped&quot;:true,&quot;id&quot;:&quot;eeba683a73&quot;},{&quot;arcs&quot;:[[74]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142160},&quot;clipped&quot;:true,&quot;id&quot;:&quot;c909f02fea&quot;},{&quot;arcs&quot;:[[75]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142175},&quot;clipped&quot;:true,&quot;id&quot;:&quot;8a4e519b66&quot;},{&quot;arcs&quot;:[[76]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142187},&quot;clipped&quot;:true,&quot;id&quot;:&quot;4fb64cca2b&quot;},{&quot;arcs&quot;:[[77]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142204},&quot;clipped&quot;:true,&quot;id&quot;:&quot;e02a0e738b&quot;},{&quot;arcs&quot;:[[78]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142213},&quot;clipped&quot;:true,&quot;id&quot;:&quot;59e63949bc&quot;},{&quot;arcs&quot;:[[79]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142244},&quot;clipped&quot;:true,&quot;id&quot;:&quot;8f9d949337&quot;},{&quot;arcs&quot;:[[80]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142255},&quot;clipped&quot;:true,&quot;id&quot;:&quot;db031e1951&quot;},{&quot;arcs&quot;:[[81]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:142264},&quot;clipped&quot;:true,&quot;id&quot;:&quot;313b7dc7dc&quot;},{&quot;arcs&quot;:[[82]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:274030},&quot;clipped&quot;:true,&quot;id&quot;:&quot;6784569e29&quot;},{&quot;arcs&quot;:[[83]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132135},&quot;clipped&quot;:true,&quot;id&quot;:&quot;a81f46d6d4&quot;},{&quot;arcs&quot;:[[84]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:132140},&quot;clipped&quot;:true,&quot;id&quot;:&quot;cb1f080454&quot;},{&quot;arcs&quot;:[[85]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131954},&quot;clipped&quot;:true,&quot;id&quot;:&quot;651446daa9&quot;},{&quot;arcs&quot;:[[[86]],[[87]],[[88]]],&quot;type&quot;:&quot;MultiPolygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131949},&quot;clipped&quot;:true,&quot;id&quot;:&quot;0a0e3712d4&quot;},{&quot;arcs&quot;:[[89]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131955},&quot;clipped&quot;:true,&quot;id&quot;:&quot;7b2e903309&quot;},{&quot;arcs&quot;:[[90]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131967},&quot;clipped&quot;:true,&quot;id&quot;:&quot;e6523ca7ce&quot;},{&quot;arcs&quot;:[[91]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131968},&quot;clipped&quot;:true,&quot;id&quot;:&quot;2d46b68521&quot;},{&quot;arcs&quot;:[[92]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131960},&quot;clipped&quot;:true,&quot;id&quot;:&quot;6f0aa0aadf&quot;},{&quot;arcs&quot;:[[93]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131961},&quot;clipped&quot;:true,&quot;id&quot;:&quot;88d684f2e1&quot;},{&quot;arcs&quot;:[[94]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131974},&quot;clipped&quot;:true,&quot;id&quot;:&quot;56c863a00f&quot;},{&quot;arcs&quot;:[[95]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131969},&quot;clipped&quot;:true,&quot;id&quot;:&quot;3bbb873dda&quot;},{&quot;arcs&quot;:[[96]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:131973},&quot;clipped&quot;:true,&quot;id&quot;:&quot;9330b1a24e&quot;},{&quot;arcs&quot;:[[97]],&quot;type&quot;:&quot;Polygon&quot;,&quot;properties&quot;:{&quot;gid&quot;:551656},&quot;clipped&quot;:true,&quot;id&quot;:&quot;fe68fa9e57&quot;}]}},&quot;type&quot;:&quot;Topology&quot;,&quot;transform&quot;:{&quot;translate&quot;:[-76.64062500000001,38.27268853598095],&quot;scale&quot;:[0.0006866455078125139,0.0005370141017540866]},&quot;arcs&quot;:[[[699,501],[-64,0],[-3,5],[-4,1],[0,1],[-6,1],[0,2],[2,0],[3,3],[1,2],[2,2],[1,0],[-1,-1],[1,-2],[3,1],[0,2],[-2,0],[2,3],[0,1],[2,-1],[1,1],[0,-1],[3,-2],[0,-1],[2,1],[0,4],[2,1],[1,-3],[1,0],[0,2],[4,1],[0,-3],[2,-1],[-1,2],[2,0],[1,3],[2,0],[1,1],[2,1],[0,1],[1,-1],[1,2],[5,0],[0,-4],[1,-2],[2,-1],[-1,-1],[0,-2],[-1,0],[0,-1],[1,0],[0,-1],[1,0],[1,-6],[1,0],[1,5],[-1,2],[1,5],[1,0],[0,2],[-2,0],[1,6],[2,1],[3,0],[3,2],[0,-3],[2,-1],[2,-6],[3,0],[-1,-4],[1,0],[0,-1],[1,0],[-1,3],[2,0],[0,-1],[2,-1],[-1,2],[2,1],[0,1],[-1,-1],[-3,1],[-1,2],[-2,0],[0,2],[1,0],[-1,4],[2,0],[-1,1],[-4,1],[0,1],[-1,0],[-1,1],[1,0],[2,1],[-3,0],[-2,4],[-2,-1],[-1,0],[0,1],[1,0],[2,8],[1,2],[2,0],[-2,5],[4,2],[2,4],[1,0],[1,-3],[3,-1],[-2,3],[2,2],[2,-1],[1,-2],[3,-2],[1,1],[2,1],[0,-59]],[[699,562],[-1,0],[-2,4],[-4,0],[-1,0],[0,1],[-2,-1],[-1,1],[-1,1],[-1,3],[-1,0],[2,5],[-4,-2],[-1,-5],[-1,1],[-2,0],[2,-2],[0,-5],[-4,-2],[-2,2],[1,1],[-1,3],[-1,0],[-1,2],[-1,0],[1,1],[-2,0],[0,3],[1,0],[0,1],[-3,0],[1,1],[-1,1],[0,3],[-1,0],[0,3],[1,0],[-1,1],[1,2],[1,0],[1,2],[-1,0],[1,1],[-4,-1],[0,1],[-2,1],[1,-3],[1,0],[-1,-1],[0,-3],[0,-2],[-1,-1],[0,-1],[1,0],[0,-3],[-2,-1],[3,0],[0,-1],[-1,-2],[2,0],[0,-5],[1,0],[1,-1],[-1,0],[1,-1],[2,0],[0,-2],[-3,-1],[0,-1],[4,-1],[0,-3],[-3,-1],[0,-1],[-1,0],[-1,-3],[2,-3],[-4,0],[-2,2],[0,-5],[1,0],[1,-5],[-2,0],[1,-1],[0,-2],[-2,2],[0,1],[-3,0],[0,1],[-2,0],[-1,-3],[-2,0],[0,-1],[-4,1],[0,3],[2,2],[0,1],[-3,-2],[-1,1],[0,4],[-1,-1],[-1,0],[-1,-5],[2,0],[-1,-4],[0,1],[-1,0],[0,1],[-10,-1],[-1,-3],[-1,0],[-1,-2],[-5,0],[1,3],[5,3],[2,5],[-2,6],[2,1],[0,3],[3,1],[0,2],[-1,1],[2,1],[1,4],[1,1],[1,3],[-1,1],[1,3],[0,6],[3,0],[0,1],[-5,0],[1,5],[-1,0],[0,1],[1,0],[0,1],[-3,1],[-1,3],[1,1],[-1,4],[-1,-4],[0,-6],[1,0],[1,-8],[1,0],[0,-1],[-2,0],[1,-2],[0,-1],[-3,0],[0,-1],[1,0],[0,-1],[1,0],[0,-3],[-1,2],[-3,-1],[0,-2],[1,-1],[-2,-1],[1,-4],[-1,0],[-3,1],[0,-1],[2,-1],[-1,-2],[0,-4],[-1,-2],[-2,1],[-1,-2],[-1,0],[0,-3],[-2,1],[0,3],[-3,0],[0,1],[-1,-6],[-4,2],[-1,3],[1,3],[-2,1],[0,2],[1,2],[-1,0],[-1,-2],[-2,1],[-1,0],[-1,-1],[-1,0],[0,1],[-1,0],[-1,1],[-1,-1],[-1,-1],[-1,1],[0,1],[3,2],[-2,5],[-1,0],[0,3],[3,3],[6,1],[2,1],[0,1],[2,3],[1,0],[-2,3],[2,1],[2,4],[1,3],[-2,-1],[-1,-1],[-4,1],[0,2],[-1,-1],[0,-3],[2,-1],[0,-3],[-1,-4],[-1,-2],[-7,-1],[-3,1],[1,-2],[0,-2],[-3,0],[0,-2],[-1,0],[-2,-1],[0,1],[0,1],[-2,0],[1,-3],[1,0],[0,-1],[3,0],[0,-4],[1,-1],[-3,-1],[1,-1],[1,0],[1,0],[0,-1],[-1,-1],[-1,0],[0,-1],[0,-1],[-1,1],[-1,1],[0,-1],[1,-1],[0,-2],[0,-1],[-1,0],[-1,0],[1,-1],[-1,-1],[1,0],[1,1],[1,-1],[0,1],[0,1],[2,-1],[1,-1],[0,1],[1,0],[1,-1],[4,1],[2,-1],[-1,-3],[1,-4],[5,-1],[0,-1],[-5,-1],[-4,0],[-1,-1],[2,-9],[-3,-1],[0,-1],[2,0],[1,-2],[2,0],[0,-2],[-2,0],[1,-1],[0,-3],[2,-3],[-2,1],[-3,1],[0,-2],[-6,0],[0,-3],[-1,1],[0,1],[-3,-1],[0,-2],[-2,-1],[1,-1],[-2,-2],[-1,2],[1,2],[-3,-1],[0,-3],[0,1],[-2,0],[0,-4],[-6,2],[3,5],[0,2],[1,0],[1,2],[-2,2],[1,3],[1,2],[-1,1],[0,2],[1,0],[1,-1],[0,-1],[1,4],[1,1],[2,2],[-2,1],[-1,-2],[-1,1],[-1,-1],[-1,0],[-1,2],[2,2],[2,3],[2,0],[-2,1],[-4,-2],[0,2],[-1,0],[0,-4],[-3,0],[1,-4],[-1,-3],[-1,-1],[0,-1],[1,0],[0,-4],[-1,-1],[1,0],[0,-4],[-2,0],[1,-2],[1,0],[0,-1],[-1,0],[0,-2],[-3,-1],[1,9],[1,0],[-2,10],[1,0],[1,2],[-1,2],[-1,1],[-1,5],[3,2],[0,3],[1,0],[1,1],[2,0],[0,1],[2,1],[0,-1],[3,0],[1,2],[-2,-1],[-2,3],[-3,0],[0,-2],[-2,0],[1,1],[-2,1],[1,4],[-2,2],[1,2],[3,0],[-1,3],[-1,0],[0,-1],[-1,5],[1,2],[1,0],[-1,4],[2,1],[-2,1],[1,3],[0,1],[-2,0],[-2,2],[-1,0],[0,3],[2,2],[1,-1],[0,1],[1,1],[-2,1],[0,-1],[0,1],[0,1],[-1,0],[-2,-3],[-1,0],[2,3],[2,1],[7,0],[1,2],[0,2],[1,2],[2,0],[1,4],[-4,1],[0,5],[2,2],[1,0],[2,-2],[6,-1],[1,1],[-7,1],[0,2],[-2,1],[-2,3],[0,-3],[0,-2],[-2,0],[0,-3],[-4,0],[0,-1],[4,0],[-1,-4],[1,0],[0,-1],[-2,-5],[0,-1],[-1,1],[-3,1],[0,-2],[-2,1],[-1,-3],[-2,1],[1,-2],[-5,0],[0,2],[-1,0],[-1,2],[-2,3],[-1,0],[0,1],[-1,0],[3,-10],[4,-4],[0,-1],[1,0],[5,-11],[-3,0],[1,-2],[1,0],[1,-3],[-2,0],[-1,-3],[1,-2],[-3,-1],[-1,6],[-2,0],[0,-1],[-1,-2],[-1,0],[0,-2],[1,0],[1,-2],[2,-1],[-1,-2],[-2,0],[0,-2],[-2,0],[3,0],[0,-1],[2,2],[1,-4],[1,0],[1,-2],[-2,-1],[0,-1],[1,0],[0,-6],[-3,0],[0,2],[0,2],[-2,1],[-3,-1],[0,-1],[1,0],[0,-4],[-2,1],[0,1],[-1,1],[-2,-1],[0,-1],[0,-1],[-2,0],[-1,4],[-1,-2],[0,-4],[2,-3],[0,1],[2,0],[0,-3],[1,0],[0,1],[3,0],[0,-1],[2,0],[0,-1],[2,1],[1,-5],[1,-2],[-2,-1],[-1,-3],[-1,2],[-6,-2],[0,-1],[2,-1],[-1,-1],[-1,0],[0,-1],[3,-1],[0,1],[3,-1],[4,1],[1,-3],[-5,-1],[0,-1],[-1,0],[2,-5],[1,0],[1,-1],[0,-4],[-3,0],[0,-2],[1,0],[0,-1],[-5,0],[-1,1],[1,8],[-1,1],[0,1],[-1,0],[0,1],[-5,-1],[0,-1],[-1,0],[0,1],[-1,0],[1,3],[2,0],[0,3],[-2,3],[-4,1],[0,2],[1,0],[-1,12],[-1,0],[0,1],[-6,1],[0,1],[2,0],[1,3],[1,0],[0,3],[1,1],[0,1],[0,2],[1,0],[1,4],[2,0],[1,1],[-2,0],[0,2],[-1,0],[0,1],[-2,0],[0,1],[-2,-1],[0,1],[2,1],[1,2],[2,0],[-1,3],[-3,-1],[-1,-3],[-3,1],[-3,6],[-2,0],[0,-10],[1,-2],[1,0],[0,-3],[2,0],[0,-1],[-2,-1],[0,-3],[0,-1],[-2,0],[-5,0],[-1,-4],[2,0],[0,-4],[-1,0],[0,-3],[3,0],[-2,-4],[-1,0],[2,-3],[2,1],[0,-1],[2,0],[1,-2],[2,0],[-1,-3],[-4,1],[1,-2],[1,0],[-1,-1],[-1,-1],[0,-1],[1,0],[0,-1],[4,1],[-1,-1],[4,-3],[-2,-1],[-1,-1],[-2,0],[-1,2],[-2,0],[2,-6],[1,0],[0,-1],[5,1],[0,-5],[-1,-2],[-2,-1],[0,7],[-2,0],[0,-3],[0,-3],[-3,-1],[-3,3],[-1,2],[-1,-1],[0,1],[-1,0],[1,3],[1,0],[-1,8],[0,1],[1,0],[-6,15],[-1,0],[-2,4],[-4,0],[0,2],[0,1],[-1,0],[0,2],[-1,0],[-1,1],[-1,3],[-3,3],[-1,1],[-1,2],[-2,0],[0,1],[-11,0],[-1,1],[1,0],[1,2],[-1,0],[-2,2],[-7,1],[2,3],[4,-1],[1,2],[2,0],[0,1],[4,3],[0,1],[3,2],[0,2],[2,0],[0,3],[1,0],[0,2],[1,1],[0,-2],[4,1],[-2,-9],[1,-1],[1,-1],[7,-3],[2,-4],[0,-1],[-1,0],[2,-2],[1,-1],[0,-1],[0,-2],[1,1],[1,4],[-1,0],[0,3],[1,-1],[0,3],[2,0],[2,3],[0,4],[-1,1],[1,0],[1,1],[1,2],[11,5],[-1,-2],[4,-2],[-2,3],[0,2],[2,2],[5,3],[-3,2],[0,1],[-2,0],[-1,2],[-1,0],[1,2],[6,-3],[1,0],[-1,2],[-1,3],[-4,1],[1,2],[-2,1],[-4,-2],[0,-2],[-1,0],[0,-1],[-3,1],[1,5],[1,0],[1,2],[1,0],[0,3],[2,1],[1,-2],[4,-1],[3,4],[-2,-1],[1,4],[0,2],[-1,1],[0,1],[0,-1],[3,-1],[-1,3],[2,-1],[2,1],[-2,4],[2,0],[-1,1],[-2,1],[-1,0],[0,-2],[-10,-1],[-6,0],[1,-1],[1,0],[0,-1],[-2,0],[-1,0],[-1,4],[-1,0],[0,1],[1,5],[-1,0],[-2,4],[-2,1],[0,1],[-1,1],[-1,7],[-1,1],[-4,14],[-3,2],[-1,3],[1,1],[0,-2],[2,-3],[7,-1],[0,-1],[0,-1],[4,-2],[1,-5],[3,0],[0,-1],[1,-1],[0,-3],[0,1],[-1,0],[-1,2],[-5,0],[0,-4],[1,-1],[0,-3],[-1,-1],[-1,0],[0,-3],[1,0],[0,1],[5,0],[0,-2],[0,-2],[-1,1],[0,-2],[1,0],[1,-3],[5,0],[0,-1],[5,0],[0,-1],[1,0],[0,3],[-1,0],[-1,1],[-2,0],[-1,3],[7,1],[1,-1],[1,0],[-2,8],[1,0],[0,1],[2,2],[1,0],[1,3],[1,0],[0,-2],[1,0],[0,-3],[0,-2],[1,0],[-1,-1],[2,-2],[0,-2],[-1,0],[0,-1],[4,-1],[1,-3],[2,2],[-1,3],[-3,6],[3,0],[2,1],[0,-1],[2,-1],[3,-2],[1,0],[-1,3],[1,0],[-1,5],[-1,0],[-1,4],[-1,0],[0,1],[-1,0],[0,1],[-1,5],[5,2],[0,1],[1,0],[0,2],[1,0],[34,44],[94,0],[0,-139]],[[604,699],[2,2],[34,43],[-1,2],[-2,2],[-1,2],[-1,0],[0,1],[-1,0],[0,1],[-2,0],[-4,9],[-4,1],[0,1],[-1,6],[-1,2],[-2,0],[0,5],[2,0],[0,2],[2,0],[0,2],[-1,0],[0,1],[-1,0],[-1,2],[-3,2],[-2,3],[-1,0],[-1,2],[1,4],[4,0],[0,-1],[3,-2],[2,1],[-1,3],[0,1],[-2,1],[0,1],[-3,2],[-1,2],[5,0],[0,1],[2,1],[0,1],[2,0],[-1,-3],[0,-2],[3,0],[0,-1],[3,-1],[-2,3],[4,-1],[1,3],[1,0],[0,-2],[1,-1],[-1,-4],[2,-3],[0,1],[3,-2],[0,2],[-2,0],[1,2],[-1,3],[2,1],[2,-3],[0,-1],[1,-1],[0,1],[-1,4],[1,5],[-1,2],[1,1],[5,-1],[0,2],[-6,1],[-1,4],[-1,0],[1,3],[-1,0],[-2,4],[-2,-2],[2,-1],[0,-3],[1,-5],[1,0],[0,-5],[-3,2],[0,1],[-2,0],[0,-1],[-1,0],[0,1],[-2,-1],[-1,1],[0,-1],[-1,0],[0,1],[-3,1],[-1,2],[-1,0],[1,6],[-2,1],[0,1],[-1,2],[-1,0],[-1,-2],[1,-4],[0,-4],[-1,-1],[-3,1],[-1,0],[-3,1],[-2,4],[-1,2],[-6,2],[0,1],[-2,0],[1,2],[-1,1],[-2,1],[0,-3],[-1,-1],[-3,0],[2,-2],[3,0],[0,-3],[1,0],[-1,-4],[2,0],[-1,-2],[0,1],[-2,-1],[0,-3],[1,-3],[3,-1],[-1,-4],[1,0],[-1,-2],[0,-1],[1,0],[0,-4],[-2,-1],[-1,2],[-2,2],[0,1],[-2,8],[-1,0],[1,2],[-2,0],[-1,1],[0,1],[-1,0],[1,-2],[1,-1],[-3,2],[0,1],[-1,0],[0,2],[-1,0],[0,2],[-2,0],[0,3],[-1,0],[-1,2],[-1,1],[0,3],[1,0],[-2,8],[1,6],[1,0],[0,1],[1,0],[1,4],[3,0],[0,-1],[-1,0],[0,-1],[1,0],[1,-2],[2,0],[2,-5],[2,0],[1,2],[-2,0],[0,3],[1,0],[-1,3],[-1,0],[3,2],[0,6],[-1,2],[-3,5],[0,1],[-4,-1],[-3,2],[-1,0],[1,3],[-1,-1],[0,2],[-2,0],[1,4],[7,0],[3,1],[-1,2],[1,0],[0,1],[2,0],[0,1],[2,-3],[3,0],[6,-3],[2,-3],[0,-1],[-4,0],[0,-1],[-1,1],[0,-1],[0,-2],[6,-1],[0,-1],[2,0],[0,-3],[-2,-1],[0,-2],[1,0],[-4,-1],[0,-1],[2,0],[0,-2],[2,0],[0,-4],[-1,0],[2,-3],[4,-5],[-1,6],[-1,0],[1,3],[3,0],[0,1],[-2,0],[0,1],[-2,1],[0,3],[1,1],[2,0],[0,1],[3,1],[2,2],[-1,0],[5,4],[1,0],[2,0],[0,-1],[3,-1],[1,-1],[2,0],[-1,-2],[-3,-1],[1,-1],[0,-1],[2,-1],[0,-1],[-2,-1],[1,-2],[-2,0],[0,-1],[1,0],[1,-4],[0,2],[2,0],[0,1],[0,2],[1,0],[-1,1],[1,5],[1,0],[1,-2],[7,1],[0,-1],[2,1],[0,-5],[1,3],[6,1],[1,-4],[1,0],[-1,0],[0,-1],[2,-1],[0,-1],[1,0],[1,3],[1,0],[0,2],[1,1],[0,1],[0,3],[2,2],[0,3],[-2,-1],[0,-1],[-1,0],[0,-2],[-1,-1],[-1,-3],[-1,2],[-2,2],[0,4],[1,5],[-1,0],[0,2],[1,2],[4,1],[1,2],[1,0],[1,3],[-1,1],[0,-2],[-2,-1],[-1,-2],[-1,0],[-3,-1],[-1,-2],[-1,0],[0,-2],[-1,0],[0,1],[1,4],[-2,-1],[0,-4],[0,-2],[2,-2],[-1,0],[0,-6],[-2,1],[0,4],[-2,0],[0,3],[-2,3],[0,1],[-1,0],[-1,1],[0,9],[3,4],[1,-1],[0,-1],[1,0],[1,-1],[1,0],[0,2],[-1,3],[3,0],[1,1],[0,1],[0,4],[-3,-2],[0,-1],[-1,0],[-1,5],[-1,1],[1,0],[0,3],[1,0],[1,1],[-3,-2],[-1,-2],[-2,0],[2,-3],[0,-5],[-1,0],[0,-1],[-1,0],[-2,0],[0,2],[-1,0],[1,0],[-1,5],[-2,0],[0,2],[-2,0],[-1,2],[3,8],[-1,0],[-1,-3],[-1,0],[0,-2],[-1,-1],[-3,2],[0,1],[-1,0],[1,-3],[2,-1],[0,-1],[-1,0],[1,-4],[4,-1],[0,-2],[0,-3],[-2,-1],[0,-1],[1,1],[2,-2],[-1,-8],[0,-1],[1,-4],[-2,0],[0,1],[-7,3],[-2,3],[-1,3],[2,1],[0,3],[-3,1],[0,4],[-2,1],[-2,3],[-2,5],[-1,0],[0,4],[-2,0],[0,-2],[0,-5],[1,-1],[1,-6],[1,0],[1,-4],[-2,-3],[-4,8],[-1,0],[0,1],[-3,0],[-1,3],[-1,0],[-1,1],[-2,0],[-2,2],[-1,0],[-1,5],[4,-1],[-1,3],[-1,0],[0,1],[-1,-1],[1,1],[64,0],[8,-3],[-3,-1],[-1,-2],[-2,0],[0,-1],[2,0],[-1,-4],[3,0],[-1,-4],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,-1],[-1,0],[0,-2],[3,1],[0,1],[2,0],[1,0],[3,1],[1,-3],[2,0],[1,-3],[2,2],[-1,0],[-1,2],[-1,0],[0,2],[1,0],[0,3],[-2,-1],[-2,1],[0,1],[-3,-2],[0,2],[1,0],[1,3],[0,4],[-1,0],[4,2],[0,1],[-2,0],[0,1],[4,1],[1,2],[1,0],[11,0],[0,-199],[-95,0]],[[739,501],[0,1],[4,1],[2,4],[1,1],[1,1],[1,3],[-1,0],[-1,-3],[-1,0],[-2,-4],[-4,0],[-2,-3],[-1,0],[0,-1],[-5,0],[0,2],[-1,0],[0,-2],[-3,1],[0,1],[-1,-2],[-6,0],[0,1],[2,1],[-2,6],[0,-1],[-1,-5],[-2,-1],[1,-1],[-20,0],[0,58],[3,1],[1,-2],[0,1],[2,0],[0,1],[2,0],[0,-2],[5,1],[0,3],[3,-1],[2,-3],[3,0],[-4,2],[1,1],[-2,2],[-4,0],[0,-2],[-3,0],[-1,1],[-8,0],[0,336],[210,0],[0,-397],[-169,0]],[[578,898],[1,-1],[2,-3],[-4,2],[0,2],[-1,0],[2,0]],[[574,898],[0,-2],[1,0],[0,-2],[-2,0],[2,-3],[0,1],[1,0],[0,-1],[1,-1],[0,-1],[1,-1],[-1,0],[0,-1],[-1,0],[0,1],[-1,0],[0,-1],[-1,0],[-1,0],[0,1],[-1,-1],[0,1],[-1,0],[-1,0],[-1,0],[-1,0],[-1,1],[-2,0],[-1,-1],[-1,0],[0,-1],[-1,0],[0,1],[-1,0],[0,1],[0,1],[-1,1],[1,0],[1,1],[3,2],[0,1],[0,1],[-1,0],[1,1],[-1,1],[10,0]],[[562,898]],[[555,898],[-1,-1],[-1,0],[-1,0],[0,-1],[-1,-1],[0,-1],[1,0],[0,-1],[-1,0],[-1,0],[0,1],[-1,-1],[-1,0],[0,-1],[1,0],[1,0],[-1,-1],[0,-1],[0,-1],[3,-1],[0,-1],[1,0],[0,-1],[0,-1],[-1,-1],[0,1],[-1,0],[-1,0],[-1,1],[-1,-1],[0,1],[-1,0],[0,-1],[1,0],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[-1,0],[0,1],[-1,1],[0,1],[-1,0],[0,1],[1,1],[0,1],[0,1],[0,1],[0,1],[-2,0],[-1,0],[-1,1],[-1,0],[-1,-1],[0,-1],[-1,-1],[1,-1],[0,-1],[1,-1],[0,-1],[-1,0],[-1,-1],[0,-1],[-1,0],[0,-1],[1,0],[1,0],[0,-1],[-1,0],[0,-1],[-1,0],[-1,0],[0,1],[-1,-1],[-1,1],[0,1],[1,10],[0,1],[0,1],[1,2],[-1,1],[1,0],[0,1],[0,1],[1,1],[0,1],[1,0],[19,0]],[[533,898],[0,-1],[-1,0],[-1,0],[0,-1],[-1,1],[0,-1],[1,-1],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,-1],[0,-1],[-1,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[-1,4],[1,1],[0,1],[1,1],[0,1],[0,3],[-1,1],[0,1],[0,1],[0,1],[-1,0],[-1,-2],[0,-1],[0,-1],[0,-1],[1,0],[-1,-1],[0,-2],[-1,0],[0,-1],[-1,0],[0,1],[-1,1],[0,1],[-1,1],[0,1],[-1,0],[0,-1],[-1,-1],[-1,0],[-1,-1],[0,1],[0,1],[0,1],[-1,0],[-1,0],[0,1],[0,1],[1,0],[-1,1],[-1,-1],[0,1],[0,1],[0,1],[1,1],[-1,0],[20,0]],[[555,856],[-2,-1],[0,-2],[-3,0],[-1,-2],[-2,0],[0,3],[-2,2],[1,0],[9,0]],[[476,898],[1,-12],[-1,-1],[1,-5],[-2,-1],[0,-1],[-4,-1],[1,5],[-2,5],[-3,-1],[1,-3],[-1,-3],[-1,-2],[1,-2],[0,-1],[-1,-1],[-1,0],[-1,-1],[-1,1],[-3,4],[-1,0],[1,-4],[0,-8],[-2,0],[0,-2],[3,-1],[1,0],[0,2],[2,1],[0,-1],[2,0],[1,-3],[4,1],[-1,4],[5,-1],[0,-5],[2,-8],[-1,0],[-3,-1],[-4,2],[-1,-4],[-3,0],[2,-6],[-5,-8],[0,-3],[-2,-4],[-2,-1],[1,2],[-2,2],[-1,0],[0,1],[-1,0],[2,-5],[0,-1],[-2,0],[-1,2],[-1,0],[-2,2],[-5,3],[1,2],[-4,8],[0,2],[1,0],[1,2],[-1,1],[1,0],[1,-3],[1,0],[-1,3],[1,0],[2,3],[-1,0],[0,-1],[-2,0],[0,3],[1,3],[0,1],[-1,0],[1,1],[0,4],[-1,0],[-2,-7],[-1,0],[0,-5],[-1,0],[-1,-4],[-1,-1],[-2,5],[1,2],[0,1],[1,0],[1,8],[1,1],[-1,0],[0,1],[-1,-1],[0,-1],[-1,-1],[0,-2],[-1,-2],[0,-1],[-1,0],[0,1],[1,4],[-1,0],[3,5],[-4,18],[3,13],[-1,1],[38,0]],[[642,897],[1,1],[-1,0],[0,-1],[-34,0],[0,1],[-1,-1],[1,2],[1,0],[1,4],[-2,3],[-2,0],[0,2],[-4,2],[0,1],[-2,0],[0,1],[2,0],[2,3],[1,3],[0,1],[0,2],[4,1],[0,-2],[2,-2],[0,-1],[-1,0],[0,-2],[1,0],[2,-2],[2,0],[-2,10],[-3,4],[4,1],[1,-2],[2,-1],[0,1],[3,1],[0,2],[-4,-1],[0,2],[-1,1],[0,1],[-4,-2],[0,2],[0,4],[-3,-1],[1,-1],[-1,-1],[0,-3],[-1,0],[0,-3],[-5,0],[-3,6],[0,2],[-2,1],[0,2],[1,0],[0,1],[3,2],[0,1],[3,0],[-1,5],[1,0],[0,1],[0,1],[-1,0],[0,-1],[0,-1],[-1,0],[0,-2],[0,-1],[-2,0],[0,-1],[-5,-1],[-1,0],[-2,5],[-1,0],[0,-2],[-1,0],[0,-1],[2,0],[-1,-1],[1,-4],[2,-1],[0,-2],[1,-3],[0,-2],[-1,-1],[-4,1],[-8,-2],[0,-2],[8,1],[4,-1],[3,0],[1,-3],[-2,-2],[0,-1],[1,0],[1,-1],[1,0],[-1,-3],[-3,-2],[-1,0],[0,1],[-2,0],[1,-2],[-2,0],[-1,0],[1,-1],[-2,0],[0,1],[-2,0],[-1,2],[-1,0],[-1,2],[-2,0],[-1,3],[2,0],[0,2],[-4,1],[-9,-2],[1,4],[-2,3],[0,1],[2,0],[0,1],[-5,-1],[-2,2],[-1,0],[0,2],[2,0],[0,2],[-3,1],[1,1],[2,1],[2,5],[2,0],[-1,2],[1,1],[1,1],[2,1],[0,2],[1,0],[1,2],[-2,0],[0,1],[-2,0],[-2,-4],[-2,0],[0,1],[-1,0],[0,-3],[-1,-1],[-5,-1],[0,9],[1,0],[2,4],[-1,3],[4,0],[1,4],[1,1],[3,-2],[-2,3],[3,6],[6,-2],[1,1],[2,6],[4,0],[-1,4],[-3,0],[0,6],[1,2],[4,3],[0,1],[-2,0],[-1,-2],[-3,-1],[-1,-2],[-2,1],[0,-1],[1,-6],[-2,-3],[-1,-3],[-3,0],[0,3],[-1,-1],[-2,-5],[-2,-1],[-1,-2],[-1,0],[0,-1],[-2,0],[0,5],[-1,1],[0,1],[-2,0],[1,3],[-1,0],[0,1],[-1,0],[0,-1],[-2,-3],[1,-2],[2,-1],[0,-2],[-1,0],[1,-3],[0,-3],[-2,-1],[-1,-8],[0,1],[0,44],[1,1],[1,0],[1,0],[0,1],[0,1],[-1,0],[-1,-1],[0,1],[0,1],[0,1],[-1,1],[1,1],[0,1],[-1,0],[0,13],[16,0],[2,-1],[-1,-1],[0,-1],[1,-1],[1,-1],[1,-2],[0,-1],[0,-1],[-2,-1],[-2,2],[-1,0],[0,-1],[1,0],[1,-1],[0,-1],[1,0],[1,0],[-1,-2],[1,0],[2,1],[2,2],[2,-1],[1,-1],[-1,-3],[-1,0],[-1,0],[-1,-1],[0,-1],[1,1],[0,-1],[0,-2],[1,1],[0,1],[1,0],[1,0],[1,-1],[1,0],[-1,3],[3,0],[1,0],[0,-1],[0,1],[2,1],[1,1],[-1,0],[-1,1],[0,-1],[-1,1],[0,2],[-1,2],[-1,1],[0,2],[1,0],[3,1],[1,0],[1,0],[2,0],[0,1],[1,0],[1,0],[1,0],[3,1],[0,-1],[0,-1],[-1,0],[-1,0],[-1,0],[0,-1],[-1,0],[1,-1],[0,-1],[1,0],[0,-1],[1,-2],[1,-2],[1,-4],[1,0],[-1,9],[2,1],[2,-1],[1,-4],[4,-4],[1,-2],[3,-3],[1,-1],[0,-1],[3,-2],[1,0],[7,-9],[-1,0],[0,-1],[1,1],[0,-1],[-1,-2],[-2,0],[-1,-3],[-1,0],[0,-1],[-4,0],[1,2],[1,0],[0,1],[-2,-1],[-2,0],[-1,3],[-4,2],[0,2],[-1,0],[0,-2],[2,-2],[1,-1],[1,-1],[-3,1],[0,-1],[2,0],[1,-1],[0,-2],[-3,-2],[-2,0],[-1,-4],[1,0],[1,2],[3,0],[0,1],[2,1],[0,-1],[2,1],[1,-3],[0,-2],[-2,0],[-1,-1],[0,-1],[4,0],[4,-2],[-2,-3],[-1,-1],[-1,-2],[-1,-1],[0,-1],[0,-1],[0,-1],[-1,0],[0,1],[-1,1],[-1,1],[-1,0],[-1,0],[-1,0],[-1,0],[1,-1],[1,-1],[0,-1],[0,-1],[-1,0],[0,1],[0,-1],[0,1],[0,-1],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[0,1],[2,0],[1,-1],[-1,0],[0,-1],[-1,0],[1,0],[-2,0],[0,-1],[-1,1],[-1,0],[-1,0],[-1,0],[1,0],[0,-1],[1,0],[0,-1],[-1,-1],[1,0],[1,0],[0,-1],[1,1],[0,-1],[-1,0],[0,-1],[1,0],[0,-1],[1,0],[1,0],[0,-1],[1,0],[0,1],[-1,0],[-1,1],[0,1],[0,1],[1,0],[1,0],[1,0],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[1,0],[0,-1],[0,1],[-1,1],[0,1],[0,1],[0,2],[2,-2],[1,0],[1,-2],[1,0],[0,-1],[1,0],[0,-1],[1,0],[0,-1],[1,-1],[1,0],[1,-1],[1,-1],[1,-1],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[1,0],[1,-1],[3,-3],[0,-2],[-1,0],[0,-1],[-3,-1],[2,-2],[1,-1],[1,-2],[1,-2],[0,-3],[1,0],[1,-2],[0,7],[1,0],[-1,2],[-1,0],[1,2],[1,-1],[1,3],[1,1],[0,1],[3,-3],[1,-2],[-2,-8],[1,0],[1,2],[4,0],[0,-1],[9,-3],[1,-3],[0,-1],[1,0],[-1,-1],[4,-5],[-1,-6],[-2,1],[0,-2],[1,0],[2,-2],[1,0],[0,-1],[8,-4],[-33,0]],[[556,940]],[[538,856],[-1,0],[1,0],[0,-1],[1,0],[-1,-1],[1,-1],[1,0],[1,0],[1,0],[0,-1],[0,-1],[1,0],[1,0],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[0,-1],[-1,-1],[0,-1],[-1,0],[-1,-1],[0,1],[-1,0],[0,1],[0,1],[-1,0],[-1,0],[-1,0],[0,1],[0,-1],[0,1],[-1,0],[-1,1],[-1,0],[0,1],[-1,0],[1,0],[0,1],[-1,0],[-1,0],[0,1],[-1,0],[0,1],[0,1],[-1,0],[1,1],[0,1],[0,1],[-1,0],[0,-1],[-2,1],[-1,1],[1,0],[0,1],[12,0]],[[524,856],[0,-1],[0,-1],[0,-1],[1,-1],[1,0],[-1,-2],[0,-1],[-1,0],[0,1],[-1,0],[-1,0],[-1,0],[0,1],[0,2],[1,0],[0,1],[0,1],[0,1],[-1,0],[0,-1],[-1,0],[-1,0],[-1,0],[0,1],[-1,0],[-1,0],[0,-1],[1,-1],[0,-1],[-1,0],[-1,0],[-1,0],[1,0],[0,-1],[1,0],[0,-1],[0,-1],[-1,0],[-2,1],[-1,0],[0,1],[-1,0],[-1,0],[0,-1],[1,0],[0,-1],[1,0],[0,-1],[1,0],[1,-1],[1,0],[1,0],[0,-1],[1,0],[0,1],[1,0],[1,0],[0,-1],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[1,0],[0,1],[0,1],[1,0],[0,1],[1,0],[0,-1],[1,0],[1,0],[1,-1],[0,-1],[-1,0],[0,-1],[1,1],[1,-1],[0,-1],[1,0],[0,-1],[0,-1],[0,-1],[0,-1],[0,1],[1,0],[1,0],[1,0],[1,0],[1,0],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[1,0],[-1,0],[0,-1],[1,0],[0,1],[0,-1],[1,1],[-1,-1],[1,0],[0,-1],[0,-1],[0,-1],[2,-2],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[1,0],[-1,0],[1,-1],[1,1],[1,0],[0,1],[1,0],[1,1],[1,0],[1,0],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,-1],[1,-1],[-1,-1],[1,-2],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,0],[0,1],[-1,0],[0,1],[0,1],[-1,0],[-1,1],[-1,0],[1,0],[0,1],[-1,0],[0,1],[-1,0],[1,1],[-1,0],[-1,0],[-1,1],[-1,0],[0,1],[-1,0],[-1,1],[0,1],[-1,0],[0,-1],[0,1],[-1,0],[0,1],[0,1],[-1,0],[-1,-1],[-1,1],[0,1],[0,1],[1,1],[0,1],[-1,0],[0,1],[-1,1],[-1,1],[-1,1],[1,0],[1,0],[-1,1],[0,1],[-1,1],[-1,-1],[0,-1],[0,1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[-1,0],[0,1],[1,1],[0,1],[0,1],[-1,1],[1,0],[0,1],[-1,1],[-1,-1],[0,-1],[-1,1],[0,1],[-1,0],[0,1],[-1,0],[-1,0],[-1,0],[1,-1],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,-1],[-1,-1],[1,-1],[1,0],[0,1],[-1,0],[0,1],[1,0],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,1],[0,1],[-1,0],[-1,0],[-1,0],[-1,1],[-1,0],[-1,0],[1,0],[-1,0],[0,1],[0,1],[1,0],[0,1],[1,1],[0,1],[0,1],[1,0],[0,1],[0,1],[1,0],[0,1],[0,1],[0,1],[0,1],[-1,0],[1,0],[0,1],[-1,0],[-1,0],[0,1],[-1,0],[-1,0],[-1,1],[0,1],[1,1],[0,1],[1,0],[2,1],[0,1],[1,0],[1,1],[1,1],[0,1],[0,1],[0,1],[20,0]],[[509,898],[1,-1],[0,-1],[-1,0],[0,-1],[1,0],[0,-1],[0,-1],[-1,-1],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[1,0],[1,-1],[-1,0],[-1,-1],[-1,1],[0,-1],[0,-1],[-1,0],[0,-1],[1,-1],[0,-1],[1,0],[0,1],[0,1],[1,0],[0,1],[1,0],[1,0],[2,-1],[1,0],[1,1],[1,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,0],[1,0],[1,-1],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[0,-1],[-1,0],[0,1],[-1,-1],[1,0],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[0,-1],[-1,-1],[-1,0],[0,-2],[-1,0],[-1,0],[0,-1],[2,-1],[0,1],[4,1],[0,2],[1,0],[1,1],[3,1],[0,2],[4,-2],[0,-1],[4,-1],[0,-1],[6,2],[0,1],[2,0],[0,-1],[-2,-1],[0,-1],[-2,-1],[1,-1],[1,1],[2,-1],[0,1],[3,0],[1,-2],[1,0],[1,0],[0,2],[2,0],[0,1],[1,1],[1,1],[1,1],[1,2],[2,-1],[0,1],[1,1],[1,1],[1,-1],[1,-1],[2,-3],[0,-7],[-2,0],[-1,-2],[-2,-1],[0,-1],[-2,0],[0,-2],[-2,-1],[-7,0],[-1,1],[1,0],[-1,1],[-1,1],[0,1],[-1,0],[0,-2],[-1,0],[-2,0],[-1,3],[-1,0],[0,-3],[0,-1],[-1,0],[1,0],[0,-1],[-13,0],[1,0],[0,1],[0,1],[-1,1],[-1,0],[0,-1],[0,-1],[0,-1],[-2,0],[0,1],[-1,0],[0,-1],[-1,0],[-1,0],[-1,0],[0,1],[-1,0],[-1,0],[0,-1],[-12,0],[0,1],[0,1],[0,1],[0,1],[1,0],[0,1],[0,1],[-1,0],[0,1],[0,1],[-1,0],[0,1],[-1,0],[-1,0],[0,1],[0,1],[0,1],[1,0],[-1,1],[1,1],[1,1],[0,1],[0,1],[0,1],[-2,6],[0,2],[-1,5],[-1,2],[-3,1],[-3,1],[-1,-1],[-1,0],[1,1],[0,1],[-1,1],[-1,1],[2,2],[4,3],[13,0]],[[1024,501],[-117,0],[0,523],[117,0],[0,-523]],[[540,502],[-3,-1],[-2,1],[5,0]],[[587,502],[1,1],[0,1],[1,0],[0,1],[1,-1],[0,-1],[-1,0],[-1,-1],[1,-1],[-1,1],[-1,0]],[[489,558],[1,1],[0,-1],[-1,0]],[[679,535],[0,1],[1,0],[0,-1],[-1,0]],[[438,759],[3,-3],[-1,-2],[0,-1],[-1,0],[0,-2],[-1,1],[-1,-4],[1,-3],[2,0],[0,-1],[-1,-3],[-1,0],[-4,11],[-1,2],[-1,0],[2,5],[-1,0],[0,2],[-3,13],[-1,0],[1,5],[-1,1],[1,3],[1,0],[2,10],[1,0],[0,1],[0,2],[-2,6],[-1,0],[-1,1],[1,1],[0,3],[1,0],[1,1],[0,8],[1,0],[1,5],[1,0],[1,3],[0,7],[1,0],[0,2],[0,1],[1,0],[1,0],[-1,-1],[1,0],[1,0],[0,1],[1,-1],[1,1],[1,0],[1,0],[2,-1],[0,-2],[1,1],[1,0],[1,-1],[0,-1],[2,-1],[1,-3],[1,0],[1,-1],[-1,-2],[-4,0],[0,-3],[-1,-2],[-2,-1],[0,2],[-3,1],[1,-6],[4,-1],[-1,-5],[0,-4],[-2,-3],[3,0],[1,-5],[0,-1],[0,-3],[2,0],[1,-2],[0,-1],[1,0],[2,-4],[0,-3],[1,0],[-1,-2],[5,-1],[2,-1],[1,-3],[-3,-8],[2,-6],[-1,0],[0,-1],[0,-3],[-2,0],[0,1],[-5,-1],[-5,1],[-1,1],[1,0],[2,2],[0,1],[-2,1],[0,3],[1,0],[-1,10],[-2,1],[-4,-1],[-1,-1],[0,-9],[1,-1],[-4,-1],[-1,3],[-3,1],[-1,3],[-1,0],[0,-2],[2,-4],[-2,0],[0,-2],[1,0],[-1,-3],[4,1],[0,-2]],[[582,506],[-1,1],[1,0],[0,-1]],[[591,504],[-1,2],[0,1],[2,-3],[-1,0]],[[648,848],[1,1],[0,-1],[-1,0]],[[450,812],[0,1],[1,0],[0,-1],[-1,0]],[[452,811],[0,1],[0,1],[1,0],[0,-2],[-1,0]],[[440,835],[1,3],[1,-2],[-1,0],[0,-1],[-1,0]],[[595,909],[-1,1],[-1,3],[1,-1],[1,-3]],[[598,888],[0,1],[-1,0],[0,1],[1,0],[0,-2]],[[597,898],[-1,2],[1,0],[0,1],[1,0],[1,-3],[-2,0]],[[380,945],[5,4],[1,0],[2,0],[4,-4],[3,-4],[0,-1],[0,-1],[-5,-6],[-1,-1],[-1,0],[-1,-1],[-4,-5],[0,-1],[-1,-2],[0,-1],[-1,-1],[-3,-3],[0,-1],[1,-7],[1,-1],[2,-4],[3,-3],[1,0],[0,-2],[1,0],[2,-6],[-1,-1],[0,-1],[0,-1],[2,0],[0,1],[1,0],[5,-3],[1,0],[3,-2],[2,-2],[2,-1],[0,-2],[-1,0],[-16,-6],[-3,-1],[-2,0],[-2,1],[-2,1],[-2,2],[-2,2],[-1,4],[-1,4],[-7,10],[0,1],[-1,20],[1,2],[14,23],[1,0]],[[392,893],[-1,0],[-1,0],[0,-1],[-1,0],[0,1],[-1,0],[1,0],[0,1],[1,-1],[1,1],[0,1],[1,0],[1,0],[0,1],[1,0],[-1,0],[2,1],[-1,0],[0,1],[1,0],[1,1],[1,0],[1,-1],[4,-1],[1,0],[-1,-1],[0,-1],[0,-1],[0,-2],[1,0],[0,-1],[0,-1],[-1,-1],[1,0],[0,-1],[0,-1],[-1,0],[0,1],[-1,1],[-2,1],[-1,0],[0,1],[-1,0],[0,-1],[-1,0],[1,0],[-1,0],[0,1],[-2,2],[-1,0],[-1,0]],[[626,540],[-1,0],[0,-1],[-1,0],[-1,0],[0,1],[-1,1],[1,0],[1,0],[1,0],[1,1],[0,-1],[1,0],[-1,-1]],[[556,918],[3,0],[4,-2],[2,-1],[0,-2],[2,-1],[4,1],[0,-3],[-1,0],[0,-3],[2,1],[0,2],[3,0],[5,-3],[0,-2],[-1,-3],[-2,1],[-1,-1],[2,-4],[1,-1],[-2,0],[0,1],[-2,0],[0,2],[-1,0],[0,-3],[-9,0],[-1,1],[-1,0],[0,1],[-1,-1],[0,1],[0,1],[-1,0],[1,1],[0,1],[0,1],[1,0],[0,1],[-1,0],[-1,1],[-1,0],[0,-1],[0,-1],[-1,0],[0,1],[-1,0],[-1,1],[-1,0],[0,2],[0,11]],[[687,897],[0,1],[1,0],[5,8],[3,-2],[-1,1],[1,0],[0,1],[2,0],[0,-3],[1,0],[0,3],[0,1],[5,2],[0,-1],[3,-1],[-1,2],[-1,0],[0,2],[-6,-1],[0,-1],[-6,-1],[0,4],[1,3],[1,0],[1,3],[0,1],[2,1],[4,1],[1,-3],[2,0],[0,-1],[2,1],[0,1],[-1,0],[1,1],[0,2],[-2,-1],[2,9],[5,1],[3,-1],[0,-4],[-1,0],[0,-1],[2,0],[0,-2],[1,0],[0,-2],[1,0],[0,3],[2,0],[0,-1],[1,0],[0,3],[-1,0],[0,1],[-1,0],[0,1],[-2,1],[0,2],[-1,0],[4,9],[1,0],[0,-3],[1,0],[5,-1],[0,3],[-3,0],[0,1],[-2,0],[1,5],[1,2],[4,2],[3,6],[2,0],[0,-2],[0,-2],[0,1],[2,-1],[0,-1],[2,0],[0,-1],[2,-2],[1,1],[-1,1],[-1,0],[0,2],[-2,0],[-1,7],[8,0],[1,-2],[1,0],[-1,-3],[-1,0],[0,-1],[2,1],[1,-3],[4,0],[0,-3],[2,1],[-1,3],[-4,0],[1,2],[-1,0],[1,4],[3,0],[2,-1],[0,1],[2,0],[-1,0],[-1,2],[-7,1],[0,2],[3,3],[0,2],[1,2],[1,0],[1,1],[5,2],[0,-2],[1,0],[0,-2],[5,1],[2,-1],[1,-2],[3,-1],[0,2],[-1,0],[0,4],[3,0],[0,1],[2,-1],[2,0],[2,-3],[1,-1],[1,-2],[1,0],[-2,5],[0,1],[7,1],[0,1],[12,4],[2,-2],[-1,2],[-12,-1],[-5,-3],[-2,1],[-3,-1],[-2,1],[1,2],[-3,0],[0,-1],[-1,0],[-1,-1],[-9,-1],[-1,2],[-1,0],[0,3],[2,3],[1,2],[2,0],[1,4],[1,0],[1,2],[1,0],[0,1],[3,-1],[0,1],[1,0],[1,1],[-3,1],[4,3],[0,1],[2,1],[0,1],[4,0],[0,-1],[4,3],[4,0],[0,1],[1,0],[1,2],[4,1],[-1,1],[-1,0],[0,-1],[-1,0],[-4,-1],[0,-1],[-6,-1],[0,-1],[-3,1],[1,4],[-1,-1],[-2,-2],[1,-1],[-1,0],[-1,-2],[-2,0],[0,-1],[-1,0],[0,-1],[-2,1],[-1,4],[-2,-3],[1,1],[0,-2],[1,-4],[-2,0],[0,-2],[-3,-1],[-2,-5],[-2,-1],[-3,1],[0,2],[-1,3],[-3,1],[-2,6],[2,1],[1,3],[1,1],[0,1],[-1,0],[0,5],[1,2],[2,2],[2,-1],[0,1],[4,0],[0,3],[-1,0],[0,-1],[-7,-1],[0,-2],[-1,0],[1,5],[-1,4],[3,0],[0,2],[-3,0],[-1,1],[155,0],[0,-127],[-221,0]],[[746,1024],[-1,-1],[2,-1],[0,-2],[3,-1],[0,-3],[-2,0],[2,-2],[0,-3],[-1,-2],[-1,0],[-1,-2],[1,0],[0,-2],[1,0],[1,-2],[-1,-1],[-3,-2],[-3,1],[-1,0],[0,-1],[1,-1],[0,-1],[4,1],[0,-2],[1,-1],[-1,-3],[2,0],[-1,-5],[-1,0],[2,-4],[-2,-1],[0,-1],[4,1],[3,1],[-1,-3],[0,-4],[-7,-2],[0,-2],[-1,-1],[-2,-4],[-8,2],[0,4],[-1,-1],[1,-2],[-4,-2],[-1,-2],[-1,0],[-1,-4],[-1,-1],[-2,2],[0,1],[-3,0],[0,-6],[0,-2],[-3,-1],[0,-4],[-2,0],[0,-2],[-4,-1],[1,-4],[-1,-3],[-3,1],[0,2],[-1,0],[0,-3],[2,-1],[-1,-1],[-3,-1],[0,-1],[-4,0],[-1,-2],[-9,-2],[-3,1],[-2,1],[0,1],[-2,0],[3,5],[1,0],[1,2],[4,3],[1,4],[-1,0],[0,-2],[-3,-2],[0,-1],[-1,1],[0,3],[0,-1],[-1,0],[0,-2],[-2,-1],[0,-1],[-2,-1],[0,3],[-2,2],[-1,0],[-1,3],[-5,-1],[-1,5],[-1,0],[1,2],[3,1],[0,-1],[1,0],[-1,2],[3,4],[5,1],[1,1],[1,0],[0,1],[1,0],[2,4],[5,1],[0,1],[1,0],[-1,-2],[1,0],[3,1],[1,2],[4,1],[1,1],[1,0],[3,-1],[1,0],[-5,3],[0,-1],[-8,-2],[0,1],[-2,0],[1,3],[-4,1],[0,-2],[1,0],[1,-4],[-6,-1],[-1,1],[-1,0],[0,-1],[1,0],[-1,-3],[-3,-2],[-1,0],[0,1],[-1,0],[0,-2],[-1,2],[-2,1],[0,-2],[-2,0],[0,-1],[1,0],[0,-3],[-3,-1],[0,-1],[-3,-1],[-2,-4],[-1,0],[0,2],[-1,0],[-1,1],[-1,0],[2,-5],[2,0],[2,-4],[-1,-1],[-1,2],[-1,0],[1,2],[-1,0],[-6,0],[-2,-1],[0,6],[-2,0],[1,8],[3,0],[0,1],[-2,0],[1,2],[-2,0],[-1,-2],[-1,-1],[-1,1],[-1,-1],[-3,1],[0,5],[-1,1],[1,0],[0,3],[1,1],[1,6],[1,0],[0,1],[1,0],[0,1],[3,-1],[-1,2],[1,0],[0,2],[3,3],[1,0],[1,-2],[1,0],[0,-1],[3,-1],[0,1],[-1,1],[-1,0],[0,1],[-1,0],[-1,5],[1,3],[1,1],[2,-1],[5,1],[0,2],[2,0],[0,1],[4,1],[0,1],[1,0],[0,-1],[3,-1],[1,3],[6,0],[-1,2],[-5,0],[-2,1],[-1,1],[1,1],[3,2],[0,1],[4,0],[0,1],[-4,2],[0,1],[3,2],[0,1],[1,-1],[1,1],[1,0],[1,1],[-2,1],[1,1],[53,0]],[[689,1024],[1,-1],[-2,-3],[-3,0],[0,-4],[-1,-1],[-1,1],[-1,3],[-1,0],[0,-5],[1,0],[0,-3],[-3,-1],[0,1],[-1,0],[1,-3],[-5,-1],[0,-1],[-1,0],[-2,-1],[-2,3],[-2,1],[-1,-3],[1,-1],[-6,0],[0,-2],[3,-2],[-3,-1],[0,-1],[-3,1],[0,-3],[-3,0],[0,-3],[-1,0],[0,-1],[-3,0],[-1,2],[-1,0],[-1,1],[-1,0],[0,-4],[4,-3],[0,-3],[-1,0],[0,-2],[1,0],[0,-1],[-2,-1],[0,-1],[-2,-1],[0,-1],[-1,0],[-1,2],[-3,5],[4,11],[-1,4],[3,0],[0,2],[1,1],[-2,0],[0,-2],[-1,0],[-1,4],[-1,0],[2,3],[0,2],[2,5],[2,1],[0,2],[1,0],[1,5],[5,0],[0,-1],[2,1],[30,0]],[[122,930],[0,1],[0,-1]],[[122,932],[-1,0],[0,-1],[-1,1],[0,1],[-1,-1],[-1,-1],[0,-1],[1,0],[-1,-1],[0,1],[-1,0],[-1,1],[1,1],[0,1],[-1,0],[0,1],[0,1],[1,0],[0,1],[0,1],[1,0],[1,1],[1,1],[-1,1],[1,0],[1,1],[0,1],[-1,0],[0,1],[0,1],[1,0],[0,1],[0,1],[-1,0],[0,1],[0,1],[-1,0],[0,1],[1,1],[1,0],[1,1],[0,-19]],[[171,1024],[0,-12],[-50,0],[0,12],[50,0]],[[207,1024],[1,0],[0,-1],[1,0],[0,-1],[1,0],[0,-1],[-1,0],[1,0],[-1,0],[0,-1],[0,-1],[-1,0],[0,1],[-1,1],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[0,-1],[1,-1],[1,0],[1,0],[0,-1],[0,-1],[-1,0],[1,0],[-38,0],[0,12],[37,0]],[[557,979],[-1,-1],[1,-2],[0,-12],[-1,-6],[-4,1],[0,1],[-2,0],[0,2],[-1,0],[0,-2],[2,-3],[0,-1],[3,0],[-1,-9],[-1,0],[0,-1],[-1,0],[1,-1],[3,-3],[1,-2],[-1,-2],[-2,0],[2,-3],[-1,-3],[-2,1],[0,1],[-1,0],[2,-5],[1,0],[0,-1],[3,-2],[0,-4],[0,1],[-2,0],[1,-1],[-2,0],[0,1],[-2,0],[1,-4],[2,0],[2,-1],[0,-13],[-1,0],[0,2],[-1,1],[-1,1],[-1,0],[-1,0],[0,1],[-1,1],[-1,0],[-1,0],[0,-1],[0,1],[0,1],[-1,-1],[0,-1],[0,-1],[0,-1],[-1,0],[0,1],[-1,0],[0,1],[-1,0],[0,1],[-2,0],[0,1],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1],[0,-1],[0,-1],[1,0],[1,-1],[1,-1],[0,-1],[0,-1],[0,-1],[1,1],[1,0],[1,0],[1,0],[1,0],[1,-1],[2,-1],[0,-1],[0,-1],[-1,0],[0,-1],[1,0],[1,0],[1,-1],[-1,-1],[-1,0],[-18,0],[0,1],[1,0],[0,1],[1,0],[-1,1],[-1,1],[0,1],[0,1],[0,1],[0,2],[-1,0],[-1,-1],[0,-1],[0,-1],[0,-1],[0,-3],[0,-1],[0,-1],[-1,0],[-2,0],[-17,0],[1,1],[-1,0],[-1,1],[0,1],[0,1],[0,1],[-1,0],[0,1],[0,1],[0,1],[-1,0],[0,-1],[-1,-1],[0,-1],[1,0],[-1,-1],[0,-1],[0,-1],[0,-1],[1,-1],[-16,0],[2,1],[1,2],[-1,0],[1,1],[0,1],[1,1],[0,1],[-1,0],[1,1],[0,1],[0,1],[1,2],[1,1],[0,1],[1,0],[1,1],[0,1],[1,3],[0,1],[0,1],[0,1],[0,1],[0,1],[1,0],[1,0],[0,-1],[1,0],[0,-1],[-1,-1],[0,-2],[0,-1],[0,-1],[1,0],[1,0],[0,1],[0,1],[0,1],[0,1],[1,0],[1,0],[1,1],[1,0],[0,1],[0,1],[1,0],[0,1],[0,1],[1,0],[1,1],[1,2],[1,0],[1,0],[0,-1],[1,0],[0,-1],[1,0],[1,0],[0,-1],[-1,-1],[-1,0],[0,-1],[1,0],[1,0],[1,0],[0,1],[1,1],[0,1],[0,1],[-1,0],[0,1],[-1,0],[1,1],[0,1],[1,0],[0,1],[1,0],[0,1],[1,-1],[1,0],[0,-1],[1,0],[1,0],[1,-1],[1,0],[1,0],[-1,-1],[0,-1],[1,0],[0,1],[1,0],[1,-1],[0,1],[0,1],[0,1],[0,2],[0,1],[1,0],[1,-1],[0,1],[0,2],[1,1],[1,0],[0,-1],[1,0],[0,-1],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[0,1],[1,1],[0,1],[0,2],[-1,0],[-1,1],[0,1],[0,1],[-1,1],[0,1],[0,1],[0,1],[1,0],[0,1],[0,1],[1,0],[0,1],[1,1],[0,1],[1,0],[1,1],[0,1],[0,1],[0,1],[1,0],[1,0],[0,1],[0,1],[-1,1],[0,1],[0,1],[-1,1],[1,1],[0,2],[-1,1],[1,1],[0,1],[0,1],[0,1],[-1,1],[0,1],[1,2],[0,1],[0,1],[1,0],[-1,1],[1,1],[1,0],[0,1],[1,1],[1,0],[1,1],[0,1],[-1,0],[0,1],[-1,1],[0,1],[0,1],[1,1],[0,1],[-1,0],[1,1],[1,0],[0,1],[0,1],[1,0],[0,1],[0,1],[-1,0],[0,1],[1,0],[0,1],[0,1],[-1,0],[0,1],[1,0],[0,1],[0,1],[-1,0],[0,1],[-1,0],[-1,0],[0,1],[1,1],[0,1],[1,0],[1,1],[0,1],[0,1],[1,0],[1,0],[1,0],[0,-1],[1,0],[0,1],[1,0],[0,1],[1,0],[0,1],[1,1],[1,1],[0,-25]],[[557,1005],[0,1],[0,1],[0,1],[-1,1],[1,1],[0,1],[-1,0],[0,1],[-1,0],[0,1],[0,1],[0,1],[-1,0],[0,1],[-1,0],[0,1],[0,1],[-1,0],[0,-1],[0,-1],[1,0],[0,-1],[0,-1],[0,-1],[-1,0],[-1,-1],[-1,0],[-1,-1],[-1,0],[0,-1],[1,1],[1,0],[1,0],[1,0],[1,0],[1,0],[0,-1],[1,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[-1,0],[-1,-1],[-1,0],[0,1],[-1,0],[-1,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[-1,1],[-1,1],[-1,0],[-1,0],[-1,0],[1,0],[1,-1],[1,-1],[0,-1],[1,-1],[1,0],[0,-1],[-1,-1],[-1,0],[-1,0],[0,-1],[1,0],[1,0],[1,-1],[2,-6],[-3,0],[0,-6],[-2,1],[-1,0],[0,1],[-2,0],[4,-5],[0,-1],[-3,-1],[0,-1],[-1,-3],[-1,0],[-1,4],[-2,4],[-2,0],[-2,4],[-2,1],[0,1],[-2,0],[1,1],[-1,2],[-2,0],[0,-1],[-2,0],[0,1],[1,0],[-1,2],[-1,0],[-1,-4],[-2,0],[-2,5],[-1,0],[0,2],[-1,4],[1,2],[1,0],[0,1],[-3,0],[-1,9],[-2,0],[0,-1],[2,0],[-1,-8],[2,-2],[-1,0],[0,-4],[-1,0],[1,-1],[0,-4],[2,0],[1,-2],[0,-3],[-2,0],[1,-2],[4,2],[1,-3],[4,2],[2,-4],[1,0],[-1,-3],[5,-2],[0,-1],[1,0],[1,-6],[2,-4],[0,-3],[3,-3],[-2,-4],[-1,0],[0,1],[-4,-2],[2,-1],[-1,-2],[-1,0],[1,-4],[-1,-5],[-1,-1],[-3,-1],[-1,-3],[-3,0],[-5,-1],[0,1],[1,0],[1,2],[1,0],[0,2],[-3,-2],[0,1],[-1,5],[1,2],[3,2],[2,0],[2,5],[-1,0],[-1,-2],[-3,1],[0,1],[2,0],[-1,3],[2,0],[-1,5],[-3,-7],[-1,-1],[0,-1],[-1,0],[0,5],[-1,1],[-1,7],[-1,0],[-1,-4],[1,-7],[-2,0],[-1,1],[0,-2],[2,-1],[1,-6],[-3,-1],[0,1],[-1,0],[-4,7],[-2,0],[0,2],[-2,1],[1,2],[0,8],[-3,-1],[0,-1],[-1,3],[-1,0],[0,3],[-1,0],[2,-8],[-4,1],[-1,2],[-1,0],[-1,-4],[-2,1],[0,-1],[1,-1],[3,1],[0,-1],[3,0],[1,-5],[1,-5],[2,-3],[3,-1],[0,-2],[5,-4],[1,-1],[0,-1],[1,0],[-1,-2],[-2,0],[-2,3],[-1,0],[0,1],[-1,0],[-1,2],[-1,0],[0,-3],[-2,-1],[0,1],[-2,0],[-1,3],[-1,0],[0,1],[-1,0],[0,-1],[0,-1],[-1,0],[-2,6],[1,-8],[1,0],[3,-7],[4,2],[2,-1],[0,-4],[-2,-2],[-1,0],[-3,-2],[-1,3],[-4,1],[0,1],[-2,0],[0,1],[-3,0],[0,5],[-2,0],[-2,3],[1,2],[-2,1],[-1,3],[-3,-1],[0,-1],[1,0],[2,-4],[-1,0],[2,-5],[-1,0],[0,-1],[2,-3],[0,-4],[1,-1],[0,-5],[-2,-1],[1,-2],[-3,1],[-1,-1],[-1,0],[-3,0],[0,2],[1,0],[-1,5],[2,0],[-1,2],[-2,0],[-1,3],[-1,0],[-1,-5],[-2,0],[2,-2],[1,-2],[-1,-1],[-1,-5],[2,-2],[-1,-3],[4,1],[0,-4],[-1,0],[0,-2],[-1,0],[0,-2],[-2,-1],[0,-1],[3,1],[3,-1],[0,-2],[-37,0],[-1,1],[2,1],[-1,1],[2,1],[0,1],[1,0],[-1,6],[1,-1],[1,2],[1,-1],[-1,-1],[3,0],[1,1],[-1,1],[-2,1],[2,1],[0,-1],[3,1],[0,-2],[2,-6],[2,-3],[4,1],[-4,1],[-1,9],[4,1],[0,1],[1,0],[1,1],[0,4],[-4,0],[1,1],[3,0],[1,2],[-4,1],[0,1],[-2,1],[2,1],[-2,0],[-2,1],[-1,5],[-3,2],[2,2],[2,1],[1,2],[1,0],[-1,-1],[2,-2],[1,0],[1,-2],[6,1],[2,-1],[1,4],[-2,6],[0,4],[2,1],[0,2],[1,0],[0,1],[1,0],[3,-1],[0,1],[-2,1],[-1,1],[2,6],[1,1],[1,1],[1,1],[0,2],[1,0],[2,2],[1,0],[1,3],[1,0],[1,2],[1,0],[2,5],[3,35],[1,-1],[1,1],[1,1],[1,4],[1,0],[1,0],[2,8],[64,0],[0,-19]],[[556,927],[3,-2],[-1,-4],[-1,0],[0,2],[-1,0],[0,4]],[[390,924],[0,1],[1,0],[0,1],[0,1],[0,-1],[1,0],[-1,-1],[0,-1],[-1,0]],[[682,926],[-4,7],[-4,2],[0,1],[-1,0],[0,1],[-2,0],[2,8],[4,0],[1,-1],[1,-2],[1,-2],[0,-1],[-1,0],[1,-6],[3,-2],[0,-1],[1,-3],[-2,-1]],[[392,917],[-2,1],[0,1],[0,1],[0,1],[1,0],[0,1],[1,0],[0,-1],[0,-1],[0,-1],[1,0],[0,-1],[0,-1],[-1,0]],[[914,62],[-5,2],[-2,5],[7,2],[0,-9]],[[730,502],[0,-1],[-3,1],[3,0]],[[727,502],[-1,-1],[-2,0],[0,-1],[-2,-1],[-3,1],[1,2],[1,0],[6,0]],[[914,141],[-1,-3],[0,-7],[-6,-19],[-16,-11],[-20,-10],[-10,-17],[-4,-7],[-12,-6],[0,-3],[15,0],[15,-13],[13,-16],[5,-13],[-7,-11],[-9,-5],[-61,0],[0,1],[-5,0],[0,-1],[-1,0],[-1,0],[-3,0],[2,1],[1,4],[1,0],[0,1],[-1,0],[-1,2],[2,0],[1,2],[3,-2],[1,3],[4,-1],[0,1],[-5,2],[1,2],[-3,0],[-10,-2],[-2,2],[-5,-4],[-6,5],[3,9],[-5,11],[-5,-2],[-2,-3],[-8,-5],[-7,10],[12,5],[2,4],[-2,8],[-3,0],[-1,-6],[-3,0],[-4,8],[1,5],[-5,0],[-2,-9],[-5,-3],[-1,3],[-1,1],[-2,2],[-2,1],[-3,0],[-3,-1],[2,-8],[-2,-9],[-2,-5],[1,-6],[12,-11],[-2,-2],[-9,5],[-11,-2],[-5,-7],[-1,-2],[-5,4],[-2,-2],[0,-4],[-1,-5],[-2,0],[1,12],[-2,6],[1,4],[14,15],[0,14],[2,0],[1,-2],[3,0],[0,1],[5,4],[-2,3],[-1,4],[3,2],[1,4],[-4,2],[-11,5],[0,2],[-4,1],[0,-3],[-2,-4],[-8,3],[-8,5],[-11,2],[-8,11],[-4,2],[-1,4],[2,2],[3,-3],[3,-5],[5,2],[8,-1],[-1,7],[-5,15],[-6,-4],[-7,9],[2,8],[-6,15],[-12,17],[-19,9],[-11,14],[-7,-6],[-3,-2],[-3,0],[-4,-2],[-2,0],[-2,-1],[1,3],[-2,7],[1,2],[-1,2],[2,-1],[3,2],[0,1],[1,0],[0,3],[-1,1],[1,0],[-1,3],[1,0],[1,3],[1,0],[-1,1],[1,0],[0,2],[-1,1],[292,0],[0,-60]],[[603,201],[-7,-5],[2,-20],[-4,-4],[7,-18],[1,-7],[-13,-9],[-12,13],[-7,27],[-4,-1],[0,-2],[-8,2],[-4,5],[-11,9],[-2,-3],[-4,3],[-4,9],[0,1],[70,0]],[[623,199],[0,1],[-1,1],[-1,5],[-1,0],[0,1],[2,1],[-1,1],[1,0],[0,4],[-3,6],[2,-1],[0,2],[-2,0],[0,-2],[-1,0],[-1,2],[-2,1],[0,1],[-3,1],[-2,3],[-1,0],[0,1],[-9,0],[-5,-7],[9,-19],[-3,-2],[-67,0],[-1,1],[-4,4],[0,9],[-1,3],[-2,4],[-1,0],[-1,2],[-2,0],[1,0],[-1,1],[1,0],[0,2],[1,0],[0,3],[2,3],[-1,1],[0,3],[1,0],[1,12],[-1,4],[-2,2],[1,3],[-2,2],[-1,9],[-3,2],[0,-1],[-1,1],[1,0],[-15,9],[4,6],[-3,1],[0,2],[-1,0],[-1,3],[0,4],[-1,2],[-1,3],[-2,0],[-1,3],[-2,2],[-1,7],[-2,5],[-1,0],[-2,5],[-1,0],[-1,3],[-1,1],[-3,5],[-1,0],[-2,0],[1,1],[-2,1],[0,-2],[-1,0],[0,6],[-2,6],[-4,2],[0,1],[-1,0],[0,2],[-2,-1],[-1,2],[-1,0],[-1,1],[-1,1],[0,2],[-1,0],[-2,4],[-4,9],[-2,1],[-4,7],[-1,0],[-2,4],[1,0],[0,7],[-3,5],[1,5],[1,1],[-1,4],[2,-1],[0,-1],[3,0],[1,-5],[3,-1],[0,-3],[2,0],[0,6],[-1,1],[1,3],[-1,0],[1,1],[0,1],[-1,0],[0,2],[-2,0],[1,2],[1,0],[1,0],[0,-1],[1,0],[0,1],[2,0],[0,2],[-1,0],[1,1],[-1,0],[0,3],[1,-1],[-1,2],[-5,3],[0,1],[1,0],[-1,2],[-2,0],[0,4],[9,0],[0,-2],[2,0],[0,-1],[6,0],[1,-3],[1,0],[2,-3],[2,0],[0,-2],[1,0],[0,-1],[2,-1],[1,2],[1,0],[0,3],[-2,1],[0,3],[6,1],[0,-1],[1,0],[1,2],[2,0],[-1,2],[1,1],[0,-1],[3,1],[2,3],[4,0],[8,1],[1,2],[3,1],[1,-1],[0,1],[3,0],[1,0],[-1,-2],[0,1],[-1,0],[0,-2],[-1,0],[-2,-5],[-1,0],[2,-4],[0,-4],[1,-1],[0,5],[2,1],[6,-1],[0,-2],[1,0],[0,-1],[-2,1],[1,-3],[-1,1],[-1,-1],[0,-6],[-3,-1],[-3,-15],[-1,0],[1,3],[-1,0],[-1,-4],[-1,0],[0,-1],[-1,0],[0,-2],[0,-1],[-1,2],[1,2],[-1,0],[1,2],[-1,5],[-1,-6],[-1,1],[0,-8],[-1,-1],[0,-3],[2,0],[0,-1],[-1,0],[1,-3],[-1,0],[0,-1],[-3,0],[0,-3],[-1,0],[0,-1],[-3,2],[0,2],[-2,4],[-1,0],[1,1],[-2,0],[0,1],[-1,0],[0,1],[-1,0],[0,1],[-2,1],[0,1],[-1,0],[0,1],[-1,1],[-1,7],[-1,0],[0,-7],[1,0],[0,-2],[2,-1],[2,-5],[2,0],[1,-3],[1,0],[0,-4],[2,-1],[-1,-2],[2,0],[1,-1],[4,1],[0,-1],[1,0],[0,-1],[0,-4],[1,0],[0,-4],[0,-2],[6,-7],[7,3],[-2,1],[-2,1],[-2,4],[1,1],[-2,8],[0,-1],[-1,1],[1,0],[1,3],[-1,2],[1,0],[1,2],[1,0],[-1,0],[0,3],[2,0],[-1,2],[1,0],[2,7],[-1,-1],[1,2],[2,5],[0,2],[3,0],[0,1],[1,0],[0,4],[3,1],[-1,2],[1,0],[1,1],[-1,0],[0,1],[1,1],[1,-1],[0,3],[4,2],[0,4],[9,4],[0,1],[1,1],[0,-2],[3,1],[3,-8],[2,-1],[-1,-2],[1,-5],[1,0],[0,3],[1,0],[-1,2],[2,1],[2,-2],[1,2],[2,0],[0,1],[1,0],[1,1],[-1,-1],[-3,1],[1,4],[-3,0],[0,3],[1,0],[0,3],[-1,0],[-1,7],[-4,-1],[-1,1],[1,3],[1,3],[1,0],[0,2],[2,0],[2,5],[0,2],[4,8],[1,0],[1,3],[1,0],[3,6],[1,1],[4,6],[2,0],[0,1],[5,1],[1,-4],[-1,-1],[-4,0],[0,-1],[2,-1],[0,-2],[1,0],[2,0],[1,0],[-2,-1],[0,-2],[-2,0],[0,-1],[1,0],[0,-1],[3,-2],[0,-1],[-1,0],[1,-2],[-1,0],[0,-3],[2,-1],[0,-1],[-1,0],[0,-1],[4,-1],[0,-2],[1,0],[0,-5],[2,-2],[0,10],[-1,4],[0,3],[-1,0],[1,3],[-1,3],[1,7],[2,1],[2,2],[1,4],[2,2],[0,-1],[4,0],[2,1],[0,-2],[2,-1],[0,-2],[0,-5],[-1,-2],[-1,0],[0,-2],[0,-2],[2,0],[1,1],[0,-1],[2,0],[2,-4],[-1,-1],[1,-9],[-1,0],[3,-5],[1,3],[-1,0],[-1,1],[3,0],[0,3],[0,2],[4,1],[6,1],[4,-2],[1,2],[0,1],[-2,0],[1,3],[0,2],[-1,0],[0,4],[-1,2],[-3,0],[1,2],[2,9],[-2,4],[-1,0],[0,1],[-4,1],[-1,5],[-2,-1],[-3,11],[-1,-1],[0,6],[0,-1],[6,-1],[2,1],[-1,-5],[2,-2],[1,-6],[3,-3],[2,-1],[0,-1],[1,-1],[4,0],[6,2],[0,-2],[-2,-1],[0,-3],[-1,0],[-1,-3],[-1,0],[0,-1],[2,-1],[0,1],[3,2],[2,0],[0,-1],[0,-3],[0,-1],[3,1],[-1,2],[4,0],[-1,-3],[2,-1],[0,2],[5,3],[0,-1],[-1,0],[0,-3],[2,-1],[-2,-1],[-1,-3],[2,1],[-2,-8],[1,0],[2,4],[2,1],[0,1],[2,1],[1,-1],[0,3],[-2,1],[0,2],[-1,2],[3,1],[1,0],[4,3],[1,-2],[3,0],[2,3],[3,0],[1,1],[1,-2],[-1,-1],[0,-3],[0,-1],[-2,0],[1,-2],[-2,-1],[2,0],[1,0],[0,-3],[2,1],[0,1],[2,-1],[1,-3],[-3,0],[0,-1],[2,0],[0,-1],[-3,-1],[1,0],[0,-1],[-1,0],[0,-2],[2,1],[0,-2],[-1,0],[0,-5],[-2,0],[1,-2],[3,-1],[0,-1],[-2,-1],[0,-1],[-3,0],[-3,-7],[-1,0],[2,0],[0,1],[3,1],[0,1],[5,2],[2,-2],[0,-2],[2,0],[0,-2],[-3,0],[0,-1],[2,0],[0,-1],[1,0],[0,2],[2,0],[0,-2],[1,0],[1,1],[2,1],[0,-1],[2,0],[0,-2],[-1,0],[0,-1],[4,0],[-1,2],[7,-1],[0,-1],[3,-2],[0,-1],[3,-2],[-3,-4],[2,1],[1,2],[3,-1],[0,1],[1,0],[-1,4],[-1,0],[0,-1],[-1,0],[0,2],[-3,0],[0,1],[-2,1],[1,2],[-1,1],[-2,0],[0,1],[-3,0],[0,2],[-1,0],[0,-2],[-1,0],[0,1],[-1,-1],[-2,1],[-1,1],[-2,1],[-3,0],[-1,3],[-2,0],[0,5],[-2,1],[0,3],[3,-1],[0,2],[2,0],[0,1],[-2,1],[-3,1],[0,1],[1,1],[2,3],[3,-1],[2,2],[-2,0],[2,2],[4,2],[-1,3],[-4,-2],[-2,2],[-2,0],[0,-1],[-2,0],[-1,3],[-2,0],[0,3],[1,0],[3,4],[0,4],[1,-1],[4,0],[0,-1],[8,2],[0,-2],[1,1],[1,1],[1,0],[0,1],[1,0],[0,2],[2,0],[2,2],[1,-1],[1,-1],[0,-1],[-1,-1],[0,-2],[0,-1],[0,-1],[0,-1],[2,-1],[0,-1],[-1,0],[0,-1],[1,0],[-1,-4],[2,1],[1,-4],[1,0],[0,-1],[1,0],[0,2],[-2,1],[0,7],[-2,4],[4,-1],[0,1],[3,1],[0,-1],[2,0],[0,1],[2,-1],[2,-1],[1,1],[1,1],[1,2],[1,0],[0,2],[0,-3],[1,-1],[-1,0],[0,-1],[1,-3],[0,-3],[-1,0],[1,-2],[0,-1],[1,-1],[-1,-1],[1,0],[1,0],[-1,-2],[1,0],[0,-1],[0,-1],[2,0],[-1,-2],[1,-1],[0,-1],[1,-2],[0,1],[0,2],[0,1],[0,1],[1,0],[-1,1],[0,1],[-1,1],[-1,1],[0,1],[1,0],[-1,3],[-1,0],[0,1],[1,2],[0,1],[2,2],[2,1],[1,1],[1,-1],[1,-1],[-1,-1],[4,1],[1,1],[1,-2],[1,0],[1,1],[2,-1],[1,0],[1,1],[1,-3],[1,0],[0,-1],[-1,-2],[1,0],[0,1],[1,0],[0,1],[1,1],[2,1],[1,-1],[2,1],[1,0],[1,1],[1,1],[-1,0],[-1,0],[-1,-1],[-1,0],[-2,0],[-1,0],[-1,0],[-1,-1],[-2,2],[1,1],[0,1],[-2,0],[-1,-1],[-1,0],[-1,1],[-1,0],[-1,-1],[-1,3],[-1,0],[-1,1],[-1,-2],[-1,0],[-1,0],[-1,1],[-1,1],[-1,0],[-1,-1],[-1,-1],[0,-1],[-2,-1],[1,7],[-1,1],[-1,0],[1,4],[-1,1],[0,3],[-1,0],[0,3],[1,0],[1,2],[3,0],[0,1],[2,0],[-1,-1],[2,0],[6,0],[0,1],[2,-1],[0,2],[1,2],[1,0],[174,0],[0,-303],[-291,0]],[[738,502],[-1,0],[-1,0],[0,-1],[-5,0],[0,1],[7,0]],[[718,502],[-1,0],[1,-4],[2,0],[-1,-4],[-1,1],[2,-4],[0,-2],[-3,0],[0,-3],[-2,0],[0,-1],[-2,0],[-2,2],[-1,1],[-1,2],[0,1],[0,1],[0,1],[0,2],[-1,-2],[-1,-2],[1,0],[-1,-1],[0,-2],[1,0],[0,-1],[-3,1],[-2,-2],[0,2],[-3,0],[1,3],[-2,0],[0,2],[-1,0],[1,-6],[-5,0],[-1,-2],[-4,1],[1,2],[0,1],[0,5],[-2,-1],[1,-2],[-3,0],[0,-1],[0,-1],[1,0],[-1,-6],[-2,0],[0,1],[-4,0],[0,1],[-1,0],[0,1],[1,1],[-2,1],[1,2],[-1,1],[-3,0],[1,-1],[0,-7],[-1,1],[1,2],[-3,0],[-1,0],[-1,0],[0,1],[-1,0],[1,-1],[-1,1],[-2,0],[1,-2],[1,0],[0,-1],[1,0],[0,-1],[2,1],[1,-5],[-6,1],[0,-1],[-2,0],[0,1],[-3,0],[0,-1],[-2,0],[-2,3],[-2,-2],[-3,0],[0,-1],[-2,1],[-3,-1],[0,-1],[-2,2],[-3,0],[0,6],[1,4],[0,1],[1,0],[-1,1],[1,3],[-2,0],[-2,-5],[-1,-1],[-2,0],[0,1],[-1,0],[0,-1],[-1,0],[-1,0],[0,-1],[-2,1],[0,1],[-1,0],[1,1],[0,1],[-2,0],[1,5],[3,0],[0,2],[1,0],[0,1],[-2,0],[0,1],[0,1],[83,0]],[[566,502],[1,0],[3,-4],[1,0],[0,-2],[-2,0],[0,1],[-1,0],[0,-1],[-2,1],[0,1],[-4,2],[-1,2],[5,0]],[[544,502],[-2,-1],[0,1],[2,0]],[[327,265],[1,-1],[1,-2],[1,-1],[0,-3],[1,-2],[0,-2],[1,-1],[0,-1],[3,-3],[2,-3],[1,-2],[1,-1],[2,-3],[6,-14],[9,-7],[0,-1],[21,-6],[0,-1],[0,-1],[0,-1],[0,-1],[-2,0],[-1,-1],[-1,-1],[-2,-2],[-1,-1],[-1,-2],[-2,-1],[-1,-2],[-1,-2],[0,-1],[-1,-2],[0,-2],[-1,-1],[0,-1],[0,-1],[0,-1],[1,-1],[0,-1],[0,-1],[0,-1],[1,-1],[0,-1],[0,-1],[1,-1],[-1,0],[1,-1],[1,0],[-1,-1],[0,-1],[1,-1],[0,-2],[0,-1],[1,-1],[1,-1],[0,-1],[1,-1],[-1,-2],[0,-1],[0,-1],[-1,-1],[-1,-1],[0,-1],[-1,-1],[-1,-2],[0,-1],[-1,-2],[-1,-1],[-1,-1],[-1,-2],[-2,-2],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[-1,0],[-1,-1],[-1,-2],[-2,-1],[0,-1],[-1,-1],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[-1,0],[-1,-2],[-1,-1],[0,-1],[-1,-1],[-1,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[-1,-1],[0,165]],[[327,59],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[0,1],[1,1],[1,0],[0,1],[0,-1],[1,0],[1,0],[0,1],[1,0],[1,0],[1,0],[1,0],[0,1],[1,0],[0,1],[0,1],[1,0],[0,1],[0,1],[0,1],[1,0],[1,0],[1,0],[1,-1],[1,0],[1,0],[0,-1],[0,1],[1,0],[0,-1],[1,0],[2,-1],[1,0],[1,-1],[1,0],[1,-1],[1,0],[1,-1],[2,0],[1,-1],[1,-1],[1,0],[1,0],[1,-1],[1,0],[1,0],[0,-1],[1,0],[1,0],[0,-1],[1,0],[1,-1],[1,0],[1,-1],[0,-1],[1,-1],[1,0],[1,-1],[1,0],[1,-1],[1,0],[1,-1],[1,0],[1,0],[0,-1],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[1,0],[0,-1],[-1,0],[0,-1],[-1,-1],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-2,-1],[-1,0],[0,-1],[0,-1],[-1,0],[-1,-1],[0,-1],[-1,0],[-1,-1],[0,-1],[-1,0],[-1,-1],[0,-1],[-1,-1],[-1,0],[0,-1],[-2,-1],[-1,-2],[-1,-1],[-1,0],[-1,-1],[0,-1],[-1,-1],[-2,-2],[-1,-1],[0,-1],[-1,-1],[0,-1],[-3,-4],[0,-1],[0,-1],[-1,-1],[0,-1],[-2,-4],[0,-1],[-28,0],[0,59]],[[804,380],[0,1],[2,0],[0,-1],[-2,0]],[[660,32],[0,1],[1,-1],[2,0],[-2,-2],[0,-1],[2,0],[0,-1],[-1,-1],[2,-6],[1,0],[1,-1],[0,-1],[0,-1],[1,-1],[-1,0],[0,-1],[3,-1],[-1,-1],[1,-6],[1,-1],[0,-5],[1,-1],[0,1],[1,0],[0,-2],[-2,0],[-1,3],[-1,7],[-1,-1],[-2,-1],[0,4],[-2,2],[0,3],[-1,5],[-1,0],[0,1],[-1,0],[1,-1],[-1,0],[0,-1],[1,0],[1,-3],[-1,-2],[1,1],[0,-2],[-2,0],[-1,5],[1,0],[-1,4],[1,1],[-2,4],[1,-4],[-1,-1],[0,1],[-1,0],[1,-3],[-1,0],[-3,6],[1,-3],[-1,4],[-1,0],[0,2],[1,0],[0,1],[-1,0],[0,1],[-1,6],[4,1],[1,-2],[-1,0],[0,-1],[1,0],[0,-1],[1,1],[1,-3],[-1,-1],[1,0],[1,0],[-1,0],[0,-1],[1,0]],[[657,0],[1,3],[0,1],[0,1],[1,0],[1,-5],[-3,0]],[[660,7],[0,1],[-2,0],[-1,13],[2,1],[0,-1],[-2,0],[0,-2],[1,0],[1,-1],[-1,-2],[1,0],[0,-5],[1,-4]],[[656,9],[0,1],[1,0],[-1,0],[0,-1]],[[615,65],[3,-5],[-1,1],[-5,2],[-2,0],[-1,1],[-1,0],[-1,1],[-1,1],[-3,3],[1,2],[-1,1],[0,2],[-1,1],[-1,0],[0,1],[-1,0],[-1,1],[1,3],[-1,3],[-1,4],[0,3],[-1,2],[-4,2],[2,2],[2,6],[0,1],[1,0],[-1,4],[-1,1],[-2,1],[1,3],[-1,1],[-1,0],[-1,4],[1,1],[1,1],[-1,1],[0,2],[0,1],[0,2],[0,2],[1,2],[0,3],[0,2],[1,3],[1,0],[1,2],[1,1],[1,1],[3,0],[4,-1],[0,-1],[-1,0],[1,0],[0,-1],[1,-1],[1,-1],[1,-1],[0,-2],[1,-2],[2,-1],[0,-2],[1,-1],[2,0],[1,-1],[1,1],[1,-1],[1,-1],[1,-1],[0,-1],[1,-1],[2,0],[1,-1],[0,-1],[-1,0],[-1,1],[-1,1],[-2,0],[-1,1],[-1,0],[-1,1],[-1,0],[-1,-1],[1,-1],[0,-1],[1,-1],[0,-1],[1,-1],[2,-1],[3,-6],[1,-1],[1,0],[1,-2],[1,-1],[-1,0],[0,-2],[1,0],[0,-1],[-1,1],[-1,0],[-1,1],[0,1],[0,3],[-1,0],[-1,1],[-1,1],[-1,0],[-1,3],[-1,0],[0,1],[-2,0],[-1,0],[-2,0],[-1,-1],[-1,1],[-1,1],[0,1],[-3,0],[0,-1],[1,0],[0,-1],[-1,0],[0,-2],[2,-1],[-1,-1],[0,-1],[1,0],[1,-1],[1,0],[1,-1],[0,-2],[1,0],[0,-1],[1,0],[0,-1],[1,-4],[1,-1],[-2,0],[0,-1],[-1,-1],[0,-1],[-1,-2],[-2,2],[-1,0],[0,-1],[1,-2],[1,-1],[0,-1],[2,-1],[0,-1],[1,-2],[0,-5],[-4,-1],[-2,3],[-1,0],[-4,6],[0,2],[-1,1],[-3,3],[-1,-1],[2,-2],[1,-3],[-1,-2],[1,-1],[1,-1],[0,-2],[1,-1],[-1,-1],[0,1],[-1,-1],[2,0],[2,-1],[-1,-1],[2,-3],[0,-1],[3,-1],[2,0],[3,-9],[1,0],[1,-2]],[[684,42],[0,1],[1,0],[0,-1],[-1,0]],[[590,500],[-1,2],[2,1],[0,-1],[0,-1],[0,-1],[-1,0]],[[578,493],[-3,1],[1,0],[2,0],[0,-1]],[[534,482],[-2,0],[-1,3],[-1,0],[-3,2],[0,3],[2,7],[0,2],[1,2],[1,0],[0,-1],[1,0],[1,-3],[2,-1],[1,-2],[1,0],[-2,-3],[-1,0],[0,-5],[-2,1],[-2,1],[-1,-2],[2,-1],[3,-3]],[[444,456],[1,4],[-2,2],[0,4],[1,0],[0,1],[2,0],[0,-1],[0,-1],[0,-8],[-2,-1]],[[637,37],[0,1],[0,-1]],[[510,366],[0,1],[1,0],[0,-1],[-1,0]],[[508,366],[0,1],[0,-1]],[[559,125],[-1,0],[0,2],[-1,0],[0,1],[1,-1],[2,1],[0,-1],[2,0],[1,-1],[-4,-1]],[[557,113],[0,1],[-1,1],[1,0],[1,-2],[-1,0]],[[440,429],[-2,5],[0,2],[1,0],[1,5],[2,1],[0,-2],[0,-1],[0,-1],[-1,0],[0,-6],[0,-3],[-1,0]],[[556,118],[-1,3],[-2,-1],[0,-1],[-1,0],[-1,3],[1,0],[-1,3],[-1,-2],[-1,0],[-1,2],[-1,0],[0,3],[3,0],[1,4],[1,-2],[1,-1],[0,-1],[4,-1],[-1,0],[0,-2],[-1,0],[1,-6],[1,-1],[-1,0]],[[688,37],[-3,2],[0,1],[-3,-1],[-1,1],[0,2],[1,0],[0,-2],[3,0],[-1,1],[2,0],[-1,-1],[2,0],[1,-3]],[[558,96],[1,12],[-1,2],[1,0],[0,1],[1,0],[1,-2],[2,0],[1,-3],[1,0],[2,-4],[-3,-2],[-1,-3],[-5,-1]],[[442,448],[0,1],[-2,0],[0,4],[-1,1],[2,0],[2,1],[0,-1],[-1,0],[0,-4],[1,0],[0,-1],[-1,-1]],[[628,54],[-1,-1],[-1,2],[-2,2],[2,0],[1,1],[1,-4]],[[679,97],[-3,0],[-4,0],[-5,-2],[-3,-1],[-2,-3],[0,-3],[-3,0],[-3,-2],[-3,-4],[-2,-1],[-4,1],[1,4],[0,3],[-2,6],[-2,3],[3,2],[1,2],[2,-2],[1,-3],[5,-1],[3,1],[2,2],[2,3],[2,1],[-1,2],[-1,3],[-1,4],[-1,1],[-2,-2],[-2,-1],[3,3],[1,1],[3,0],[1,0],[1,1],[1,1],[-1,3],[1,0],[3,-3],[1,0],[1,-1],[2,-1],[1,-2],[2,-4],[1,-3],[2,-1],[2,-4],[-3,-3]],[[957,0],[0,1],[-9,17],[-28,40],[-8,4],[0,9],[43,12],[31,13],[1,9],[37,0],[0,-105],[-67,0]],[[987,104],[2,19],[-7,17],[-11,33],[-30,8],[-8,9],[-3,-1],[-3,-7],[-1,-4],[-2,-1],[0,-1],[-1,-2],[-1,0],[-1,-1],[-2,-2],[-1,-2],[-2,-6],[0,-5],[0,-2],[2,-2],[3,0],[2,-1],[0,-1],[-2,-1],[-2,-1],[-4,-3],[-1,-3],[-1,-6],[0,-7],[-1,-1],[0,372],[112,0],[0,-398],[-37,0]],[[328,124],[0,-22],[0,-1],[-1,-1],[0,-1],[-1,0],[-1,-1],[0,-1],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-1,-1],[0,-1],[-1,-1],[-1,-26],[1,0],[0,-1],[1,1],[-1,0],[1,0],[0,-1],[0,1],[1,0],[0,-1],[0,1],[0,-1],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[1,0],[0,-59],[-224,0],[0,124],[224,0]],[[15,0],[0,1],[3,2],[0,4],[8,4],[1,4],[-1,0],[-1,-2],[-1,0],[0,1],[1,0],[0,1],[0,1],[-2,1],[0,2],[-3,3],[-3,0],[0,-1],[-2,-1],[-1,0],[0,3],[-3,-1],[1,2],[-1,1],[-8,0],[-3,1],[0,98],[106,0],[0,-124],[-91,0]],[[0,19]],[[0,17],[3,-1],[0,-2],[2,1],[7,-2],[-2,-5],[-1,0],[-2,-2],[-2,-6],[-4,0],[-1,0],[0,17]],[[181,515],[-2,-20],[0,-2],[0,-5],[3,-11],[1,-3],[0,-1],[10,-32],[1,-3],[1,-1],[0,-3],[1,-2],[1,-2],[0,-1],[1,-1],[0,-1],[2,-4],[4,-9],[4,-7],[8,-14],[1,-2],[5,-9],[1,0],[1,-2],[1,0],[-1,-1],[1,0],[3,-4],[1,-1],[1,-2],[2,-1],[5,-5],[1,0],[2,-2],[0,-2],[8,-4],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[-1,0],[-1,-2],[0,-1],[1,1],[1,1],[1,1],[1,1],[1,-2],[1,-1],[2,-2],[2,-1],[5,-5],[-1,0],[0,-1],[-1,0],[1,-1],[1,-1],[2,-2],[1,-1],[1,-1],[1,0],[1,-1],[1,-1],[2,-2],[1,-1],[1,-1],[2,-2],[2,-2],[1,-1],[1,-1],[-1,-1],[-1,0],[-1,0],[0,1],[0,-1],[-1,0],[0,-1],[0,-1],[1,-2],[1,-2],[1,-1],[2,-3],[3,-2],[2,-3],[3,-1],[1,0],[2,-2],[2,-1],[0,-1],[1,-1],[0,-1],[2,-2],[1,0],[1,0],[5,-3],[0,-1],[-1,0],[1,-2],[1,-1],[1,0],[1,-1],[1,-3],[2,0],[3,-6],[4,-3],[0,-3],[2,-1],[0,-1],[2,-1],[1,-1],[2,-1],[1,0],[1,-1],[1,-1],[1,-2],[1,-3],[2,-1],[2,-2],[0,-141],[-328,0],[0,392],[181,0]],[[122,968],[0,1],[0,1],[0,1],[0,1],[0,1],[-1,0],[0,1],[0,1],[0,1],[-1,0],[0,1],[-1,0],[-1,0],[0,1],[0,1],[1,1],[0,1],[-1,0],[1,1],[-1,0],[0,1],[0,1],[0,1],[1,0],[1,1],[-1,0],[-1,0],[-1,-2],[-1,-1],[1,0],[-1,-1],[1,0],[1,-1],[-1,0],[-1,-1],[0,-1],[0,-1],[0,-1],[1,0],[0,-1],[1,0],[1,0],[0,-1],[0,-1],[-1,-1],[1,-1],[0,-1],[1,0],[0,-1],[0,-1],[0,-1],[0,-1],[1,-1],[1,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,-1],[0,-1],[0,-1],[0,-1],[0,-1],[1,-1],[0,-1],[-1,-1],[-1,0],[0,-1],[-1,-1],[-1,-1],[0,-1],[0,-1],[0,-1],[1,-1],[0,-1],[-1,-1],[0,-2],[-1,-1],[0,-1],[-1,-1],[-1,-1],[-1,0],[0,-1],[0,-1],[-1,-1],[0,1],[0,1],[0,1],[1,0],[0,1],[0,1],[0,1],[0,1],[1,1],[1,1],[-1,0],[0,1],[-1,1],[0,1],[1,1],[0,1],[1,1],[-1,0],[-1,0],[-1,0],[0,-1],[0,-1],[-1,-1],[0,-1],[1,-1],[0,-1],[-1,-1],[-1,1],[0,-1],[0,-1],[0,-1],[1,0],[-1,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[1,-2],[0,-1],[-1,-1],[-1,0],[0,-1],[1,-1],[0,-3],[-1,0],[-1,-1],[1,-1],[3,-1],[0,1],[0,1],[0,1],[1,0],[1,-1],[4,-2],[-1,-9],[2,-8],[0,-1],[-96,0],[0,121],[99,0],[0,-56]],[[161,970],[1,0],[1,0],[0,-1],[0,1],[1,-1],[0,-1],[0,-1],[1,0],[0,-1],[-1,0],[1,0],[-1,0],[0,-1],[1,0],[-1,-1],[1,0],[0,-1],[0,-1],[1,0],[1,0],[-1,0],[-1,-1],[0,-1],[0,-1],[0,-1],[-1,0],[-1,0],[-1,1],[0,1],[-1,1],[0,-1],[0,-1],[0,-1],[1,-1],[-1,0],[-1,-1],[-1,0],[0,1],[0,1],[-1,0],[-1,1],[-1,0],[0,-1],[1,0],[0,-1],[-1,0],[-1,0],[-1,0],[-1,0],[-1,1],[0,1],[0,1],[-1,0],[0,1],[-1,0],[1,1],[-1,0],[0,1],[-1,0],[0,1],[-1,1],[0,-1],[0,-1],[1,-1],[0,-1],[0,-1],[1,0],[-1,0],[-1,1],[-1,0],[0,-1],[1,0],[0,-1],[0,-1],[1,0],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[1,0],[1,0],[0,-1],[1,0],[1,1],[0,-1],[0,1],[1,-1],[0,1],[1,0],[1,0],[1,0],[0,-1],[0,1],[1,0],[1,0],[-1,0],[-1,0],[0,1],[1,0],[1,0],[1,1],[1,0],[1,0],[1,0],[0,1],[1,0],[1,-1],[-1,0],[0,-1],[0,-1],[-1,0],[-1,0],[-1,0],[-1,-1],[-1,0],[0,-1],[-1,0],[-1,-1],[-1,0],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[0,-1],[1,0],[0,-1],[-1,0],[0,-1],[-1,0],[1,-1],[-1,0],[-1,0],[-1,-1],[0,-1],[-1,-1],[-1,0],[0,-1],[-1,0],[0,-1],[0,1],[-1,0],[0,1],[1,0],[0,-1],[0,1],[0,1],[-1,0],[-1,1],[1,0],[1,0],[0,1],[1,0],[1,1],[1,0],[-1,0],[-1,0],[0,-1],[-1,0],[0,1],[0,-1],[-1,0],[-1,-1],[-1,0],[-1,0],[0,-1],[-1,0],[-1,-1],[-1,0],[-1,0],[0,1],[1,1],[1,2],[0,1],[1,0],[-1,1],[0,1],[1,0],[0,1],[1,0],[0,1],[-1,1],[0,1],[-1,0],[0,-1],[0,-1],[-1,0],[-1,-1],[0,-1],[0,-1],[-1,0],[-1,1],[0,1],[0,1],[0,1],[-1,0],[-1,0],[0,1],[-1,0],[-1,0],[0,1],[0,-1],[1,-1],[-1,0],[1,-1],[0,-1],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[1,0],[0,-1],[-1,-1],[0,-1],[-1,0],[0,-1],[2,0],[-1,-1],[0,-1],[-1,0],[-1,0],[0,1],[-1,0],[-1,-1],[-1,1],[-1,-1],[0,1],[0,-1],[1,0],[1,0],[1,-1],[0,-1],[1,0],[1,0],[1,0],[0,1],[1,0],[0,-1],[1,-1],[1,1],[0,1],[1,0],[0,1],[1,0],[1,0],[1,0],[1,-1],[0,-1],[0,-1],[-1,-1],[0,-1],[-1,0],[-1,0],[-1,0],[-1,0],[-1,0],[-1,0],[-1,-1],[-1,0],[-1,0],[-1,-1],[0,1],[-1,-1],[-1,0],[0,-1],[-1,0],[-3,-2],[-3,-1],[-2,-2],[0,-1],[-1,0],[-1,0],[0,1],[0,1],[-1,1],[0,1],[-1,0],[0,1],[1,0],[0,1],[0,1],[-1,-1],[-1,0],[0,-1],[0,14],[0,1],[0,4],[1,1],[1,0],[0,1],[0,1],[0,1],[1,1],[-1,0],[0,1],[0,1],[-1,0],[1,1],[0,1],[0,1],[1,0],[0,1],[1,1],[1,1],[0,1],[-1,0],[0,1],[-1,0],[0,1],[0,1],[-1,1],[-1,0],[0,1],[0,1],[39,0]],[[118,905],[1,-1],[1,-1],[0,-1],[2,0],[2,-5],[1,-1],[1,0],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-2],[-1,-2],[-1,0],[0,-1],[-1,0],[-1,0],[-1,-1],[0,1],[-1,0],[-1,1],[1,0],[2,0],[0,1],[0,1],[-1,1],[-1,0],[-1,0],[-2,-1],[-1,-1],[-1,0],[-1,0],[-1,0],[0,-1],[0,-1],[1,0],[2,0],[1,-1],[3,1],[1,0],[1,-2],[-1,-1],[0,-1],[0,-3],[1,-4],[3,-8],[7,-12],[5,-6],[4,-2],[1,1],[2,0],[0,1],[-1,-2],[-1,0],[-1,-1],[0,-1],[0,-1],[0,-1],[0,-1],[0,-1],[1,-1],[0,-2],[1,0],[1,0],[0,1],[0,1],[0,1],[0,1],[0,1],[1,1],[0,1],[0,1],[-1,1],[0,1],[1,1],[1,3],[-1,-3],[1,-1],[3,-1],[3,-1],[0,1],[3,1],[6,0],[4,-1],[2,-7],[0,-1],[-1,-1],[0,-2],[0,-2],[0,-2],[0,-2],[0,-1],[-1,-2],[0,-2],[-1,-2],[-1,-2],[0,-2],[0,1],[-1,0],[0,-1],[-1,0],[0,-2],[1,0],[0,-1],[1,0],[0,-1],[-2,-3],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[0,-1],[-1,-6],[0,-2],[0,-2],[0,-1],[-1,-1],[0,-1],[0,-9],[0,-1],[0,-2],[0,-1],[-2,-1],[0,1],[0,1],[-1,0],[0,-1],[0,-1],[-1,0],[-1,1],[0,-1],[-1,0],[0,2],[-1,-2],[0,-1],[-3,-1],[-9,-7],[1,-1],[6,6],[2,1],[1,-1],[0,1],[2,2],[0,-1],[2,1],[1,1],[1,0],[0,-1],[1,1],[1,0],[1,0],[0,-1],[0,-1],[0,-1],[0,-2],[1,-21],[0,-1],[1,-2],[1,-4],[1,-12],[1,-4],[4,-19],[0,-2],[3,-14],[6,-16],[6,-13],[2,-12],[2,-4],[2,-11],[2,0],[-3,0],[-1,0],[0,1],[-1,0],[0,4],[-1,2],[1,-6],[0,-1],[1,0],[1,-1],[1,0],[2,0],[-1,0],[-2,-11],[-5,-34],[-1,-28],[0,-2],[2,-36],[0,-1],[0,-1],[-1,-11],[-181,0],[0,391],[118,0]],[[25,903],[-25,0],[0,121],[25,0],[0,-121]],[[121,957],[0,-1],[1,-1],[0,-1],[-1,-1],[0,4]],[[208,1013],[0,-1],[-1,0],[1,0],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[-1,0],[-1,0],[0,1],[-1,-1],[1,-1],[0,-1],[-1,0],[1,-1],[-1,0],[-1,0],[0,-1],[0,-1],[-1,0],[-1,0],[0,1],[-1,0],[0,-1],[-2,0],[-1,-1],[-1,0],[0,-1],[-1,0],[0,-1],[0,-1],[1,0],[-1,0],[1,-1],[0,-1],[0,-1],[-1,0],[-1,0],[0,-1],[1,0],[0,-1],[0,-1],[1,0],[0,-1],[-1,1],[-1,0],[-1,0],[0,-1],[-1,0],[0,-1],[0,-1],[-1,0],[0,-1],[0,-1],[0,-1],[-1,0],[0,-1],[1,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,1],[-1,0],[-1,0],[0,-1],[-1,0],[-1,-1],[0,-1],[0,-1],[0,-1],[0,1],[-1,0],[0,-1],[0,1],[0,-1],[-1,0],[0,1],[-1,0],[-1,-1],[-1,-1],[-1,0],[-1,0],[-1,-1],[-1,0],[-1,0],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[0,-1],[-1,0],[-1,0],[0,1],[-1,0],[0,1],[-1,0],[0,1],[0,1],[0,1],[0,1],[1,1],[-1,0],[0,1],[0,1],[0,1],[0,1],[-1,0],[0,-1],[0,-1],[0,-1],[-1,-1],[0,-1],[1,0],[-1,-1],[0,-1],[0,-1],[-1,0],[-1,1],[-1,0],[0,1],[-1,0],[-1,0],[-1,-1],[0,1],[0,1],[-1,0],[-1,0],[0,-1],[0,-1],[-1,0],[-1,0],[-1,0],[0,-1],[-1,0],[-1,0],[0,1],[0,-1],[1,0],[1,0],[1,0],[1,-1],[2,1],[1,0],[1,-1],[2,0],[1,-1],[0,-1],[0,1],[-1,0],[-1,0],[-1,-1],[1,0],[1,0],[1,-1],[1,0],[1,0],[1,0],[0,-1],[0,1],[1,-1],[-42,0],[0,1],[0,1],[0,1],[0,1],[-1,0],[0,1],[0,1],[0,1],[0,37],[87,0]],[[121,966],[1,-1],[0,-1],[0,-1],[1,0],[0,-1],[-1,-1],[-1,-1],[0,-1],[0,-1],[0,8]],[[167,962],[1,0],[0,1],[0,-1],[0,-1],[-1,1]]]}</code></pre></noscript></div>


<p>TileStache provides an easy-to-use point of entry for vector tiles. In a later post I&rsquo;ll go over some of the profiling
experiments I&rsquo;ve been running, using TileStache&rsquo;s dynamic line simplification, and it&rsquo;s affects on file size as well as
the aesthetic affects on representations of these geometries.</p>

<p>I&rsquo;ll also be writing out the work I did extending TileStache to support calls to the <a href="http://labs.giphy.com">Giphy Labs API</a>: <a href="http://mattmakesmaps.github.io/TileStache-GiphyAPI-Demo/">http://mattmakesmaps.github.io/TileStache-GiphyAPI-Demo/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Quickstart GIS Setup on Ubuntu Linux 12.04 LTS]]></title>
    <link href="http://mkgeomatics.github.io/blog/2013/08/26/quickstart-gis-setup-on-ubuntu-linux-12-dot-04-lts/"/>
    <updated>2013-08-26T21:12:00-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2013/08/26/quickstart-gis-setup-on-ubuntu-linux-12-dot-04-lts</id>
    <content type="html"><![CDATA[<p>I had to recently setup a clean Ubuntu 12.04 LTS workstation for GIS
data processing. For the simplicity and speed, I decided to go with
packaged versions of many of the required GIS software. Many of the
packages are derived from the <a href="https://launchpad.net/~ubuntugis/+archive/ubuntugis-unstable">ubuntugis-unstable</a> repository.</p>

<p>What follows below are a blow-by-blow of my installation notes
grouped by software package. Either code snippets or links to relevant
blog posts.<!-- More --></p>

<p>This is certainly only a high-level guide. If anyone has any other
suggestions or alternatives, please feel free to list them.</p>

<p><strong>NOTE:</strong> The order of these installs reflects the actual order in
which I installed them.</p>

<h2>Non-GIS Essentials</h2>

<h3>Install SSH</h3>

<p><a href="http://en.wikipedia.org/wiki/Secure_Shell">SSH</a> or Secure Shell,
is essential for remote server administration.</p>

<p><code>$ sudo apt-get install openssh-server</code></p>

<h3>Increase History Size</h3>

<p>The default history size is pretty low. Increasing the size allows us
to do search for that oft-used terminal command right when you need it
most. What was the name of that server I ssh&rsquo;d into last month?
Piping history to grep can do the trick. <code>$ history | grep -i "ssh"</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim ~/.bashrc
</span><span class='line'><span class="nv">HISTSIZE</span><span class="o">=</span>10000
</span><span class='line'><span class="nv">HISTFILESIZE</span><span class="o">=</span>20000
</span></code></pre></td></tr></table></div></figure>


<h3>Python Virtual Environments</h3>

<p>Used this <a href="https://gist.github.com/panuta/3075882">awesome gist</a> by
github user <a href="https://github.com/panuta">panuta</a>.</p>

<p>Didn&rsquo;t follow, but a good reference: <a href="http://askubuntu.com/questions/244641/how-to-set-up-and-use-a-virtual-python-environment-in-ubuntu">http://askubuntu.com/questions/244641/how-to-set-up-and-use-a-virtual-python-environment-in-ubuntu</a></p>

<h3>Apache</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install apache2
</span></code></pre></td></tr></table></div></figure>


<h2>GIS Packages</h2>

<h3>Connect to the UbuntuGIS-Unstable PPA</h3>

<p>In order to access many of these packages, we need to connect the
system to the UbuntuGIS-Unstable PPA.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span></code></pre></td></tr></table></div></figure>


<h3>GDAL/Fiona</h3>

<p>GDAL/OGR are the defacto Open Source GIS swiss army knife.
<a href="https://github.com/sgillies/Fiona">Fiona</a> provides easy-to-use
Python bindings for use in your projects.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install libgdal-dev gdal-bin
</span><span class='line'><span class="nv">$ </span>workon gis-base
</span><span class='line'><span class="nv">$ </span>sudo apt-get install python2.7-dev
</span><span class='line'><span class="nv">$ </span>pip install Fiona
</span></code></pre></td></tr></table></div></figure>


<h3>Postgres/PostGIS</h3>

<p>The ubuntu unstable repository provides pre-packaged binaries combining both Postgres and Postgis.</p>

<p>As of August 2013, GDAL version 1.10 for some reason doesn&rsquo;t include libgdal1, replaced by libgdalh. See: <a href="http://lists.osgeo.org/pipermail/ubuntu/2013-July/000757.html">http://lists.osgeo.org/pipermail/ubuntu/2013-July/000757.html</a>
This appearently is causing some issues with packages installations, including Postgres/PostGIS. The steps below appear to work.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install libgdal1-dev
</span><span class='line'><span class="nv">$ </span>sudo apt-get install postgresql-9.1-postgis-2.0
</span></code></pre></td></tr></table></div></figure>


<p>If you need any of the postgis util scripts, e.g. <code>postgres_restore.pl</code> used for restoring a postgres database (across differing versions
of postgis), I believe the only way to get these is by making from source.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install proj
</span><span class='line'><span class="nv">$ </span>wget http://download.osgeo.org/postgis/source/postgis-2.0.3.tar.g
</span><span class='line'><span class="nv">$ </span>tar -zxvf postgis-2.0.3.tar.gz
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>postgis-2.0.3/
</span><span class='line'><span class="nv">$ </span>./configure
</span><span class='line'><span class="nv">$ </span>make
</span></code></pre></td></tr></table></div></figure>


<p>Finally, if you need to change your Postgresql data dir to another
disk, this guide provides good advice: <a href="http://www.whiteboardcoder.com/2012/04/change-postgres-datadirectory-folder.html">http://www.whiteboardcoder.com/2012/04/change-postgres-datadirectory-folder.html</a></p>

<h3>Imposm 2.5.0</h3>

<p>If you&rsquo;re rendering OSM data, imposm is one of the fastest ways
to get data from an OSM Planet Extract into PostGIS.</p>

<p>I followed the instructions within the <a href="http://imposm.org/docs/imposm/latest/install.html#requirements">Imposm documentation</a></p>

<p>Note: Installed imposm directly into my virtualenv &ldquo;gis-base&rdquo;</p>

<h3>Quantum GIS</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install qgis
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MapBox + Github = Free and Fast Web Maps]]></title>
    <link href="http://mkgeomatics.github.io/blog/2013/07/17/mapbox-plus-github-equals-free-and-fast-web-maps/"/>
    <updated>2013-07-17T11:06:00-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2013/07/17/mapbox-plus-github-equals-free-and-fast-web-maps</id>
    <content type="html"><![CDATA[<p>With the announcement of Github&rsquo;s awesome support for <a href="http://www.mapbox.com/blog/github-mapbox-maps/">direct geojson renderingg</a>,
folks can deploy an embeddable web map with a single git commit and push. This got me
thinking about the potential of github, specifically <a href="http://pages.github.com/">github pages</a>,
as a vehicle for the display of more customized web mapping applications. The result of that
experiment is <a href="http://aknativenamesatlas.com">aknativenamesatlas.com</a>. <!-- more --></p>

<p>I deployed the initial draft of this site in a few hours, thanks entirely not only to
the power of MapBox and Github&rsquo;s hosting infrastructure, but also to the easy-to-use
<a href="http://www.mapbox.com/map-sites/">mapping templates</a> provided by MapBox.</p>

<p>This blog series will attempt to illustrate some of the major steps involved in the
process of deploying this map. The general process however, is as follows.</p>

<ol>
<li>Style cartographic layers via TileMill, upload to MapBox.</li>
<li>Create composite map of individual operation layers plus a base within MapBox.</li>
<li>Fork MapBox&rsquo;s dc-properties-template via github.</li>
<li>Edit forked repository to point to my layers of interest.</li>
<li>Add CNAME record for custom URL to forked repository.</li>
<li>Configure DNS to route custom domain name to github pages.</li>
</ol>


<p>This first post will cover the cartography, and more importantly, the on-the-fly compositing of
layers.</p>

<h1>Cartography &amp; Compositing</h1>

<p>The primary tool used to create the cartographic look and feel of the individual data layers is
<a href="http://www.mapbox.com/tilemill/">TileMill</a>. TileMill is a desktop cartographic design studio, allowing you to
load your own datasets from a variety of spatial formats (SHP, SpatialLite, PostGIS), and style via a CSS-like
language, <a href="http://www.mapbox.com/tilemill/docs/manual/carto/">CartoCSS</a>.</p>

<p>I&rsquo;ll gloss over the details for styling maps in in TileMill, but they&rsquo;ve got a great
<a href="http://www.mapbox.com/tilemill/docs/crashcourse/introduction/">quick-start guide</a>.</p>

<p>For my site, I ended up creating two projects in TileMill, one for each operational layer present in the final
map. The first layer represents <a href="http://a.tiles.mapbox.com/v3/mattmakesmaps.language_points/page.html">place names</a>
, symbolized as points. The second layer depicts <a href="http://a.tiles.mapbox.com/v3/mattmakesmaps.language_lines/page.html">language regions</a>
, symbolized as lines, but the geometry are in actuality polygons (required for the display of attribute information via a hover event).</p>

<p>Splitting these operational layers into separate projects in TileMill, and conversely separate web maps when uploaded to MapBox, allows
us to mix and match these layers at will. Specifically, the <a href="http://www.mapbox.com/developers/api/#Map.resources">MapBox REST API</a>
allows us to composite or layer individual maps into a single-tile, on-the-fly. If you&rsquo;re head hasn&rsquo;t been exploded, allow me to illustrate.</p>

<p>The map on <a href="http://aknativenamesatlas.com">aknativenamesatlas.com</a> is a composite of multiple layers. A basemap, provided by mapbox, as well as two operational layers (a point layer and a line layer).</p>

<p>A <a href="http://a.tiles.mapbox.com/v3/mattmakesmaps.map-9ipoh344/6/5/16.png">single tile</a> from this map looks like this:</p>

<p><img src="http://a.tiles.mapbox.com/v3/mattmakesmaps.map-9ipoh344/6/5/16.png" title="Base Tile" ></p>

<p>The URL is as follows: <a href="http://a.tiles.mapbox.com/v3/mattmakesmaps.map-9ipoh344/6/5/16.png">http://a.tiles.mapbox.com/v3/mattmakesmaps.map-9ipoh344/6/5/16.png</a>. Note the <code>mattmakesmaps.map-9ipoh3441</code> section of the URL. This is a combination of my user account, <code>mattmakesmaps</code> and the unique map id. This identifier indicates that I&rsquo;m requesting the tile representing this specific map, again, a composite of multiple layers.</p>

<p>We can however, query individual layers that make up this map. For example, the lines layer specifically has a URL endpoint of <a href="http://a.tiles.mapbox.com/v3/mattmakesmaps.language_lines/6/5/16.png">http://a.tiles.mapbox.com/v3/mattmakesmaps.language_lines/6/5/16.png</a>. It looks like this.</p>

<p><img src="http://a.tiles.mapbox.com/v3/mattmakesmaps.language_lines/6/5/16.png"></p>

<p>Similarly, with the points layer: <a href="http://a.tiles.mapbox.com/v3/mattmakesmaps.language_points/6/5/16.png">http://a.tiles.mapbox.com/v3/mattmakesmaps.language_points/6/5/16.png</a>. NOTE: You&rsquo;ll have to squint to see the points. They don&rsquo;t show up very well with the black on dark blue background. OR, you can open the tile link above in a new tab.</p>

<p><img src="http://a.tiles.mapbox.com/v3/mattmakesmaps.language_points/6/5/16.png"></p>

<p>The real magic comes when we composite these individual layers together, on-the-fly. From the <a href="http://www.mapbox.com/developers/api/#Map.resources">docs</a></p>

<blockquote><p>By joining multiple ids with commas into a single :map parameter you can access the MapBox Hosting compositing API to layer multiple tile images, UTFgrids or aggregate the TileJSON of multiple maps into a single map.</p></blockquote>


<p>That looks something like this <a href="http://a.tiles.mapbox.com/v3/mattmakesmaps.language_lines,mattmakesmaps.language_points/6/5/16.png">http://a.tiles.mapbox.com/v3/mattmakesmaps.language_lines,mattmakesmaps.language_points/6/5/16.png</a>:</p>

<p><img src="http://a.tiles.mapbox.com/v3/mattmakesmaps.language_lines,mattmakesmaps.language_points/6/5/16.png"></p>

<p>Pretty cool. You can even flip the z-index in which the layers are composited by simply re-arranging their position in the URL.</p>

<p>That&rsquo;s it for now. The next post will cover how to fork Mapbox&rsquo;s DC-Properties template, allowing us to visualize our maps, accessible via github pages.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fixing ArcGIS 10.1 Numpy Import Error From Python Console]]></title>
    <link href="http://mkgeomatics.github.io/blog/2013/07/10/fixing-arcgis-10-dot-1-python-console-numpy-import-error/"/>
    <updated>2013-07-10T20:35:00-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2013/07/10/fixing-arcgis-10-dot-1-python-console-numpy-import-error</id>
    <content type="html"><![CDATA[<p>At my current employer, we have four Windows 7 64-bit workstations, all running ArcGIS 10.1 under
various license levels. Hilariously, due to some quirk that I haven&rsquo;t been able to figure out,
all machines have been reporting the following traceback when running <code>&gt;&gt;&gt; import numpy</code> from
ArcGIS Desktop&rsquo;s internal Python console.</p>

<!-- more -->




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt;&gt;&gt; import numpy
</span><span class='line'>Runtime error 
</span><span class='line'>Traceback (most recent call last):
</span><span class='line'>  File "&lt;string&gt;", line 1, in &lt;module&gt;
</span><span class='line'>  File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\__init__.py", line 24, in &lt;module&gt;
</span><span class='line'>    from arcpy.toolbox import *
</span><span class='line'>  File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\toolbox.py", line 342, in &lt;module&gt;
</span><span class='line'>    from management import Graph, GraphTemplate
</span><span class='line'>  File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\management.py", line 22, in &lt;module&gt;
</span><span class='line'>    import _management
</span><span class='line'>  File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\_management.py", line 14, in &lt;module&gt;
</span><span class='line'>    import _graph
</span><span class='line'>  File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\_graph.py", line 27, in &lt;module&gt;
</span><span class='line'>    import numpy
</span><span class='line'>ImportError: No module named numpy</span></code></pre></td></tr></table></div></figure>


<p>One solution to this is to explicitly append the <code>PYTHONPATH</code> environment variable to reference the ArcGIS10.1 Python install&rsquo;s <code>site-packages</code> directory.</p>

<h1>Creation of PYTHONPATH Environment Variable</h1>

<ol>
<li><p>From the start menu, right click the <code>computer</code> button and select <code>properties</code>.</p></li>
<li><p>Click <code>Advanced System Settings</code>.</p></li>
<li><p>Click the <code>Advanced</code> tab, and select the <code>Environment Variables</code> button.</p></li>
<li><p>Click <code>New</code> to create a new environment variable.</p></li>
<li><p>Name the environment variable <code>PYTHONPATH</code> and set it&rsquo;s value to point to the <code>site-packages</code> directory for ArcGIS. For my instance, this is <code>C:\Python27\ArcGIS10.1\Lib\site-packages</code>.</p></li>
<li><p>Restart the machine. You should now be able to successfully import numpy, arcpy, and any other Python modules installed as part of the ArcGIS 10.x version of Python.</p></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Auto-Push to GitHub via Machine User]]></title>
    <link href="http://mkgeomatics.github.io/blog/2013/06/16/auto-push-to-github-via-machine-user/"/>
    <updated>2013-06-16T14:19:00-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2013/06/16/auto-push-to-github-via-machine-user</id>
    <content type="html"><![CDATA[<p>This post will review a workflow for automatically pushing data from a client machine to github.
This can be useful if you want to automatically make publicly available data that are regularly processed on
a local machine. <!-- more --> For my particular use case, I&rsquo;m downloading data from the <a href="http://waterservices.usgs.gov/rest/IV-Test-Tool.html">USGS Instantaneus Values
Web Service</a> , and would
like to process those data locally for use in a d3 visualization. My d3 viz will eventually be
hosted on github as well, so having a dynamically updated dataset stored on github made sense.
I&rsquo;m sure that it&rsquo;s possible to emulate this ETL workflow in pure JavaScript, but I wanted to see
how to set this up, in the event that I found myself in a situation in which heavy pre-processing
of data was required.</p>

<p>The general steps are as follows:</p>

<ol>
<li>On the local machine, create a machine user and group.</li>
<li>Create a corresponding github account for the machine user.</li>
<li>Generate an SSH key machine user &amp; associate the public key of the machine user to its github account.</li>
<li>Assign the github account to the repository of interest.</li>
<li>Clone the repository of interest, making it group writable.</li>
<li>On the local machine, create a cron job under the machine user to execute the processing script.</li>
</ol>


<h2>Create Machine User and Group</h2>

<p>On my local machine, I start by creating a user and group for the purpose of pushing data to github.
I&rsquo;m doing this to isolate the amount of exposure that this user has to my wider system.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Create the user, rdi-git</span>
</span><span class='line'><span class="nv">$ </span>sudo adduser rdi-git
</span><span class='line'><span class="c"># You&#39;ll be prompted to enter a password as well.</span>
</span><span class='line'><span class="c"># Create the group, git</span>
</span><span class='line'><span class="nv">$ </span>sudo addgroup git
</span><span class='line'><span class="c"># Add our new user (rdi-git) to the new group (git)</span>
</span><span class='line'><span class="nv">$ </span>sudo usermod -a -G git rdi-git
</span></code></pre></td></tr></table></div></figure>


<h2>Create a Github Account for Machine User</h2>

<p>After having created the machine users on my local box, the next step is to create an analogous
user on <a href="https://github.com">github</a>.</p>

<h2>Generate SSH Key &amp; Assign to Github User</h2>

<p>From the local machine, make sure that you&rsquo;re logged in as the newly created machine user.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo su rdi-git
</span></code></pre></td></tr></table></div></figure>


<p>At this point, I defer to the great instructions on the Github help docs for <a href="https://help.github.com/articles/generating-ssh-keys">generating an ssh key</a>.</p>

<h2>Assign Github Account As Collaborator to Repo of Interest</h2>

<p>Next, I add our github user, rdi-git, as a collaborator on my repository of interest. Here is a link on
the <a href="https://help.github.com/articles/how-do-i-add-a-collaborator">Github help docs</a>.</p>

<h2>Clone the Repository of Interest, add Assign Permissions</h2>

<p>I&rsquo;m creating a <code>/projects/</code> folder, in which I&rsquo;ll clone my repo. I&rsquo;d like to ensure that this folder, and
subsequently all repos contained within it, are associated with git group. This <a href="http://unix.stackexchange.com/questions/12842/make-all-new-files-in-a-directory-accessible-to-a-group">stackoverflow</a> outlines the required commands.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Make the directory</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /
</span><span class='line'><span class="nv">$ </span>mkdir projects
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /projects
</span><span class='line'><span class="c"># Change perms to group writable. See Above SO post.</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">umask </span>002            <span class="c"># allow group write; everyone must do this</span>
</span><span class='line'><span class="nv">$ </span>chgrp git .          <span class="c"># set directory group to gitG</span>
</span><span class='line'><span class="nv">$ </span>chmod g+s .          <span class="c"># files created in directory will be in group git</span>
</span><span class='line'><span class="c"># Clone our repo of interest, using ssh</span>
</span><span class='line'><span class="nv">$ </span>git@github.com:mattmakesmaps/robo-d3.git
</span></code></pre></td></tr></table></div></figure>


<h2>Create the Cron Job</h2>

<p>The repo I&rsquo;ve just cloned contains the <a href="https://github.com/mattmakesmaps/robo-d3/blob/master/scripts/waterservices_parser.py">processing script</a> I&rsquo;ll be running.
Our processed data will also be stored and pushed back to this repository.</p>

<p>I&rsquo;d like to have my processing script run once every hour, on the hour. We setup the cron job by first entering
crontab.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Login as machine user, cron job will be run under this id.</span>
</span><span class='line'><span class="nv">$ </span>sudo su rdi-git
</span><span class='line'><span class="nv">$ </span>crontab -e
</span></code></pre></td></tr></table></div></figure>


<p>Here is an excerpt of the machine user&rsquo;s cron jobs, with the new job added at the bottom.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># For more information see the manual pages of crontab(5) and cron(8)</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># m h  dom mon dow   command</span>
</span><span class='line'>0 * * * * python /projects/robo-d3/scripts/waterservices_parser.py &gt; ~/robo-d3.log 2&gt;&amp;1
</span></code></pre></td></tr></table></div></figure>


<p>We essential say, on the minute zero, of every hour, for every day, month, and weekday, run the command &lsquo;python /path/to/script&rsquo;. The tail indicates that we&rsquo;re outputting both STDOUT and the ERROR log to <code>/home/rdi-git/robo-d3.log</code></p>

<p>And there we go. If we check out the <a href="https://github.com/mattmakesmaps/robo-d3/commits/master">commit logs</a> we can
see that our github user, rdi-git, has been pushing every hour on the hour. Woo-hoo!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hack GeoDjango Admin with Mapquest Tiles]]></title>
    <link href="http://mkgeomatics.github.io/blog/2013/05/01/django-add-mapquest-tiles/"/>
    <updated>2013-05-01T20:53:00-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2013/05/01/django-add-mapquest-tiles</id>
    <content type="html"><![CDATA[<p>The <a href="http://geodjango.org/">GeoDjango model</a> admin provides a great <a href="http://openlayers.org/">OpenLayers</a> interface, allowing a user to create geographic features (points, lines, polygons) directly via a web map. Out-of-the-box,
GeoDjango ships with a base GeoAdmin class, using the default OL world borders layer,
as well as a subclass for OSM streets data. The OSM layer is great, and provides a good base
for most use cases. That being said, for <a href="https://github.com/mattmakesmaps/PntTrax">PntTrax</a>, I needed aerial tiles. <!-- more -->My application deals
primarily with the storage of field collected (GPS, field notes, aerial markup, etc.) data.
Our data occur primarily in non-urban areas, where natural features provide a much
better context for orientation then would be expected with any streets layer, OSM or otherwise.
Mapquest provides a good set of aerial tiles, that can be easily integrated into OpenLayers.</p>

<p>It&rsquo;s easier to place a point on this:</p>

<p><img src="http://mattmakesmaps.com/images/2013-04-30/aerial.jpg" width="500"></p>

<p>Then this:</p>

<p><img src="http://mattmakesmaps.com/images/2013-04-30/osm.png" width="500"></p>

<p>Hacking the admin to display the <a href="http://developer.mapquest.com/web/products/open/map">Mapquest aerial tiles</a> is a pretty straightforward process.
From the gis contrib package, we&rsquo;ll modify <a href="https://github.com/django/django/blob/master/django/contrib/gis/admin/options.py">options.py</a> and its <a href="https://github.com/django/django/blob/master/django/contrib/gis/admin/__init__.py">__init__.py</a>, subclassing the OSMGeoAdmin. Within the <a href="https://github.com/django/django/tree/master/django/contrib/gis/templates/gis/admin">templates
folder</a>,
we&rsquo;ll create two new files, a html template file, that actually points to a javascript file
containing a reference to the Mapquest Open Aerial tiles service.</p>

<h2>Creating mapquestGeoAdminSubclass</h2>

<p>The <a href="https://github.com/django/django/blob/master/django/contrib/gis/admin/options.py#L132-L139">OSMGeoAdmin class</a> is a subclass of the base GeoModelAdmin. The GeoModelAdmin contains a set of
configuration parameters for the map, covering basic setup. The OSMGeoAdmin class utilizes
many of those configuration parameters, but configures the map for a spherical mercator projection.
Since our Mapquest Aerial Tiles also require a spherical mercator projection, our class will
be a subclass of the OSMGeoAdmin.</p>

<p>We add the following code below the OSMGeoAdmin class definition.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># Subclass OSMGeoAdmin, pointing to the To-Be-Created</span>
</span><span class='line'><span class="c"># Mapquest template file.`</span>
</span><span class='line'><span class="k">class</span> <span class="nc">mapquestGeoAdmin</span><span class="p">(</span><span class="n">OSMGeoAdmin</span><span class="p">):</span>
</span><span class='line'>    <span class="n">map_template</span> <span class="o">=</span> <span class="s">&#39;gis/admin/mapquest.html&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Modify the GIS Admin Package&rsquo;s __init__.py</h2>

<p>The <code>__init__.py</code> file imports the <code>OSMGeoAdmin</code> class, let&rsquo;s modify it to include our
new subclass</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># From this</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">django.contrib.gis.admin.options</span> <span class="kn">import</span> <span class="n">OSMGeoAdmin</span>
</span><span class='line'><span class="c"># To this</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">django.contrib.gis.admin.options</span> <span class="kn">import</span> <span class="n">OSMGeoAdmin</span><span class="p">,</span> <span class="n">mapquestGeoAdmin</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Create mapquest.js</h2>

<p>Again, using the OpenStreetMap implementation as a reference, we can see that <code>osm.js</code> extends the basic <code>openlayers.js</code> file, but replaces the contents of the <code>base layer</code>
block with an a reference to the OpenStreetMap layer.</p>

<p>We&rsquo;ll create a similar file in this package called <code>mapquest.js</code>. The contents are as
follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="p">{</span><span class="c"># Source: http://openlayers.org/dev/examples/mapquest.html #}</span>
</span><span class='line'><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s">&quot;gis/admin/openlayers.js&quot;</span> <span class="o">%</span><span class="p">}</span>
</span><span class='line'><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">base_layer</span> <span class="o">%</span><span class="p">}</span>
</span><span class='line'>        <span class="n">new</span> <span class="n">OpenLayers</span><span class="o">.</span><span class="n">Layer</span><span class="o">.</span><span class="n">XYZ</span><span class="p">(</span>
</span><span class='line'>            <span class="s">&quot;Imagery&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="p">[</span>
</span><span class='line'>                <span class="s">&quot;http://otile1.mqcdn.com/tiles/1.0.0/sat/${z}/${x}/${y}.png&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s">&quot;http://otile2.mqcdn.com/tiles/1.0.0/sat/${z}/${x}/${y}.png&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s">&quot;http://otile3.mqcdn.com/tiles/1.0.0/sat/${z}/${x}/${y}.png&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="s">&quot;http://otile4.mqcdn.com/tiles/1.0.0/sat/${z}/${x}/${y}.png&quot;</span>
</span><span class='line'>            <span class="p">],</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">attribution</span><span class="p">:</span> <span class="s">&quot;Tiles Courtesy of &lt;a href=&#39;http://open.mapquest.co.uk/&#39; target=&#39;_blank&#39;&gt;MapQuest&lt;/a&gt;. Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency. &lt;img src=&#39;http://developer.mapquest.com/content/osm/mq_logo.png&#39; border=&#39;0&#39;&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>                <span class="n">transitionEffect</span><span class="p">:</span> <span class="s">&quot;resize&quot;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">)</span>
</span><span class='line'><span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Create mapquest.html</h2>

<p>In the same folder, we&rsquo;ll create an html template file, pointing to our javascript file.
We&rsquo;ll call the file <code>mapquest.html</code>. Here are the contents:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s">&quot;gis/admin/openlayers.html&quot;</span> <span class="o">%</span><span class="p">}</span>
</span><span class='line'><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">openlayers</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">include</span> <span class="s">&quot;gis/admin/mapquest.js&quot;</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>In admin.py, Reference mapquestGeoAdmin</h2>

<p>The last step is to replace references to <code>GeoModelAdmin</code> or <code>OSMGeoAdmin</code> to
<code>mapquestGeoAdmin</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">PntTraxGeoAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">mapquestGeoAdmin</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Base Class for Geometry Table Admin&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="s">&#39;collectDate&#39;</span><span class="p">,</span><span class="s">&#39;group&#39;</span><span class="p">,</span><span class="s">&#39;featurePurpose&#39;</span><span class="p">,</span><span class="s">&#39;collectionMethod&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">list_editable</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;featurePurpose&#39;</span><span class="p">,</span><span class="s">&#39;group&#39;</span><span class="p">,</span><span class="s">&#39;collectionMethod&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;featurePurpose&#39;</span><span class="p">,</span><span class="s">&#39;group__name&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>And there you go. Your Django GeoAdmin interface is now rocking aerial tiles courtesy
of Mapquest.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[GeoDjango: Standing Up A GeoJSON Web-Service]]></title>
    <link href="http://mkgeomatics.github.io/blog/2011/12/12/geodjango-standing-up-a-geojson-web-service/"/>
    <updated>2011-12-12T00:30:17-08:00</updated>
    <id>http://mkgeomatics.github.io/blog/2011/12/12/geodjango-standing-up-a-geojson-web-service</id>
    <content type="html"><![CDATA[<p>The models are complete. The database is loaded with some test tabular and spatial data. We&rsquo;re pushing out HTML representations of attribute data using GeoDjango&rsquo;s standard templating functions. Now, the focus moves to visualizing these features&#8217; geometries in a spatial context. Just as with a Django QuerySet, GeoDjango provides a GeoQuerySet. <!-- more --> When paired with a spatially-enabled database (e.g. PostGIS, SpatialLite, etc.), the GeoQuerySet provides functionality for querying data using a series of spatial filters, in addition to tabular filters. As a point of reference, the GeoDjango docs have great tables depicting a blow-by-blow comparison of different spatial databases, displaying each available <a href="https://docs.djangoproject.com/en/dev/ref/contrib/gis/db-api/#spatial-lookup-compatibility">Spatial Lookup</a> and <a href="https://docs.djangoproject.com/en/dev/ref/contrib/gis/db-api/#geoqueryset-methods">GeoQuerySet method</a>. Take note, PostGIS is the clear winner in terms of functionality ;)</p>

<h2>Why GeoJSON?</h2>

<p>From the perspective of exporting data, GeoDjango supports a number of formats. The GeoQuerySet methods can represent your model&rsquo;s geometry column in a number of different <a href="https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#geometry-output">formats</a>: GeoHash, GeoJSON, GML, KML, and SVG. Of all these serialization formats, I&rsquo;ve found KML to be the most frequently used amongst GeoDjango users. Illustrative of this, three of the four functions in <a href="https://code.djangoproject.com/browser/django/trunk/django/contrib/gis/shortcuts.py">django.contrib.gis.shortcuts</a> have to do with KML/KMZ. That&rsquo;s awesome, but where is the love for GeoJSON?</p>

<p>KML can be easily consumed by OpenLayers, the king of open source web mapping viewers. But some of the new kids, e.g. leaflet, polymaps, look to favor GeoJSON over KML as an input for dynamically rendered data, not directly consuming KML out-of-the-box. That being said, if you want KML, this <a href="https://github.com/shramov/Leaflet/tree/master/src/layer">fork of leaflet</a> looks like it will work for you. In my particular project, I&rsquo;m interested in using leaflet, so GeoJSON was the way to go.</p>

<p>Later on, I&rsquo;d like to do some speed comparisons, rendering the same featureset using OpenLayers, represented as both KML and GeoJSON, but that&rsquo;s for the future. I&rsquo;m wondering if OpenLayers will handle the JSON object faster then KML&rsquo;s XML? JSON is just JavaScript after all.</p>

<h2>The Problem</h2>

<p>The GeoDjango GeoQuerySet API has built in methods to handle the serialization and de-serialization of a result set&rsquo;s geometries into different formats. The problem is that these methods only wrap the geometries of a result set. For display in a web mapping application, like leaflet, I want to have access to both the geometry in the format of my choosing, as well as the supplementary attributes (name, type, etc.) which provide context for that geometry.</p>

<p>For example, asking for the GeoJSON representation of a given feature through Django&rsquo;s shell, like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># Import Models from the Company Application</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">company.Models</span> <span class="kn">import</span> <span class="o">*</span>
</span><span class='line'><span class="c"># Create a GeoQuerySet from the primary key, return GeoJSON</span>
</span><span class='line'><span class="n">qs</span> <span class="o">=</span> <span class="n">Boundary</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">geojson</span><span class="p">()</span>
</span><span class='line'><span class="c"># Print GeoJSON representation of geom</span>
</span><span class='line'><span class="k">print</span> <span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geojson</span>
</span></code></pre></td></tr></table></div></figure>


<p>Will produce a GeoJSON object like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'> <span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="s2">&quot;MultiPolygon&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span><span class="p">[</span>
</span><span class='line'>    <span class="p">[</span>
</span><span class='line'>      <span class="p">[</span>
</span><span class='line'>        <span class="p">[</span>
</span><span class='line'>          <span class="o">-</span><span class="mf">122.574295</span><span class="p">,</span>
</span><span class='line'>          <span class="mf">47.856636</span>
</span><span class='line'>        <span class="p">],</span>
</span><span class='line'>        <span class="p">[</span>
</span><span class='line'>          <span class="o">-</span><span class="mf">122.573924</span><span class="p">,</span>
</span><span class='line'>          <span class="mf">47.85718</span>
</span><span class='line'>        <span class="p">],</span>
</span><span class='line'>        <span class="p">[</span>
</span><span class='line'>          <span class="o">-</span><span class="mf">122.573719</span><span class="p">,</span>
</span><span class='line'>          <span class="mf">47.85757</span>
</span><span class='line'>        <span class="p">]</span> <span class="c1">// Truncated Verticies</span>
</span><span class='line'>      <span class="p">]</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As shown in the example above, the geometries are returned, but not the tabular attributes associated with that feature. Looking at the <a href="http://geojson.org/geojson-spec.html">GeoJSON spec</a>, there are multiple &lsquo;type&rsquo; values which an object can be constrained by. Using GeoDjango&rsquo;s geoJSON() method will produce a type matching the geometry listed in the associated GeoDjango model (point, line, polygon, etc). The distinction here is that I&rsquo;d like to return a GeoJSON object of type &lsquo;Feature&rsquo; or &lsquo;FeatureCollection&rsquo;. These types require an additional &lsquo;properties&rsquo; parameter, which can store tabular attributes. From the spec:</p>

<blockquote><p>A feature object must have a member with the name &ldquo;properties&rdquo;. The value of the properties member is an object (any JSON object or a JSON null value).</p></blockquote>

<p>So, the trick now is to dynamically create a GeoJSON object which contains both populated Geom and Properties attributes.</p>

<h2>The fix (vectorformats)</h2>

<p>In order to create a fully populated GeoJSON object, we need to bring in some extra assistance. Some quick searching brought me to this stack exchange <a href="http://stackoverflow.com/questions/3034482/rendering-spatial-data-of-geoqueryset-in-a-custom-view-on-geodjango">response</a>, from <a href="http://crschmidt.net/blog/">Chris Schmidt</a>. Chris&#8217; vectorformats package handles the serialization and de-serializtion of a variety of formats, including Django Querysets and GeoJSON. From the project <a href="http://packages.python.org/vectorformats/">homepage</a>:</p>

<blockquote><p>The vectorformats library is designed to make it easy to serialize content from any source to any source within Python. Think of it as a poor mans OGR  a pure Python implementation of transforming features to and from various formats (largely XML based).</p></blockquote>

<p>Installing vectorformats is as easy as:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$sudo</span> easy_install vectorformats
</span></code></pre></td></tr></table></div></figure>


<p>From there, as outlined in the above referenced post, it&rsquo;s only a matter of adding a few lines into your GeoDjango app&rsquo;s <a href="https://github.com/mattmakesmaps/geodjango/blob/master/sampling/views.py">view function</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># Using vectorfeatures module return a GeoJSON FeatureCollection</span>
</span><span class='line'><span class="c"># for a given boundary ID.</span>
</span><span class='line'><span class="k">def</span> <span class="nf">boundary_detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">boundary_id</span><span class="p">):</span>
</span><span class='line'>    <span class="n">boundary_detail</span> <span class="o">=</span> <span class="n">Boundary</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">boundary_id</span><span class="p">)</span>
</span><span class='line'>    <span class="n">djf</span> <span class="o">=</span> <span class="n">Django</span><span class="o">.</span><span class="n">Django</span><span class="p">(</span><span class="n">geodjango</span><span class="o">=</span><span class="s">&#39;geom&#39;</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">])</span>
</span><span class='line'>    <span class="n">geoj</span> <span class="o">=</span> <span class="n">GeoJSON</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">()</span>
</span><span class='line'>    <span class="n">s</span> <span class="o">=</span> <span class="n">geoj</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">djf</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">boundary_detail</span><span class="p">))</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The resulting GeoJSON object, represented as a &lsquo;type&rsquo; of &lsquo;FeatureCollection&rsquo;:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;crs&quot;</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;features&quot;</span><span class="o">:</span><span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;geometry&quot;</span><span class="o">:</span><span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="s2">&quot;MultiPolygon&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span><span class="p">[</span>
</span><span class='line'>          <span class="p">[</span>
</span><span class='line'>            <span class="p">[</span>
</span><span class='line'>              <span class="p">[</span>
</span><span class='line'>                <span class="o">-</span><span class="mf">122.574295</span><span class="p">,</span>
</span><span class='line'>                <span class="mf">47.856636</span>
</span><span class='line'>              <span class="p">],</span>
</span><span class='line'>              <span class="p">[</span>
</span><span class='line'>                <span class="o">-</span><span class="mf">122.573924</span><span class="p">,</span>
</span><span class='line'>                <span class="mf">47.85718</span>
</span><span class='line'>              <span class="p">],</span>
</span><span class='line'>              <span class="p">[</span>
</span><span class='line'>                <span class="o">-</span><span class="mf">122.573719</span><span class="p">,</span>
</span><span class='line'>                <span class="mf">47.85757</span>
</span><span class='line'>              <span class="p">]</span> <span class="c1">// Truncated Verticies</span>
</span><span class='line'>            <span class="p">]</span>
</span><span class='line'>          <span class="p">]</span>
</span><span class='line'>        <span class="p">]</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;properties&quot;</span><span class="o">:</span><span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;Port Gamble&quot;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And there you have it, GeoJSON containing both the geometry and attributes. This output can now be mapped to URL, creating an endpoint such as &lsquo;<a href="http://my-site.com/geojson/boundary/">http://my-site.com/geojson/boundary/</a>{boundary_id}/&rsquo;. Pass this to your web mapping client, and you&rsquo;re ready to rock.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Moving to GeoDjango]]></title>
    <link href="http://mkgeomatics.github.io/blog/2011/11/28/moving-to-geodjango/"/>
    <updated>2011-11-28T00:35:49-08:00</updated>
    <id>http://mkgeomatics.github.io/blog/2011/11/28/moving-to-geodjango</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been creating a simple GeoDjango application for managing environmental sampling metadata, and it&rsquo;s been a lot of fun so far. I&rsquo;ve had experience working with many different forms of metadata tracking, from spreadsheets, to wikis, to online project management tools. All of them have their ups and downs, and it seems like there is always a dealbreaker with each organizational method.</p>

<p>Spreadsheets are easy to edit, but lack any form of relational structure (two sets of data for the same report? i guess i&rsquo;ll just put two entries into the same cell).</p>

<!-- more -->


<p>[caption id=&ldquo;attachment_487&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;464&rdquo; caption=&ldquo;sometimes spreadsheets just don&rsquo;t work&hellip;&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/11/Screenshot.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/11/Screenshot.png" alt="" /></a>[/caption]</p>

<p>Wikis are cool, allow easy access to information, but are (in certain cases) a pain for folks to edit. Take the experience of table creation. Dokuwiki, a generic wiki software, requires a series of carefully placed carrots and pipes to delineate headers and columns. A common pain comes when adding a new value to a new row, in which that value exceeds the length of any previous cell. This requires the author to expand the column header, and all previously entered rows, re-aligning the pipes and carrots. Granted as a slightly OCD GIS Analyst, the sight of a well crafted text table fills me with no less wonder then when I saw AlbertBierstadt&rsquo;s <a href="http://www.seattleartmuseum.org/exhibit/exhibitDetail.asp?eventID=21084">&ldquo;Puget Sound on the Pacific Coast&rdquo;</a>, but it&rsquo;s just darn tedious at times. Additionally, as the log of sampling events grows larger, it gets harder to manage. Dokuwiki, AFAIK provides no ways to automatically resort entire sections of pages or records in tables based on alphabetical order, which would make searching for information on a particular page much faster as content becomes larger and larger.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>^ Column One              ^ Column Two   ^
</span><span class='line'>| Zee 'z' string            | This is a longer string    |
</span><span class='line'>| 2nd longer string of text | 2nd short string           |
</span><span class='line'>| SuperShort                | A string starting with 'A' |</span></code></pre></td></tr></table></div></figure>


<p>Online project management tools are interesting as well. They allow rapid collaboration between project members, and provide template functionality, allowing for status reports on recurring workflows to be easily generated (e.g., create a template for a report, spawn off an instance of a template for each new project). The downside to these services are that: they cost money, they also may not provide a normalized way to store data, and (of most interest to myself) they probably don&rsquo;t allow for the storage/visualization of spatial data.</p>

<p>[caption id=&ldquo;attachment_488&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;10 megs free for one user? cool!&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/11/Screenshot-1.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/11/Screenshot-1-300x162.png" alt="" /></a>[/caption]</p>

<p>In comes GeoDjango. Over the next few posts, I think I&rsquo;ll record my experiences developing an application that allows the storage of metadata, within the context of environmental sampling efforts. The goal is to provide a web application which stores both tabular and spatial data in a normalized fashion, and easily visualize both in an informative way.</p>

<p>[caption id=&ldquo;attachment_489&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Hey look Ma&#8217;, it&rsquo;s GeoJSON!&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/11/Screenshot-2.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/11/Screenshot-2-300x147.png" alt="" /></a>[/caption]</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hand-Rolled Vector Tiles - TileStache]]></title>
    <link href="http://mkgeomatics.github.io/blog/2011/02/25/hand-rolled-vector-tiles-tilestache/"/>
    <updated>2011-02-25T05:09:52-08:00</updated>
    <id>http://mkgeomatics.github.io/blog/2011/02/25/hand-rolled-vector-tiles-tilestache</id>
    <content type="html"><![CDATA[<p>A few weeks ago I found myself surfing the intertubes for instructions on how to serve up some vector tile goodness. That search came up pretty much empty, except for one glimmering <a href="http://gis.stackexchange.com/questions/3712/create-vector-geojson-tiles-for-polymaps">thread</a> of hope. The answer, <a href="http://tilestache.org/">TileStache</a> { &lt;&mdash; Imagine that&rsquo;s a mustache on it&rsquo;s side.</p>

<blockquote><p>TileStache is a Python-based server application that can serve up map tiles based on rendered geographic data.</p></blockquote>

<!-- more -->


<p>By design, TileStache can be used to serve up stylish TMS tiles using <a href="http://mapnik.org/">mapnik</a> map files, and can also be used to locally cache remote-services via <a href="http://tilestache.org/doc/#providers">proxy</a>. What I&rsquo;m most interested in though, is it&rsquo;s ability to deploy vector tiles. So what are vector tiles? Think TMS tiles&hellip; but replace representations of the geometries through images, with <a href="http://geojson.org/">GeoJSON</a>. Pretty wild right? Specifically, the TileStache <a href="http://tilestache.org/doc/TileStache.Goodies.Providers.PostGeoJSON.html">PostGeoJSON Provider</a> can be used to connect TileStache to a PostGIS data source, and return a tile comprised entirely of GeoJSON data.</p>

<p>For example, data from a PostGIS data source can be rendered as an image tile (&hellip;/10/16/357.png), like this:</p>

<p><a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/02/tile.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/02/tile.png" alt="" /></a></p>

<p>But can also be represtented as a vector tile (&hellip;/10/16/357.json), like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Subset of a single 256x256 pixel vector tile.</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>          <span class="p">[</span>
</span><span class='line'>            <span class="p">[</span>
</span><span class='line'>              <span class="p">[</span>
</span><span class='line'>                <span class="o">-</span><span class="mf">122.973093</span><span class="p">,</span>
</span><span class='line'>                <span class="mf">47.969842</span>
</span><span class='line'>              <span class="p">],...</span>
</span><span class='line'>              <span class="p">[</span>
</span><span class='line'>                <span class="o">-</span><span class="mf">122.973093</span><span class="p">,</span>
</span><span class='line'>                <span class="mf">47.969842</span>
</span><span class='line'>              <span class="p">]</span>
</span><span class='line'>            <span class="p">]</span>
</span><span class='line'>          <span class="p">]</span>
</span><span class='line'>        <span class="p">]</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;property_s&quot;</span><span class="o">:</span> <span class="s2">&quot;USFS&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;juris_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Olympic National Forest&quot;</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">1280</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So what are the advantages of using vector tiles? You can already use <a href="http://dev.openlayers.org/docs/files/OpenLayers/Format/GeoJSON-js.html">OpenLayers&#8217; GeoJSON</a> format reader to populate a vector layer in OL. It&rsquo;s an issue of size. Highly complex geometries can be large in size, and requesting all that data at once can be time consuming. Vector tiles approach this problem using the same answer as TMS&hellip; only request those sections of data which you need at that time. By only requesting those tiles within the user&rsquo;s current extent + a small buffer, the need to download large geometries at once can be negated. Furthermore, just as TMS&rsquo;s can be pre-cached to disk (seeded), so can vector tiles.</p>

<p>One example of this is serving up a combined NFS boundary dataset compiled by my good pal, Greg (<a href="http://www.chopshopgeo.com/blog/">http://www.chopshopgeo.com/blog/</a>). These boundaries are <strong>dense</strong> and displaying them at their full extent &amp; raw level of detail is expensive. But by breaking the vector representations of these geometries up into a standard tile scheme, only those tiles which we need are requested, and only when we need them. As a side note, in addition to tiling, I also simplified the boundaries, to promote faster load time at small-scales. The least granular vector representations display at the smallest zoom-scales, while the highest (raw, unsimplified) level of granularity displays only at the largest zoom-scales.</p>

<p>[caption id=&ldquo;attachment_398&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;665&rdquo; caption=&ldquo;NFS Boundaries Provided By ChopShopGeo&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/02/parks.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/02/parks.png" alt="" /></a>[/caption]</p>

<p>Additionally, using vector representations of geometry rather then cached images allows styling of those geometries on the fly. <a href="http://polymaps.org/">Polymaps</a>, the only display client I&rsquo;ve found so far that can consume vector tiles out-of-the-box, renders these tiles as SVG elements. Because of this, unique styling can be applied via CSS; controlling the color, stroke, fill, etc. of each geometry in response to both attributes associated with the geometry (see image below) or user input&hellip; ala the <a href="http://polymaps.org/ex/statehood.html">Polymaps example page</a>.</p>

<p>[caption id=&ldquo;attachment_393&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;691&rdquo; caption=&ldquo;USGS real-time gauge stations. Darker dots represent stronger streamflow, lighter dots represent slower flow. You&rsquo;ll have to ignore the fact that I&rsquo;m symbolizing streamflow without the streams.&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/02/usgs.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2011/02/usgs.png" alt="" /></a>[/caption]</p>

<p>The above example converts data from the <a href="http://waterservices.usgs.gov/rest/WOF-IV-Service.html">USGS Instantaneous Values Web Service</a> (part of the <a href="http://waterdata.usgs.gov/nwis/">USGS Water Date for the Nation program</a>) as a JSON response to GeoJSON. These data points are then symbolized dynamically using Polymaps. More on that later.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
</span><span class='line'><span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[{</span>
</span><span class='line'><span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">,</span>
</span><span class='line'><span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'><span class="p">[</span>
</span><span class='line'><span class="p">[</span>
</span><span class='line'><span class="p">[</span><span class="o">-</span><span class="mf">122.973093</span><span class="p">,</span> <span class="mf">47.969842</span><span class="p">],</span>
</span><span class='line'><span class="p">[</span><span class="o">-</span><span class="mf">122.973093</span><span class="p">,</span> <span class="mf">47.969842</span><span class="p">]</span>
</span><span class='line'><span class="p">]</span>
</span><span class='line'><span class="p">]</span>
</span><span class='line'><span class="p">]</span>
</span><span class='line'><span class="p">},</span>
</span><span class='line'><span class="nx">http</span><span class="o">:</span> <span class="c1">//jsbeautifier.org/</span>
</span><span class='line'><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
</span><span class='line'><span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'><span class="s2">&quot;property_s&quot;</span><span class="o">:</span> <span class="s2">&quot;USFS&quot;</span><span class="p">,</span>
</span><span class='line'><span class="s2">&quot;juris_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Olympic National Forest&quot;</span>
</span><span class='line'><span class="p">},</span>
</span><span class='line'><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">1280</span>
</span><span class='line'><span class="p">}]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[cURL'ing to FeatureServer from PostGIS: Easier then I Thought]]></title>
    <link href="http://mkgeomatics.github.io/blog/2010/07/09/curling-to-featureserver-from-postgis-easier-then-i-thought/"/>
    <updated>2010-07-09T05:25:40-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2010/07/09/curling-to-featureserver-from-postgis-easier-then-i-thought</id>
    <content type="html"><![CDATA[<p>So I&rsquo;ve finished cutting a draft tileset using mapnik, <a href="http://mkgeomatics.com/apps/bus/bus.html">depicting bus routes in Bellingham, WA</a>. Now that the cartography is well in progress, I&rsquo;d like to add some interactivity to the map. My first attempt at this will be to utilize MetaCarta (Chris Schmidt)&rsquo;s <a href="http://featureserver.org/">FeatureServer</a>. <!-- more --> FeatureServer allows one to use standard HTTP verbs to GET representations of data, POST new data, or DELETE existing data. While querying data you can also pass additional URL parameters like a bounding box or attribute to select out a smaller subset of returned representations. I&rsquo;ll be POST&#8217;ing a bus stop dataset to FeatureServer as GeoJSON. Once the data are stored in FeatureServer, I&rsquo;ll be able to add popups based on a user&rsquo;s click of a bus stop. <!-- more --></p>

<p>Getting data stored on my local PostGIS install to my remote FeatureServer instance turned out to be a three step process.</p>

<p><strong>Step One:</strong> Convert local PostGIS bus stops layer to GeoJSON via OGR</p>

<p>I had originally planned on writing a pg/plsql function to try and output a bash script. The script would cURL each feature individually to my FeatureServer instance. This proved to be way more work then I had expected. What was the solution? <a href="http://www.gdal.org/ogr/">OGR</a>, of course. OGR has read/write drivers for both <a href="http://www.gdal.org/ogr/drv_geojson.html">GeoJSON</a> and <a href="http://www.gdal.org/ogr/drv_pg.html">PostGIS</a>. This allows one to convert an entire dataset to GeoJSON with a single command (see below).</p>

<p>[sourcecode language=&ldquo;bash&rdquo;]
ogr2ogr -f &ldquo;GeoJSON&rdquo; ogrstops.json PG:&ldquo;host=localhost dbname=routing user=postgres password=*** port=5432&rdquo; &ldquo;wtastops(the_geom)&rdquo;
[/sourcecode]</p>

<p><strong>Step 2:</strong> Wrap &ldquo;coordinate&rdquo; elements in double brackets</p>

<p>When initially trying to cURL the GeoJSON output to FeatureServer, I was receiving an error stating that a bounding box could not be determined for the first geometry in my dataset. After some trial-and-error, I soon realized that the OGR output FeatureCollection was wrapping each point feature&rsquo;s geometry in a single set of brackets. This type of behavior follows the GeoJSON <a href="http://geojson.org/geojson-spec.html#id9">specification for a FeatureCollection</a>, as far as I can tell. However, in order for FeatureServer to consume this dataset, each point feature is required to be wrapped in a second set of brackets. I used gedit to run the find/replace. Below is an example of a GeoJSON feature which FeatureServer can consume. This individual feature is part of a larger FeatureCollection.</p>

<p>[sourcecode language=&ldquo;js&rdquo;]</p>

<p>{ &ldquo;type&rdquo;: &ldquo;Feature&rdquo;,</p>

<pre><code>      "properties": {
         "POINT_ID": "1000",
         "POINT_NAME": "Fielding at 32nd",
         "SHELTER": "Yes", "BENCH": "No" },
      "geometry": {
         "type": "Point",
         "coordinates": [[-122.474490,48.730021]]}
</code></pre>

<p>}
[/sourcecode]</p>

<p><strong>Step 3:</strong> cURL GeoJSON to FeatureServer</p>

<p>The last step is to actually POST the data to FeatureServer. For that, I used cURL.</p>

<p>[sourcecode language=&ldquo;bash&rdquo;]</p>

<p>curl -d @ogrstops.json <a href="http://mkgeomatics.com/cgi-bin/featureserver/featureserver.cgi/scribble/create.json">http://mkgeomatics.com/cgi-bin/featureserver/featureserver.cgi/scribble/create.json</a></p>

<p>[/sourcecode]</p>

<p>Now that the features have been uploaded, we can view them via FeatureServer as <a href="http://mkgeomatics.com/cgi-bin/featureserver/featureserver.cgi/scribble/all.georss">GeoRSS</a>, <a href="http://mkgeomatics.com/cgi-bin/featureserver/featureserver.cgi/scribble/all.kml">KML</a>, <a href="http://mkgeomatics.com/cgi-bin/featureserver/featureserver.cgi/scribble/all.json">JSON</a>, <a href="http://mkgeomatics.com/cgi-bin/featureserver/featureserver.cgi/scribble/all.gml">GML</a>. Neat!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PL/pgSQL function to Iterate pgRouting]]></title>
    <link href="http://mkgeomatics.github.io/blog/2010/06/28/plpgsql-function-to-iterate-pgrouting/"/>
    <updated>2010-06-28T00:37:39-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2010/06/28/plpgsql-function-to-iterate-pgrouting</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been working on a side project using <a href="http://www.mkgeomatics.com/wordpress/?s=pgRouting&amp;searchsubmit=Find">pgRouting</a> to determine the least-cost path across a street network from a given building to the nearest bus stop within <a href="http://en.wikipedia.org/wiki/Bellingham,_Washington">Bellingham, WA</a>. It&rsquo;s one thing to execute pgRouting&rsquo;s built-in functions for a single vertex (building) to another vertex (bus stop)&hellip; but another to have the function iterate through all buildings and their closest bus stop. <!-- more --></p>

<p>So that began my first experience with using PL/pgSQL. The benefit for using the procedural language for PostgreSQL lies in its ability to loop through collections of records easily. I&rsquo;ve posted my function below. It&rsquo;s not pretty, but it&rsquo;s filled with enough notices to let me know where an error occurs, which helped me understand how things were acting each step of the way. Here is the basic idea:</p>

<ul>
<li><p>Loop through a table in which each row has a source and destination vertex</p></li>
<li><p>Execute the pgRouting function using these two vertices, determining the length of the least-cost path.</p></li>
<li><p>Populate a field, &lsquo;dist_calc&rsquo; with the distance.</p></li>
</ul>


<p>[sourcecode]
CREATE OR REPLACE FUNCTION bulk_route_generate() RETURNS VOID AS $$
DECLARE
 bld_row bld_wtastops_staging5%ROWTYPE;
 dist_calc RECORD;
BEGIN
 RAISE NOTICE &lsquo;Beginning Function&rsquo;;
 FOR bld_row IN SELECT * FROM bld_wtastops_staging5 WHERE bld_wtastops_staging5.bld_vert_node IS NOT NULL
 AND bld_wtastops_staging5.wtastops_vert_node IS NOT NULL
 &mdash; BEGIN ADDING BUM NODES TO SKIP OVER
 AND bld_wtastops_staging5.bld_vert_node &lt;&gt; 2915
 AND bld_wtastops_staging5.wtastops_vert_node &lt;&gt; 293
 &mdash; ADD START GID
 &mdash; USED ONLY IF BUM NODES EXIST
 &mdash;AND bld_wtastops_staging5.bld_gid &gt;= 29200
 ORDER BY bld_wtastops_staging5.bld_gid LOOP
 RAISE NOTICE &lsquo;Value of wtastops_vert_node is %. The value of bld_vert_node is %&rsquo;,bld_row.wtastops_vert_node, bld_row.bld_vert_node;
 RAISE NOTICE &lsquo;Value of wtastops_gid is %. The value of bld_gid is %&rsquo;,bld_row.wtastops_gid, bld_row.bld_gid;
 &mdash; BEGIN STANDARD pgRouting A*Star FUNCTION
 SELECT SUM(cost) INTO dist_calc FROM shortest_path_astar(&lsquo;
 SELECT gid as id,
 source::integer,
 target::integer,
 length::double precision as cost,
 x1, y1, x2, y2
 FROM streets_9102748&rsquo;,
 bld_row.bld_vert_node, bld_row.wtastops_vert_node, false, false);
 RAISE NOTICE &lsquo;Value of dist_calc is %.&rsquo;,dist_calc;
 EXECUTE &lsquo;UPDATE bld_wtastops_staging5
 SET route_dist = &rsquo; ||dist_calc|| &lsquo;
 WHERE &rsquo; ||bld_row.bld_gid|| &lsquo; = bld_wtastops_staging5.bld_gid&rsquo;;
 END LOOP;
 &mdash; BAIL OUT ON ERRORS
 EXCEPTION
 WHEN CONTAINING_SQL_NOT_PERMITTED THEN
 RAISE NOTICE &lsquo; EXECPTION Value of wtastops_vert_node is %. The value of bld_vert_node is %&rsquo;,bld_row.wtastops_vert_node, bld_row.bld_vert_node;
END;
$$ LANGUAGE &lsquo;plpgsql&rsquo;;
&mdash; EXECUTE FUNCTION
SELECT bulk_route_generate();
[/sourcecode]</p>

<p>I&rsquo;m excited at the possibilities that using PL/pgSQL offers in terms of manipulating data. I&rsquo;m sure that the above function can be cleaned up quite a bit, too. If I ever have the need to re-visit this or similar problems, I&rsquo;ll be sure to do some serious head-scratching to think about a better approach!</p>

<p>Here is an image of the resulting data generated using <a href="http://mapnik.org/">mapnik</a>. Areas from dark green to light-green are within a &frac14; mile distance, while areas from yellow-to-red represent distances increasingly greater then a &frac14; mile. The large checkered areas are where the dataset failed to route. More on that at another time.</p>

<p>[caption id=&ldquo;attachment_360&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;430&rdquo; caption=&ldquo;the result as seen in mapnik&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/06/bld_sym_diverging_web.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/06/bld_sym_diverging_web.png" alt="bld_sym_diverging_web" /></a>[/caption]</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[pgRouting III: PHP + OpenLayers Interface]]></title>
    <link href="http://mkgeomatics.github.io/blog/2010/02/06/pgrouting-iii-php-openlayers-interface/"/>
    <updated>2010-02-06T09:47:11-08:00</updated>
    <id>http://mkgeomatics.github.io/blog/2010/02/06/pgrouting-iii-php-openlayers-interface</id>
    <content type="html"><![CDATA[<p>With the routing <a href="http://www.mkgeomatics.com/wordpress/?p=312">database configured and populated</a>, and with <a href="http://www.mkgeomatics.com/wordpress/?p=322">geoserver rendering the WMS</a>, now the focus can shift on designing the actual display and functionality.</p>

<p>The conceptual plan is as follows: <!-- more --></p>

<ul>
<li><p>Extract the geometry of a user&rsquo;s click on the map.</p></li>
<li><p>Pass the extracted geometry to a PHP script, via an HTTP GET request.</p></li>
<li><p>Use the PHP script to pass the geometry as part of an SQL query against the PostGIS/pgRouting database.</p></li>
<li><p>Return the geometry from the database as <a href="http://geojson.org/">GeoJSON</a>, and deserialize it into an OpenLayers vector layer feature.</p></li>
</ul>


<p>The code to extract a user&rsquo;s clicked coordinates was taken from <a href="http://openlayers.org/dev/examples/click.html">this</a> OpenLayers example. It was then modified to pass the xy coordinates to a second function, designed to create a URL which will execute a PHP script.</p>

<p>[sourcecode language=&ldquo;javascript&rdquo;]trigger: function(e) {
 var xy = map.getLonLatFromViewPortPx(e.xy);
 executeSQL(xy);
 }[/sourcecode]</p>

<p>Passing the XY variable to the executeSQL() function, we are able to now seperate out the individual X and Y coordinates, and apply them to their respective parameters in our URL string.</p>

<p>[sourcecode language=&ldquo;javascript&rdquo;]// Build the URL
 var json_url = &ldquo;<a href="http://localhost/near_vertex_astar.php?">http://localhost/near_vertex_astar.php?</a>&rdquo;;
 json_url += &ldquo;x=&rdquo; + escape(xy.lon);
 json_url += &ldquo;&amp;y=&rdquo; + escape(xy.lat);[/sourcecode]</p>

<p>Having constructed the URL, we are now ready to use it to populate an OpenLayers vector layer with data.</p>

<p>[sourcecode language=&ldquo;javascript&rdquo;]// Make a fresh vector layer, pulling features from our script URL
 json_layer = new OpenLayers.Layer.Vector(&ldquo;GeoJSON&rdquo;, {
 styleMap: myStyles,
 strategies: [new OpenLayers.Strategy.Fixed()],
 protocol: new OpenLayers.Protocol.HTTP({
 url: json_url,
 format: new OpenLayers.Format.GeoJSON()
 })
 });[/sourcecode]</p>

<p>Alright! So where are we at right now? A user has clicked the map, and that click&rsquo;s geometry has been extracted and sent to a PHP script on the server for further work. The PHP script will execute SQL in the PostGIS/pgRouting data base to do the following:</p>

<ul>
<li><p>Find the closest vertex in our routing network to the user&rsquo;s map click. This will be used as a source vertex.</p></li>
<li><p>Find all firestations within 5km of the vertex (which have been pre-attributed with the closest vertex on the routing network to their location).</p></li>
<li><p>Calculate the cost (as defined by total length of the route) from the source vertex to each fire station (really the routing network vertex).</p></li>
<li><p>Return back as GeoJSON only the geometry for the route with the lowest cost.</p></li>
</ul>


<p>Why all the hassle with determining the cost? Can&rsquo;t you just use PostGIS&#8217; ST_DWithin() function to find the closet firestation to our user&rsquo;s click and create the route? Well you could, but it might not always be the shortest route.</p>

<p>[caption id=&ldquo;attachment_339&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Euclidean distance versus Manhattan. Which one is shorter?&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/02/distance.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/02/distance-300x279.png" alt="Euclidean distance versus Manhattan. Which one is shorter?" /></a>[/caption]</p>

<p>This behavior can be respresented in the routing network with the example below. Two different routes are generated from the same source vertex based on the combination of routing algorithm and account for route cost. On the left, the <a href="http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">dijkstra algorithm</a> is used to return the route to the closest fire station as the result of an ST_DWithin() query. On the right, the A-Star algorithm is used, and the route costs of all fire stations within a buffer are taken into account. As we can see, a different route and a different station are returned.</p>

<p><a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/02/dj_left_astar_right1.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/02/dj_left_astar_right1-1024x338.png" alt="Comparing the two search algorithms and cost relationships." /></a></p>

<p>A link to the JS and PHP scripts can be found at the end of this post. This definitely is not the most elegant solution to working with routing, but in terms of an experiment it was a great learning exercise. I&rsquo;m really excited to dive deeper into PostGIS and pgRouting. The next step in the process will be incorporating OSM data, and adding in addition attributes which affect cost (speed limits, one-way streets, etc).</p>

<p>View the <a href="http://mkgeomatics.com/apps/syntaxhighlighter/astar_php.html">PHP</a>.</p>

<p>View the <a href="http://mkgeomatics.com/apps/syntaxhighlighter/astar.html">OL JS</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[pgRouting Part II: PostGIS + Geoserver]]></title>
    <link href="http://mkgeomatics.github.io/blog/2010/01/31/pgrouting-part-ii-postgis-geoserver/"/>
    <updated>2010-01-31T05:05:32-08:00</updated>
    <id>http://mkgeomatics.github.io/blog/2010/01/31/pgrouting-part-ii-postgis-geoserver</id>
    <content type="html"><![CDATA[<p>Since compiling <a href="http://pgrouting.postlbs.org/">Orkney&rsquo;s pgRouting extension</a> to PostgreSQL/PostGIS, I&rsquo;ve decided to try my hand at creating a simple web interface to poke into the database. The current setup is as follows: <!-- more --></p>

<ul>
<li><p>Display: OpenLayers</p></li>
<li><p>Renderer: Geoserver (via non-cached WMS)</p></li>
<li><p>Spatial Backend: PostGIS/pgRouting enabled PostgreSQL</p></li>
<li><p>Data: <a href="http://www.cob.org/services/maps/gis/index.aspx">Public GIS data</a> from the city of Bellingham, Washington&rsquo;s GIS department.</p></li>
</ul>


<p>For the sake of brevity, (but really because both TOPP has created some <a href="http://workshops.opengeo.org/opengeo-stack/">fantastic guides</a>) I won&rsquo;t go into the specifics of installing all the pieces. Just as an FYI, remember to set your &lsquo;JAVA_HOME&rsquo; environment variable and make sure that you don&rsquo;t have things trying to use the same port!</p>

<p>The Bellingham data is currently stored in <a href="http://www.spatialreference.org/ref/esri/102748/">NAD83 State Plane WA North Feet</a>, a typical projection for this area. This projection however, is not part of the EPSG projection set, and as such is not included in a vanilla install of PostGIS.</p>

<p>In order to add this to the collection of spatial reference systems used by my PostGIS install, I went with the ridiculously cool <a href="http://spatialreference.org">spatialreference.org</a> site (A <a href="http://crschmidt.net/">crschmidt</a>, <a href="http://dbsgeo.com/">dbsgeo</a>, <a href="http://hobu.biz/">hobu</a>, and <a href="http://umbrellaconsulting.com/">umbrella</a> joint, hah). Navigating to the projection&rsquo;s page gives me the option to generate an <a href="http://www.spatialreference.org/ref/esri/102748/postgis/">INSERT</a> statement, adding the projection&rsquo;s info into my database.</p>

<p>To load shapefiles into the PostGIS database, I chose to use the SPIT plugin for QGIS. Loading the data was fairly straightforward. I had an issue with a datefield that was present in the source shapefile, and had to delete the column manually using Open Office Database. I haven&rsquo;t found a way to delete fields from a shapefile using QGIS.</p>

<p>[caption id=&ldquo;attachment_327&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;The SPIT Interface&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/01/spit.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/01/spit-300x175.png" alt="spit" /></a>[/caption]</p>

<p>After uploading the streets data into my PostGIS database, the next step was to transform the geometry into the Web Mercator 900913 Projection. This was done using standard PostGIS functions, adding a new, second, geometry column to the existing streets table. This reprojected data was then exported from my staging PostGIS database as a shapefile using the QGIS, &lsquo;Save As Shapefile&rsquo; tool, and re-imported into my production database (with the routing functions).</p>

<p>With data stored in the web mercator projection, inside of our PostGIS/pgRouting database, the next step was to add the layers to Geoserver. Using Geoserver 2.x, the process included the following steps (all done through the web-admin).</p>

<ul>
<li><p>Add the new data store pointing the PostGIS database.</p></li>
<li><p>Add new layers (resources) which point to the tables of interest in our PostGIS database.</p></li>
</ul>


<p>After creating the connections between PostGIS and Geoserver, the creation of WMS services is taken care of, allowing us to roll them into OpenLayers with relative ease.</p>

<p>I guess this got a little off-topic from what I originally wanted to write about. I think that I&rsquo;ll save the actual breakdown of my OL code (taking a user&rsquo;s map click to and using it to calculate a route to the nearest fire-station as determined by manhattan distance, as opposed to euclidean distance) for another day.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[pgRouting On Ubuntu Netbook Remix 9.10]]></title>
    <link href="http://mkgeomatics.github.io/blog/2010/01/11/pgrouting-on-ubuntu-netbook-remix-9-10/"/>
    <updated>2010-01-11T14:26:59-08:00</updated>
    <id>http://mkgeomatics.github.io/blog/2010/01/11/pgrouting-on-ubuntu-netbook-remix-9-10</id>
    <content type="html"><![CDATA[<p>While working through Regina Obe and Leo Hsu&rsquo;s <a href="http://www.postgis.us">PostGIS In Action</a> I thought that I&rsquo;d jump into the world of routing. My plan was to develop a sample application that could be used to plan bicycle routes throughout the city of Seattle. A quick google search proved that someone has already done it, and done it very well! <a href="http://www.ridethecity.com/">http://www.ridethecity.com/</a> provides cycling routes using OSM data for many major cities, Seattle included. <!-- more --></p>

<p>Undeterred and inspired, i decided to compile the <a href="http://pgrouting.postlbs.org/">pgRouting</a> set of tools for PostGIS and give them a whirl.</p>

<p>My primary tutorial for moving through the install and execution of functions came from the 2009 FOSS4G Tokyo &amp; Osaka workshop entitled, &ldquo;<a href="http://www.google.com/url?sa=t&amp;source=web&amp;ct=res&amp;cd=7&amp;ved=0CCMQFjAG&amp;url=http%3A%2F%2Fwww.osgeo.jp%2Fwordpress%2Fwp-content%2Fuploads%2F2009%2F11%2Fworkshop_manual.pdf&amp;ei=4vdLS63EKIGSsgPFrsGIDA&amp;usg=AFQjCNEoTXqRqtS8fpDXbNLo6H2Nk3cEyg&amp;sig2=RLw7qVqUev7k8pdvzCjXeQ">FOSS4G routing with pgRouting tools and OpenStreetMap road data.</a>&rdquo; Although my installation on Ubuntu Netbook Remix (UNR) 9.10 required a little different setup, this guide definitely got me 99% of the way there.</p>

<p>The majority of my installation woes were caused by the different pathways used on my UNR install of PostgreSQL vs. what are apparently the standard paths.</p>

<p>After attempting to execute cmake to compile pgRouting, I&rsquo;d be presented with an error stating that the &lsquo;POSTGRESQL_INCLUDE_DIR&rsquo; was not found. A locate command pointed me to the correct path for my PostgreSQL installation. By modifying the FindPostgreSQL.cmake file to search for the correct path, I was back in business.</p>

<p>Following the workshop instructions, I then attempted to create the database directly from the terminal, which yielded the following result.</p>

<p>[sourcecode language=&ldquo;bash&rdquo;]matt@matt-netbook:~$ createdb -U postgres routing
createdb: could not connect to database postgres: could not connect to server: No such file or directory
 Is the server running locally and accepting
 connections on Unix domain socket &ldquo;/var/run/postgresql/.s.PGSQL.5432&rdquo;?[/sourcecode]</p>

<p>After reading the documentation associated with &ldquo;createdb&rdquo;, i tried adding the &ldquo;-h&rdquo; flag pointing to &ldquo;localhost&rdquo;, which solved the problem.</p>

<p>The final error which I ran into had to do with the &ldquo;$libdir&rdquo; environment variable. While trying to register the pgRouting functions in my new database, I&rsquo;d be presented with the following:</p>

<p>[sourcecode language=&ldquo;bash&rdquo;]psql:/usr/share/postlbs/routing_core.sql:32: ERROR: could not access file &ldquo;$libdir/librouting&rdquo;: No such file or directory
psql:/usr/share/postlbs/routing_core.sql:43: ERROR: could not access file &ldquo;$libdir/librouting&rdquo;: No such file or directory
psql:/usr/share/postlbs/routing_core.sql:53: ERROR: could not access file &ldquo;$libdir/librouting&rdquo;: No such file or directory[/sourcecode]</p>

<p>Getting impatient at this point (i wanted to route!) I modified the SQL files to reference the explicit path of my PostgreSQL lib directory. Once that was done, I had a working routing database!</p>

<p>Loading the sample data, creating the indexes, and executing the queries was amazingly straightforward. To test visualizing the data, I exported one of the tutorial queries directly into a new table.</p>

<p>[sourcecode language=&ldquo;SQL&rdquo;]SELECT * INTO export
 FROM dijkstra_sp(&lsquo;ways&rsquo;, 10, 20);[/sourcecode]</p>

<p>[caption id=&ldquo;attachment_316&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;The route depicted in red as seen in QGIS.&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/01/qgis_routing.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/01/qgis_routing-300x175.png" alt="qgis_routing" /></a>[/caption]</p>

<p>Just for kicks, I tried exporting the data as GeoJSON and visualzing it via OpenLayers.</p>

<p>The following SQL query aggregates the exported line segments into a single GeoJSON object:</p>

<p>[sourcecode language=&ldquo;SQL&rdquo;]SELECT ST_AsGeoJSON(ST_UNION(the_geom)) AS geom_union
FROM export;[/sourcecode]</p>

<p>Using the <a href="http://openlayers.org/dev/examples/vector-formats.html">vector-formats</a> OL example, which displays GeoJSON in either EPSG 4326 or 102113, I was able to visualize the line segment with no problem.</p>

<p>[caption id=&ldquo;attachment_317&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;GeoJSON representation of line segment generated using pgRouting, displayed in OpenLayers&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/01/openlayers_vector_formats.png"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2010/01/openlayers_vector_formats-300x175.png" alt="" /></a>[/caption]</p>

<p>Well that&rsquo;s all for one day. So it looks like the bike riding app is out, but I&rsquo;m sure that there will be many more interesting ideas for pgRouting that will come to mind as I continue to explore PostGIS.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ESRI UC Student Assistant, Sweet!]]></title>
    <link href="http://mkgeomatics.github.io/blog/2009/04/27/esri-uc-student-assistant-sweet/"/>
    <updated>2009-04-27T03:13:59-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2009/04/27/esri-uc-student-assistant-sweet</id>
    <content type="html"><![CDATA[<p>Just found out that I&rsquo;ll be participating in the 2009 ESRI UC as a student assistant. Big thanks go out to <a href="http://geography.asu.edu/balling">Dr. Robert Balling</a> and <a href="http://www.spatiallyadjusted.com/">James Fee</a>, who both wrote letters of recommendation for me.</p>

<p>Now to get back to more pressing matters, like refactoring this giant wad o&#8217; javascript. <!-- more --></p>

<p>See you in San Deigo!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Visualizing An Existing MySQL Database]]></title>
    <link href="http://mkgeomatics.github.io/blog/2009/04/22/visualizing-an-existing-mysql-database/"/>
    <updated>2009-04-22T08:43:21-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2009/04/22/visualizing-an-existing-mysql-database</id>
    <content type="html"><![CDATA[<p>So I&rsquo;ve been working for about a month with a fairly-normalized (53-table) database in which I draw out all kinds of tabular information, and display it in a spatial context. This has required the numerous multiple table joins, with all kinds of weird relationships&hellip; you know, the kind that usually don&rsquo;t work out very well? <!-- more --></p>

<p>In any event, my SOP for handling these queries was to submit sample data through the codeigniter site that our project&rsquo;s web developer has been courageously firing away at. In this sense, I&rsquo;d sort-of trace the flow of new information through the various tables of the database, monitoring the information stream as best as I could. I thought to myself, that there has to be a better way to handle this stuff! In comes the <a href="http://dev.mysql.com/workbench/">MySQL Workbench</a>. This handy tool from the <a href="http://dev.mysql.com/">MySQL Dev Zone</a> apparently comes in two flavors: FOSS and commercial.</p>

<p>The free version served my visualization needs perfectly. The layout of the program is very solid. I was easily able to take an SQL export of the existing database and import it into the Workbench, through a tool they call &lsquo;Reverse Engineer MySQL Create Script&rsquo;. Once the schema has been injected into the program, a model can be automatically created containing all of the tables as well as relationships. The auto-layout feature however, leaves a lot to be desired.</p>

<p>[caption id=&ldquo;attachment_293&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Above: Automatic Layout Results, Snazzy!&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/initial_layout.jpeg"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/initial_layout-300x189.jpg" alt="Above: Automatic Layout Results, Snazzy!" /></a>[/caption]</p>

<p>After about twenty-minutes of fooling with the table graphics, a usable layout can be produced. One feature that I think is really convenient, but will never use, is the automatic setting of the diagram width and height based on numbers of pages. This is useful for those who need a quick-print out of their database for whatever reason.</p>

<p>[caption id=&ldquo;attachment_292&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Above: Workbench w/ Completed Diagram&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/workspace.jpeg"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/workspace-300x187.jpg" alt="Above: Workbench w/ Completed Diagram" /></a>[/caption]</p>

<p>The real benefit for me however, is the automatic highlighting of key values linking tables together. I&rsquo;m now able to quickly work my way from the table I need to get to, drilling backwards until I see the table I need to start with.</p>

<p>[caption id=&ldquo;attachment_294&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Above: Automatically Highlight The Key Fields Between Two Tables.&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/linking_tables.jpeg"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/linking_tables-300x147.jpg" alt="Above: Automatically Highlight The Key Fields Between Two Tables." /></a>[/caption]</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MetaCarta's Map Rectifier + ESRI DevSummit Mashup Winner :)]]></title>
    <link href="http://mkgeomatics.github.io/blog/2009/04/08/metacartas-map-rectifier-esri-devsummit-mashup-winner/"/>
    <updated>2009-04-08T08:24:07-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2009/04/08/metacartas-map-rectifier-esri-devsummit-mashup-winner</id>
    <content type="html"><![CDATA[<p>I never knew about the <a href="http://labs.metacarta.com/rectifier/">MetaCarta Labs&#8217; Map Rectifier</a> tool, but I&rsquo;ll expect to be using it more in the future. After uploading an image to the site, a user has full control over the creation of Ground Control Points. The advanced nature of this tool is shown though included RMS error reporting as well as the choice between multiple transformation algorithms. <!-- more --> In addition to uploading your own content, a user has the ability to add GCPs for other users&#8217; uploads as well.</p>

<p>[caption id=&ldquo;attachment_276&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Above: The MetaCarta Interface&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/metacarta.jpg"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/metacarta-300x170.jpg" alt="Above: The MetaCarta Interface" /></a>[/caption]</p>

<p>What&rsquo;s really amazing is the ability to directly access rectified images via WMS overlay. Each image hosted on the site is given a unique URL, we can insert into our favorite web mapping clients.</p>

<p>To try it out, I used the <a href="http://resources.esri.com/arcgisserver/apis/javascript/gmaps/index.cfm?fa=codeGalleryDetails&amp;scriptID=16067">ExtMap &ndash; Mashup Framework</a> developed by ArcGIS user <a href="http://resources.esri.com/arcgisserver/apis/javascript/gmaps/index.cfm?fa=codeGallery&amp;authorID=alperdincer">alperdincer</a>. This particular application framework was one of the winners at 2009 ESRI DevSummit, with good reason. I was able to quickly pass in the MetaCarta Labs URL, allowing the ExtMap application to consume and display the WMS layer with ease.</p>

<p>[caption id=&ldquo;attachment_278&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Above: Adding a Service to ExtMap&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/add_service.jpg"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/add_service-300x158.jpg" alt="Above: Adding a Service to ExtMap" /></a>[/caption]</p>

<p>In addition to WMS layers, we can add in KML/GeoRSS as well as ArcGIS Server Dynamic/Tiled Map Layers.</p>

<p>[caption id=&ldquo;attachment_279&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Above: ExtMap Interface&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/extjs.jpg"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/extjs-300x187.jpg" alt="Above: ExtMap Interface" /></a>[/caption]</p>

<p>Easy as pie? Piece of Cake? Yes. It&rsquo;s innovative projects like these that keep pushing me to learn more about web mapping technology. Big thanks go out to <a href="http://">crschmidt</a> (who i assumed was involved w/ the project) at MetaCarta and <a href="http://resources.esri.com/arcgisserver/apis/javascript/gmaps/index.cfm?fa=codeGallery&amp;authorID=alperdincer">alperdincer</a> for putting together two great products.</p>

<p>On a final note, the MetaCarta Rectifier has the ability to export out images as geotiffs, allowing us to consume them in our desktop GIS applications. A quick check in ArcCatalog of the Chernobyl sample image I exported out revealed a WGS84 GCS. I can see some really nice workflows combining this tool with tiling programs such as <a href="http://www.klokan.cz/projects/gdal2tiles/">GDAL2Tiles</a> for painless TMS creation.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CloudMade Tile Request Graphics]]></title>
    <link href="http://mkgeomatics.github.io/blog/2009/04/07/cloudmade-tile-request-graphics/"/>
    <updated>2009-04-07T10:14:36-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2009/04/07/cloudmade-tile-request-graphics</id>
    <content type="html"><![CDATA[<p>I just found a neat feature from CloudMade, a <a href="http://maps.cloudmade.com/stats/tile_requests">heat map</a> showing intensity of their tile requests at each zoom scale. As can be expected, Europe and North America are the definite zones of high activity. It&rsquo;s also interesting to note the high activity in other regions such as Chile and the Philippines. <!-- more --></p>

<p>[caption id=&ldquo;attachment_272&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;300&rdquo; caption=&ldquo;Above: CloudMade&rsquo;s Tile Request Graphic&rdquo;]<a href="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/cm_tile_request.jpg"><img src="http://www.mkgeomatics.com/wordpress/wp-content/uploads/2009/04/cm_tile_request-300x187.jpg" alt="Above: CloudMade's Tile Request Overlay" /></a>[/caption]</p>

<p>Following the link to the <a href="http://maps.cloudmade.com/javascripts/stats/cloudmade.js?1238766232">stats JavaScript</a>, it looks like they are using a custom OpenLayers layer class, OpenLayers.Layer.Cloudmade. Sweet!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SpatialLite: My First Look]]></title>
    <link href="http://mkgeomatics.github.io/blog/2009/04/05/spatiallite-my-first-look/"/>
    <updated>2009-04-05T05:45:46-07:00</updated>
    <id>http://mkgeomatics.github.io/blog/2009/04/05/spatiallite-my-first-look</id>
    <content type="html"><![CDATA[<p>With such a small footprint (a single file) <a href="http://www.gaia-gis.it/spatialite/">SpatialLite</a> appears to a novice like myself to be a fantastic niche storage solution for spatial data. In an environment where installing larger FOSS databases such as MySQL or PostGIS/PostgreSQL can be prohibitive, Spatial Lite appears to provide a great solution. Using the provided GUI interface, <!-- more --> it&rsquo;s extremely easy for a first-time user to create an sqllite dbase, load multiple shapefiles, and create spatial indexes against them. Analogous to a FOSSGIS ESRI Geodatabase, I can see a lot of potential uses for GIS developers who require the indexing and searching power of a database as well as the portability of formats such as an ESRI Shapefile or KML.</p>

<p>It looks like a <a href="http://geobabble.wordpress.com/2009/03/26/spatiallite-support-in-qgis/">QGIS connection</a> is in the works for the 1.1 release as well.</p>

<p>I&rsquo;m not sure if it&rsquo;s already being done, but I&rsquo;d bet that it would be pretty easy to put together a SpatialLite / <a href="http://featureserver.org/">FeatureServer</a> combination, considering its native support for so many spatial-backends.</p>

<p>Some tutorials I&rsquo;ve found to be very helpful have come from: <a href="http://www.bostongis.com/PrinterFriendly.aspx?content_name=spatialite_tut01">BostonGIS</a> and the <a href="http://www.gaia-gis.it/spatialite/spatialite-2.2_tutorial.html">SpatialLite project site</a>.</p>
]]></content>
  </entry>
  
</feed>
